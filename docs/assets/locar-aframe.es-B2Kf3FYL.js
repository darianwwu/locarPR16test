import{e as DA,r as kA,b as RA,c as TA}from"./locar.es-DTthYILY.js";var FA={},ca={8167:e=>{var t=Object.prototype.toString;e.exports=function(n){return n.BYTES_PER_ELEMENT&&t.call(n.buffer)==="[object ArrayBuffer]"||Array.isArray(n)}},5734:e=>{e.exports=function(t,n){return typeof t=="number"?t:typeof n=="number"?n:0}},7961:(e,t)=>{t.byteLength=function(l){var c=A(l),d=c[0],f=c[1];return 3*(d+f)/4-f},t.toByteArray=function(l){var c,d,f=A(l),p=f[0],b=f[1],E=new r(function(B,y,I){return 3*(y+I)/4-I}(0,p,b)),C=0,v=b>0?p-4:p;for(d=0;d<v;d+=4)c=i[l.charCodeAt(d)]<<18|i[l.charCodeAt(d+1)]<<12|i[l.charCodeAt(d+2)]<<6|i[l.charCodeAt(d+3)],E[C++]=c>>16&255,E[C++]=c>>8&255,E[C++]=255&c;return b===2&&(c=i[l.charCodeAt(d)]<<2|i[l.charCodeAt(d+1)]>>4,E[C++]=255&c),b===1&&(c=i[l.charCodeAt(d)]<<10|i[l.charCodeAt(d+1)]<<4|i[l.charCodeAt(d+2)]>>2,E[C++]=c>>8&255,E[C++]=255&c),E},t.fromByteArray=function(l){for(var c,d=l.length,f=d%3,p=[],b=16383,E=0,C=d-f;E<C;E+=b)p.push(a(l,E,E+b>C?C:E+b));return f===1?(c=l[d-1],p.push(n[c>>2]+n[c<<4&63]+"==")):f===2&&(c=(l[d-2]<<8)+l[d-1],p.push(n[c>>10]+n[c>>4&63]+n[c<<2&63]+"=")),p.join("")};for(var n=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function A(l){var c=l.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=l.indexOf("=");return d===-1&&(d=c),[d,d===c?0:4-d%4]}function a(l,c,d){for(var f,p,b=[],E=c;E<d;E+=3)f=(l[E]<<16&16711680)+(l[E+1]<<8&65280)+(255&l[E+2]),b.push(n[(p=f)>>18&63]+n[p>>12&63]+n[p>>6&63]+n[63&p]);return b.join("")}i[45]=62,i[95]=63},911:(e,t,n)=>{var i=n(9922).hp;e.exports=function(r,o){if(i.isBuffer(r)&&i.isBuffer(o)){if(typeof r.equals=="function")return r.equals(o);if(r.length!==o.length)return!1;for(var s=0;s<r.length;s++)if(r[s]!==o[s])return!1;return!0}}},9922:(e,t,n)=>{const i=n(7961),r=n(1024),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=a,t.IS=50;const s=2147483647;function A(u){if(u>s)throw new RangeError('The value "'+u+'" is invalid for option "size"');const g=new Uint8Array(u);return Object.setPrototypeOf(g,a.prototype),g}function a(u,g,m){if(typeof u=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(u)}return l(u,g,m)}function l(u,g,m){if(typeof u=="string")return function(M,R){if(typeof R=="string"&&R!==""||(R="utf8"),!a.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const W=0|E(M,R);let Z=A(W);const he=Z.write(M,R);return he!==W&&(Z=Z.slice(0,he)),Z}(u,g);if(ArrayBuffer.isView(u))return function(M){if(_e(M,Uint8Array)){const R=new Uint8Array(M);return p(R.buffer,R.byteOffset,R.byteLength)}return f(M)}(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(_e(u,ArrayBuffer)||u&&_e(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_e(u,SharedArrayBuffer)||u&&_e(u.buffer,SharedArrayBuffer)))return p(u,g,m);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const w=u.valueOf&&u.valueOf();if(w!=null&&w!==u)return a.from(w,g,m);const Q=function(M){if(a.isBuffer(M)){const R=0|b(M.length),W=A(R);return W.length===0||M.copy(W,0,0,R),W}return M.length!==void 0?typeof M.length!="number"||ni(M.length)?A(0):f(M):M.type==="Buffer"&&Array.isArray(M.data)?f(M.data):void 0}(u);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return a.from(u[Symbol.toPrimitive]("string"),g,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}function c(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function d(u){return c(u),A(u<0?0:0|b(u))}function f(u){const g=u.length<0?0:0|b(u.length),m=A(g);for(let w=0;w<g;w+=1)m[w]=255&u[w];return m}function p(u,g,m){if(g<0||u.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<g+(m||0))throw new RangeError('"length" is outside of buffer bounds');let w;return w=g===void 0&&m===void 0?new Uint8Array(u):m===void 0?new Uint8Array(u,g):new Uint8Array(u,g,m),Object.setPrototypeOf(w,a.prototype),w}function b(u){if(u>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|u}function E(u,g){if(a.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||_e(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);const m=u.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&m===0)return 0;let Q=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return je(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*m;case"hex":return m>>>1;case"base64":return ze(u).length;default:if(Q)return w?-1:je(u).length;g=(""+g).toLowerCase(),Q=!0}}function C(u,g,m){let w=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0)<=(g>>>=0))return"";for(u||(u="utf8");;)switch(u){case"hex":return X(this,g,m);case"utf8":case"utf-8":return F(this,g,m);case"ascii":return N(this,g,m);case"latin1":case"binary":return U(this,g,m);case"base64":return k(this,g,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,g,m);default:if(w)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),w=!0}}function v(u,g,m){const w=u[g];u[g]=u[m],u[m]=w}function B(u,g,m,w,Q){if(u.length===0)return-1;if(typeof m=="string"?(w=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),ni(m=+m)&&(m=Q?0:u.length-1),m<0&&(m=u.length+m),m>=u.length){if(Q)return-1;m=u.length-1}else if(m<0){if(!Q)return-1;m=0}if(typeof g=="string"&&(g=a.from(g,w)),a.isBuffer(g))return g.length===0?-1:y(u,g,m,w,Q);if(typeof g=="number")return g&=255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(u,g,m):Uint8Array.prototype.lastIndexOf.call(u,g,m):y(u,[g],m,w,Q);throw new TypeError("val must be string, number or Buffer")}function y(u,g,m,w,Q){let M,R=1,W=u.length,Z=g.length;if(w!==void 0&&((w=String(w).toLowerCase())==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(u.length<2||g.length<2)return-1;R=2,W/=2,Z/=2,m/=2}function he(ie,ge){return R===1?ie[ge]:ie.readUInt16BE(ge*R)}if(Q){let ie=-1;for(M=m;M<W;M++)if(he(u,M)===he(g,ie===-1?0:M-ie)){if(ie===-1&&(ie=M),M-ie+1===Z)return ie*R}else ie!==-1&&(M-=M-ie),ie=-1}else for(m+Z>W&&(m=W-Z),M=m;M>=0;M--){let ie=!0;for(let ge=0;ge<Z;ge++)if(he(u,M+ge)!==he(g,ge)){ie=!1;break}if(ie)return M}return-1}function I(u,g,m,w){m=Number(m)||0;const Q=u.length-m;w?(w=Number(w))>Q&&(w=Q):w=Q;const M=g.length;let R;for(w>M/2&&(w=M/2),R=0;R<w;++R){const W=parseInt(g.substr(2*R,2),16);if(ni(W))return R;u[m+R]=W}return R}function x(u,g,m,w){return vt(je(g,u.length-m),u,m,w)}function D(u,g,m,w){return vt(function(Q){const M=[];for(let R=0;R<Q.length;++R)M.push(255&Q.charCodeAt(R));return M}(g),u,m,w)}function L(u,g,m,w){return vt(ze(g),u,m,w)}function S(u,g,m,w){return vt(function(Q,M){let R,W,Z;const he=[];for(let ie=0;ie<Q.length&&!((M-=2)<0);++ie)R=Q.charCodeAt(ie),W=R>>8,Z=R%256,he.push(Z),he.push(W);return he}(g,u.length-m),u,m,w)}function k(u,g,m){return g===0&&m===u.length?i.fromByteArray(u):i.fromByteArray(u.slice(g,m))}function F(u,g,m){m=Math.min(u.length,m);const w=[];let Q=g;for(;Q<m;){const M=u[Q];let R=null,W=M>239?4:M>223?3:M>191?2:1;if(Q+W<=m){let Z,he,ie,ge;switch(W){case 1:M<128&&(R=M);break;case 2:Z=u[Q+1],(192&Z)==128&&(ge=(31&M)<<6|63&Z,ge>127&&(R=ge));break;case 3:Z=u[Q+1],he=u[Q+2],(192&Z)==128&&(192&he)==128&&(ge=(15&M)<<12|(63&Z)<<6|63&he,ge>2047&&(ge<55296||ge>57343)&&(R=ge));break;case 4:Z=u[Q+1],he=u[Q+2],ie=u[Q+3],(192&Z)==128&&(192&he)==128&&(192&ie)==128&&(ge=(15&M)<<18|(63&Z)<<12|(63&he)<<6|63&ie,ge>65535&&ge<1114112&&(R=ge))}}R===null?(R=65533,W=1):R>65535&&(R-=65536,w.push(R>>>10&1023|55296),R=56320|1023&R),w.push(R),Q+=W}return function(M){const R=M.length;if(R<=T)return String.fromCharCode.apply(String,M);let W="",Z=0;for(;Z<R;)W+=String.fromCharCode.apply(String,M.slice(Z,Z+=T));return W}(w)}a.TYPED_ARRAY_SUPPORT=function(){try{const u=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(u,g),u.foo()===42}catch{return!1}}(),a.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(u,g,m){return l(u,g,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(u,g,m){return function(w,Q,M){return c(w),w<=0?A(w):Q!==void 0?typeof M=="string"?A(w).fill(Q,M):A(w).fill(Q):A(w)}(u,g,m)},a.allocUnsafe=function(u){return d(u)},a.allocUnsafeSlow=function(u){return d(u)},a.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==a.prototype},a.compare=function(u,g){if(_e(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),_e(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(u)||!a.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===g)return 0;let m=u.length,w=g.length;for(let Q=0,M=Math.min(m,w);Q<M;++Q)if(u[Q]!==g[Q]){m=u[Q],w=g[Q];break}return m<w?-1:w<m?1:0},a.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(u,g){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return a.alloc(0);let m;if(g===void 0)for(g=0,m=0;m<u.length;++m)g+=u[m].length;const w=a.allocUnsafe(g);let Q=0;for(m=0;m<u.length;++m){let M=u[m];if(_e(M,Uint8Array))Q+M.length>w.length?(a.isBuffer(M)||(M=a.from(M)),M.copy(w,Q)):Uint8Array.prototype.set.call(w,M,Q);else{if(!a.isBuffer(M))throw new TypeError('"list" argument must be an Array of Buffers');M.copy(w,Q)}Q+=M.length}return w},a.byteLength=E,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const u=this.length;if(u%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<u;g+=2)v(this,g,g+1);return this},a.prototype.swap32=function(){const u=this.length;if(u%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<u;g+=4)v(this,g,g+3),v(this,g+1,g+2);return this},a.prototype.swap64=function(){const u=this.length;if(u%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<u;g+=8)v(this,g,g+7),v(this,g+1,g+6),v(this,g+2,g+5),v(this,g+3,g+4);return this},a.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?F(this,0,u):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(u){if(!a.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u||a.compare(this,u)===0},a.prototype.inspect=function(){let u="";const g=t.IS;return u=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(u+=" ... "),"<Buffer "+u+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(u,g,m,w,Q){if(_e(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(g===void 0&&(g=0),m===void 0&&(m=u?u.length:0),w===void 0&&(w=0),Q===void 0&&(Q=this.length),g<0||m>u.length||w<0||Q>this.length)throw new RangeError("out of range index");if(w>=Q&&g>=m)return 0;if(w>=Q)return-1;if(g>=m)return 1;if(this===u)return 0;let M=(Q>>>=0)-(w>>>=0),R=(m>>>=0)-(g>>>=0);const W=Math.min(M,R),Z=this.slice(w,Q),he=u.slice(g,m);for(let ie=0;ie<W;++ie)if(Z[ie]!==he[ie]){M=Z[ie],R=he[ie];break}return M<R?-1:R<M?1:0},a.prototype.includes=function(u,g,m){return this.indexOf(u,g,m)!==-1},a.prototype.indexOf=function(u,g,m){return B(this,u,g,m,!0)},a.prototype.lastIndexOf=function(u,g,m){return B(this,u,g,m,!1)},a.prototype.write=function(u,g,m,w){if(g===void 0)w="utf8",m=this.length,g=0;else if(m===void 0&&typeof g=="string")w=g,m=this.length,g=0;else{if(!isFinite(g))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");g>>>=0,isFinite(m)?(m>>>=0,w===void 0&&(w="utf8")):(w=m,m=void 0)}const Q=this.length-g;if((m===void 0||m>Q)&&(m=Q),u.length>0&&(m<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let M=!1;for(;;)switch(w){case"hex":return I(this,u,g,m);case"utf8":case"utf-8":return x(this,u,g,m);case"ascii":case"latin1":case"binary":return D(this,u,g,m);case"base64":return L(this,u,g,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,u,g,m);default:if(M)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),M=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function N(u,g,m){let w="";m=Math.min(u.length,m);for(let Q=g;Q<m;++Q)w+=String.fromCharCode(127&u[Q]);return w}function U(u,g,m){let w="";m=Math.min(u.length,m);for(let Q=g;Q<m;++Q)w+=String.fromCharCode(u[Q]);return w}function X(u,g,m){const w=u.length;(!g||g<0)&&(g=0),(!m||m<0||m>w)&&(m=w);let Q="";for(let M=g;M<m;++M)Q+=MA[u[M]];return Q}function se(u,g,m){const w=u.slice(g,m);let Q="";for(let M=0;M<w.length-1;M+=2)Q+=String.fromCharCode(w[M]+256*w[M+1]);return Q}function O(u,g,m){if(u%1!=0||u<0)throw new RangeError("offset is not uint");if(u+g>m)throw new RangeError("Trying to access beyond buffer length")}function _(u,g,m,w,Q,M){if(!a.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>Q||g<M)throw new RangeError('"value" argument is out of bounds');if(m+w>u.length)throw new RangeError("Index out of range")}function $(u,g,m,w,Q){fe(g,w,Q,u,m,7);let M=Number(g&BigInt(4294967295));u[m++]=M,M>>=8,u[m++]=M,M>>=8,u[m++]=M,M>>=8,u[m++]=M;let R=Number(g>>BigInt(32)&BigInt(4294967295));return u[m++]=R,R>>=8,u[m++]=R,R>>=8,u[m++]=R,R>>=8,u[m++]=R,m}function z(u,g,m,w,Q){fe(g,w,Q,u,m,7);let M=Number(g&BigInt(4294967295));u[m+7]=M,M>>=8,u[m+6]=M,M>>=8,u[m+5]=M,M>>=8,u[m+4]=M;let R=Number(g>>BigInt(32)&BigInt(4294967295));return u[m+3]=R,R>>=8,u[m+2]=R,R>>=8,u[m+1]=R,R>>=8,u[m]=R,m+8}function re(u,g,m,w,Q,M){if(m+w>u.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function le(u,g,m,w,Q){return g=+g,m>>>=0,Q||re(u,0,m,4),r.write(u,g,m,w,23,4),m+4}function Y(u,g,m,w,Q){return g=+g,m>>>=0,Q||re(u,0,m,8),r.write(u,g,m,w,52,8),m+8}a.prototype.slice=function(u,g){const m=this.length;(u=~~u)<0?(u+=m)<0&&(u=0):u>m&&(u=m),(g=g===void 0?m:~~g)<0?(g+=m)<0&&(g=0):g>m&&(g=m),g<u&&(g=u);const w=this.subarray(u,g);return Object.setPrototypeOf(w,a.prototype),w},a.prototype.readUintLE=a.prototype.readUIntLE=function(u,g,m){u>>>=0,g>>>=0,m||O(u,g,this.length);let w=this[u],Q=1,M=0;for(;++M<g&&(Q*=256);)w+=this[u+M]*Q;return w},a.prototype.readUintBE=a.prototype.readUIntBE=function(u,g,m){u>>>=0,g>>>=0,m||O(u,g,this.length);let w=this[u+--g],Q=1;for(;g>0&&(Q*=256);)w+=this[u+--g]*Q;return w},a.prototype.readUint8=a.prototype.readUInt8=function(u,g){return u>>>=0,g||O(u,1,this.length),this[u]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(u,g){return u>>>=0,g||O(u,2,this.length),this[u]|this[u+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(u,g){return u>>>=0,g||O(u,2,this.length),this[u]<<8|this[u+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(u,g){return u>>>=0,g||O(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+16777216*this[u+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(u,g){return u>>>=0,g||O(u,4,this.length),16777216*this[u]+(this[u+1]<<16|this[u+2]<<8|this[u+3])},a.prototype.readBigUInt64LE=nt(function(u){pe(u>>>=0,"offset");const g=this[u],m=this[u+7];g!==void 0&&m!==void 0||ae(u,this.length-8);const w=g+256*this[++u]+65536*this[++u]+this[++u]*2**24,Q=this[++u]+256*this[++u]+65536*this[++u]+m*2**24;return BigInt(w)+(BigInt(Q)<<BigInt(32))}),a.prototype.readBigUInt64BE=nt(function(u){pe(u>>>=0,"offset");const g=this[u],m=this[u+7];g!==void 0&&m!==void 0||ae(u,this.length-8);const w=g*2**24+65536*this[++u]+256*this[++u]+this[++u],Q=this[++u]*2**24+65536*this[++u]+256*this[++u]+m;return(BigInt(w)<<BigInt(32))+BigInt(Q)}),a.prototype.readIntLE=function(u,g,m){u>>>=0,g>>>=0,m||O(u,g,this.length);let w=this[u],Q=1,M=0;for(;++M<g&&(Q*=256);)w+=this[u+M]*Q;return Q*=128,w>=Q&&(w-=Math.pow(2,8*g)),w},a.prototype.readIntBE=function(u,g,m){u>>>=0,g>>>=0,m||O(u,g,this.length);let w=g,Q=1,M=this[u+--w];for(;w>0&&(Q*=256);)M+=this[u+--w]*Q;return Q*=128,M>=Q&&(M-=Math.pow(2,8*g)),M},a.prototype.readInt8=function(u,g){return u>>>=0,g||O(u,1,this.length),128&this[u]?-1*(255-this[u]+1):this[u]},a.prototype.readInt16LE=function(u,g){u>>>=0,g||O(u,2,this.length);const m=this[u]|this[u+1]<<8;return 32768&m?4294901760|m:m},a.prototype.readInt16BE=function(u,g){u>>>=0,g||O(u,2,this.length);const m=this[u+1]|this[u]<<8;return 32768&m?4294901760|m:m},a.prototype.readInt32LE=function(u,g){return u>>>=0,g||O(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},a.prototype.readInt32BE=function(u,g){return u>>>=0,g||O(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},a.prototype.readBigInt64LE=nt(function(u){pe(u>>>=0,"offset");const g=this[u],m=this[u+7];g!==void 0&&m!==void 0||ae(u,this.length-8);const w=this[u+4]+256*this[u+5]+65536*this[u+6]+(m<<24);return(BigInt(w)<<BigInt(32))+BigInt(g+256*this[++u]+65536*this[++u]+this[++u]*2**24)}),a.prototype.readBigInt64BE=nt(function(u){pe(u>>>=0,"offset");const g=this[u],m=this[u+7];g!==void 0&&m!==void 0||ae(u,this.length-8);const w=(g<<24)+65536*this[++u]+256*this[++u]+this[++u];return(BigInt(w)<<BigInt(32))+BigInt(this[++u]*2**24+65536*this[++u]+256*this[++u]+m)}),a.prototype.readFloatLE=function(u,g){return u>>>=0,g||O(u,4,this.length),r.read(this,u,!0,23,4)},a.prototype.readFloatBE=function(u,g){return u>>>=0,g||O(u,4,this.length),r.read(this,u,!1,23,4)},a.prototype.readDoubleLE=function(u,g){return u>>>=0,g||O(u,8,this.length),r.read(this,u,!0,52,8)},a.prototype.readDoubleBE=function(u,g){return u>>>=0,g||O(u,8,this.length),r.read(this,u,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(u,g,m,w){u=+u,g>>>=0,m>>>=0,w||_(this,u,g,m,Math.pow(2,8*m)-1,0);let Q=1,M=0;for(this[g]=255&u;++M<m&&(Q*=256);)this[g+M]=u/Q&255;return g+m},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(u,g,m,w){u=+u,g>>>=0,m>>>=0,w||_(this,u,g,m,Math.pow(2,8*m)-1,0);let Q=m-1,M=1;for(this[g+Q]=255&u;--Q>=0&&(M*=256);)this[g+Q]=u/M&255;return g+m},a.prototype.writeUint8=a.prototype.writeUInt8=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,1,255,0),this[g]=255&u,g+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,2,65535,0),this[g]=255&u,this[g+1]=u>>>8,g+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,2,65535,0),this[g]=u>>>8,this[g+1]=255&u,g+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,4,4294967295,0),this[g+3]=u>>>24,this[g+2]=u>>>16,this[g+1]=u>>>8,this[g]=255&u,g+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,4,4294967295,0),this[g]=u>>>24,this[g+1]=u>>>16,this[g+2]=u>>>8,this[g+3]=255&u,g+4},a.prototype.writeBigUInt64LE=nt(function(u,g=0){return $(this,u,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=nt(function(u,g=0){return z(this,u,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(u,g,m,w){if(u=+u,g>>>=0,!w){const W=Math.pow(2,8*m-1);_(this,u,g,m,W-1,-W)}let Q=0,M=1,R=0;for(this[g]=255&u;++Q<m&&(M*=256);)u<0&&R===0&&this[g+Q-1]!==0&&(R=1),this[g+Q]=(u/M|0)-R&255;return g+m},a.prototype.writeIntBE=function(u,g,m,w){if(u=+u,g>>>=0,!w){const W=Math.pow(2,8*m-1);_(this,u,g,m,W-1,-W)}let Q=m-1,M=1,R=0;for(this[g+Q]=255&u;--Q>=0&&(M*=256);)u<0&&R===0&&this[g+Q+1]!==0&&(R=1),this[g+Q]=(u/M|0)-R&255;return g+m},a.prototype.writeInt8=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,1,127,-128),u<0&&(u=255+u+1),this[g]=255&u,g+1},a.prototype.writeInt16LE=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,2,32767,-32768),this[g]=255&u,this[g+1]=u>>>8,g+2},a.prototype.writeInt16BE=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,2,32767,-32768),this[g]=u>>>8,this[g+1]=255&u,g+2},a.prototype.writeInt32LE=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,4,2147483647,-2147483648),this[g]=255&u,this[g+1]=u>>>8,this[g+2]=u>>>16,this[g+3]=u>>>24,g+4},a.prototype.writeInt32BE=function(u,g,m){return u=+u,g>>>=0,m||_(this,u,g,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[g]=u>>>24,this[g+1]=u>>>16,this[g+2]=u>>>8,this[g+3]=255&u,g+4},a.prototype.writeBigInt64LE=nt(function(u,g=0){return $(this,u,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=nt(function(u,g=0){return z(this,u,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(u,g,m){return le(this,u,g,!0,m)},a.prototype.writeFloatBE=function(u,g,m){return le(this,u,g,!1,m)},a.prototype.writeDoubleLE=function(u,g,m){return Y(this,u,g,!0,m)},a.prototype.writeDoubleBE=function(u,g,m){return Y(this,u,g,!1,m)},a.prototype.copy=function(u,g,m,w){if(!a.isBuffer(u))throw new TypeError("argument should be a Buffer");if(m||(m=0),w||w===0||(w=this.length),g>=u.length&&(g=u.length),g||(g=0),w>0&&w<m&&(w=m),w===m||u.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),u.length-g<w-m&&(w=u.length-g+m);const Q=w-m;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,m,w):Uint8Array.prototype.set.call(u,this.subarray(m,w),g),Q},a.prototype.fill=function(u,g,m,w){if(typeof u=="string"){if(typeof g=="string"?(w=g,g=0,m=this.length):typeof m=="string"&&(w=m,m=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!a.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(u.length===1){const M=u.charCodeAt(0);(w==="utf8"&&M<128||w==="latin1")&&(u=M)}}else typeof u=="number"?u&=255:typeof u=="boolean"&&(u=Number(u));if(g<0||this.length<g||this.length<m)throw new RangeError("Out of range index");if(m<=g)return this;let Q;if(g>>>=0,m=m===void 0?this.length:m>>>0,u||(u=0),typeof u=="number")for(Q=g;Q<m;++Q)this[Q]=u;else{const M=a.isBuffer(u)?u:a.from(u,w),R=M.length;if(R===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(Q=0;Q<m-g;++Q)this[Q+g]=M[Q%R]}return this};const te={};function H(u,g,m){te[u]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}}}function oe(u){let g="",m=u.length;const w=u[0]==="-"?1:0;for(;m>=w+4;m-=3)g=`_${u.slice(m-3,m)}${g}`;return`${u.slice(0,m)}${g}`}function fe(u,g,m,w,Q,M){if(u>m||u<g){const R=typeof g=="bigint"?"n":"";let W;throw W=g===0||g===BigInt(0)?`>= 0${R} and < 2${R} ** ${8*(M+1)}${R}`:`>= -(2${R} ** ${8*(M+1)-1}${R}) and < 2 ** ${8*(M+1)-1}${R}`,new te.ERR_OUT_OF_RANGE("value",W,u)}(function(R,W,Z){pe(W,"offset"),R[W]!==void 0&&R[W+Z]!==void 0||ae(W,R.length-(Z+1))})(w,Q,M)}function pe(u,g){if(typeof u!="number")throw new te.ERR_INVALID_ARG_TYPE(g,"number",u)}function ae(u,g,m){throw Math.floor(u)!==u?(pe(u,m),new te.ERR_OUT_OF_RANGE("offset","an integer",u)):g<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,u)}H("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(u,g){return`The "${u}" argument must be of type number. Received type ${typeof g}`},TypeError),H("ERR_OUT_OF_RANGE",function(u,g,m){let w=`The value of "${u}" is out of range.`,Q=m;return Number.isInteger(m)&&Math.abs(m)>2**32?Q=oe(String(m)):typeof m=="bigint"&&(Q=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(Q=oe(Q)),Q+="n"),w+=` It must be ${g}. Received ${Q}`,w},RangeError);const ke=/[^+/0-9A-Za-z-_]/g;function je(u,g){let m;g=g||1/0;const w=u.length;let Q=null;const M=[];for(let R=0;R<w;++R){if(m=u.charCodeAt(R),m>55295&&m<57344){if(!Q){if(m>56319){(g-=3)>-1&&M.push(239,191,189);continue}if(R+1===w){(g-=3)>-1&&M.push(239,191,189);continue}Q=m;continue}if(m<56320){(g-=3)>-1&&M.push(239,191,189),Q=m;continue}m=65536+(Q-55296<<10|m-56320)}else Q&&(g-=3)>-1&&M.push(239,191,189);if(Q=null,m<128){if((g-=1)<0)break;M.push(m)}else if(m<2048){if((g-=2)<0)break;M.push(m>>6|192,63&m|128)}else if(m<65536){if((g-=3)<0)break;M.push(m>>12|224,m>>6&63|128,63&m|128)}else{if(!(m<1114112))throw new Error("Invalid code point");if((g-=4)<0)break;M.push(m>>18|240,m>>12&63|128,m>>6&63|128,63&m|128)}}return M}function ze(u){return i.toByteArray(function(g){if((g=(g=g.split("=")[0]).trim().replace(ke,"")).length<2)return"";for(;g.length%4!=0;)g+="=";return g}(u))}function vt(u,g,m,w){let Q;for(Q=0;Q<w&&!(Q+m>=g.length||Q>=u.length);++Q)g[Q+m]=u[Q];return Q}function _e(u,g){return u instanceof g||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===g.name}function ni(u){return u!=u}const MA=function(){const u="0123456789abcdef",g=new Array(256);for(let m=0;m<16;++m){const w=16*m;for(let Q=0;Q<16;++Q)g[w+Q]=u[m]+u[Q]}return g}();function nt(u){return typeof BigInt>"u"?SA:u}function SA(){throw new Error("BigInt not supported")}},9089:e=>{e.exports=function(t){var n=[];return n.toString=function(){return this.map(function(i){var r="",o=i[5]!==void 0;return i[4]&&(r+="@supports (".concat(i[4],") {")),i[2]&&(r+="@media ".concat(i[2]," {")),o&&(r+="@layer".concat(i[5].length>0?" ".concat(i[5]):""," {")),r+=t(i),o&&(r+="}"),i[2]&&(r+="}"),i[4]&&(r+="}"),r}).join("")},n.i=function(i,r,o,s,A){typeof i=="string"&&(i=[[null,i,void 0]]);var a={};if(o)for(var l=0;l<this.length;l++){var c=this[l][0];c!=null&&(a[c]=!0)}for(var d=0;d<i.length;d++){var f=[].concat(i[d]);o&&a[f[0]]||(A!==void 0&&(f[5]===void 0||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=A),r&&(f[2]&&(f[1]="@media ".concat(f[2]," {").concat(f[1],"}")),f[2]=r),s&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=s):f[4]="".concat(s)),n.push(f))}},n}},6492:e=>{e.exports=function(t,n){return n||(n={}),t&&(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),n.hash&&(t+=n.hash),/["'() \t\n]|(%20)/.test(t)||n.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},963:e=>{e.exports=function(t){var n=t[1],i=t[3];if(!i)return n;if(typeof btoa=="function"){var r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(o," */");return[n].concat([s]).join(`
`)}return[n].join(`
`)}},8878:(e,t,n)=>{t.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;r.splice(1,0,o,"color: inherit");let s=0,A=0;r[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&(s++,a==="%c"&&(A=s))}),r.splice(A,0,o)},t.save=function(r){try{r?t.storage.setItem("debug",r):t.storage.removeItem("debug")}catch{}},t.load=function(){let r;try{r=t.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=FA.DEBUG),r},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(8945)(t);const{formatters:i}=e.exports;i.j=function(r){try{return JSON.stringify(r)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}},8945:(e,t,n)=>{e.exports=function(i){function r(A){let a,l,c,d=null;function f(...p){if(!f.enabled)return;const b=f,E=Number(new Date),C=E-(a||E);b.diff=C,b.prev=a,b.curr=E,a=E,p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let v=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(B,y)=>{if(B==="%%")return"%";v++;const I=r.formatters[y];if(typeof I=="function"){const x=p[v];B=I.call(b,x),p.splice(v,1),v--}return B}),r.formatArgs.call(b,p),(b.log||r.log).apply(b,p)}return f.namespace=A,f.useColors=r.useColors(),f.color=r.selectColor(A),f.extend=o,f.destroy=r.destroy,Object.defineProperty(f,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==r.namespaces&&(l=r.namespaces,c=r.enabled(A)),c),set:p=>{d=p}}),typeof r.init=="function"&&r.init(f),f}function o(A,a){const l=r(this.namespace+(a===void 0?":":a)+A);return l.log=this.log,l}function s(A,a){let l=0,c=0,d=-1,f=0;for(;l<A.length;)if(c<a.length&&(a[c]===A[l]||a[c]==="*"))a[c]==="*"?(d=c,f=l,c++):(l++,c++);else{if(d===-1)return!1;c=d+1,f++,l=f}for(;c<a.length&&a[c]==="*";)c++;return c===a.length}return r.debug=r,r.default=r,r.coerce=function(A){return A instanceof Error?A.stack||A.message:A},r.disable=function(){const A=[...r.names,...r.skips.map(a=>"-"+a)].join(",");return r.enable(""),A},r.enable=function(A){r.save(A),r.namespaces=A,r.names=[],r.skips=[];const a=(typeof A=="string"?A:"").trim().replace(" ",",").split(",").filter(Boolean);for(const l of a)l[0]==="-"?r.skips.push(l.slice(1)):r.names.push(l)},r.enabled=function(A){for(const a of r.skips)if(s(A,a))return!1;for(const a of r.names)if(s(A,a))return!0;return!1},r.humanize=n(9192),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(i).forEach(A=>{r[A]=i[A]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(A){let a=0;for(let l=0;l<A.length;l++)a=(a<<5)-a+A.charCodeAt(l),a|=0;return r.colors[Math.abs(a)%r.colors.length]},r.enable(r.load()),r}},1124:(e,t,n)=>{var i=n(6240),r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(a,l,c){var d=l[c];if(d!=null){if(r.call(a,c)&&(a[c]===void 0||a[c]===null))throw new TypeError("Cannot convert undefined or null to object ("+c+")");r.call(a,c)&&i(d)?a[c]=A(Object(a[c]),l[c]):a[c]=d}}function A(a,l){if(a===l)return a;for(var c in l=Object(l))r.call(l,c)&&s(a,l,c);if(Object.getOwnPropertySymbols)for(var d=Object.getOwnPropertySymbols(l),f=0;f<d.length;f++)o.call(l,d[f])&&s(a,l,d[f]);return a}e.exports=function(a){a=function(c){if(c==null)throw new TypeError("Sources cannot be null or undefined");return Object(c)}(a);for(var l=1;l<arguments.length;l++)A(a,arguments[l]);return a}},8480:e=>{e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},919:(e,t,n)=>{var i;i=typeof window<"u"?window:n.g!==void 0?n.g:typeof self<"u"?self:{},e.exports=i},1024:(e,t)=>{t.read=function(n,i,r,o,s){var A,a,l=8*s-o-1,c=(1<<l)-1,d=c>>1,f=-7,p=r?s-1:0,b=r?-1:1,E=n[i+p];for(p+=b,A=E&(1<<-f)-1,E>>=-f,f+=l;f>0;A=256*A+n[i+p],p+=b,f-=8);for(a=A&(1<<-f)-1,A>>=-f,f+=o;f>0;a=256*a+n[i+p],p+=b,f-=8);if(A===0)A=1-d;else{if(A===c)return a?NaN:1/0*(E?-1:1);a+=Math.pow(2,o),A-=d}return(E?-1:1)*a*Math.pow(2,A-o)},t.write=function(n,i,r,o,s,A){var a,l,c,d=8*A-s-1,f=(1<<d)-1,p=f>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=o?0:A-1,C=o?1:-1,v=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(l=isNaN(i)?1:0,a=f):(a=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-a))<1&&(a--,c*=2),(i+=a+p>=1?b/c:b*Math.pow(2,1-p))*c>=2&&(a++,c/=2),a+p>=f?(l=0,a=f):a+p>=1?(l=(i*c-1)*Math.pow(2,s),a+=p):(l=i*Math.pow(2,p-1)*Math.pow(2,s),a=0));s>=8;n[r+E]=255&l,E+=C,l/=256,s-=8);for(a=a<<s|l,d+=s;d>0;n[r+E]=255&a,E+=C,a/=256,d-=8);n[r+E-C]|=128*v}},2225:e=>{function t(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}e.exports=function(n){return n!=null&&(t(n)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&t(i.slice(0,0))}(n)||!!n._isBuffer)}},8847:e=>{e.exports=function(n){if(!n)return!1;var i=t.call(n);return i==="[object Function]"||typeof n=="function"&&i!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)};var t=Object.prototype.toString},6240:e=>{e.exports=function(t){var n=typeof t;return t!==null&&(n==="object"||n==="function")}},5651:(e,t,n)=>{var i=n(5406),r=n(4597),o=n(5734),s=["x","e","a","o","n","s","r","c","u","m","v","w","z"],A=["m","w"],a=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],l=9,c=32;function d(C){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(C)}function f(C){return new Function(["return function "+C+"() {","  return this._"+C,"}"].join(`
`))()}function p(C,v){if(!C.chars||C.chars.length===0)return null;var B=E(C.chars,v);return B>=0?C.chars[B]:null}function b(C,v,B){if(!C.kernings||C.kernings.length===0)return 0;for(var y=C.kernings,I=0;I<y.length;I++){var x=y[I];if(x.first===v&&x.second===B)return x.amount}return 0}function E(C,v,B){for(var y=B=B||0;y<C.length;y++)if(C[y].id===v)return y;return-1}e.exports=function(C){return new d(C)},d.prototype.update=function(C){if(C=r({measure:this._measure},C),this._opt=C,this._opt.tabSize=o(this._opt.tabSize,4),!C.font)throw new Error("must provide a valid bitmap font");var v=this.glyphs,B=C.text||"",y=C.font;this._setupSpaceGlyphs(y);var I=i.lines(B,C),x=C.width||0;v.length=0;var D=I.reduce(function(O,_){return Math.max(O,_.width,x)},0),L=0,S=0,k=o(C.lineHeight,y.common.lineHeight),F=y.common.base,T=k-F,N=C.letterSpacing||0,U=k*I.length-T,X=function(O){return O==="center"?1:O==="right"?2:0}(this._opt.align);S-=U,this._width=D,this._height=U,this._descender=k-F,this._baseline=F,this._xHeight=function(O){for(var _=0;_<s.length;_++){var $=s[_].charCodeAt(0),z=E(O.chars,$);if(z>=0)return O.chars[z].height}return 0}(y),this._capHeight=function(O){for(var _=0;_<a.length;_++){var $=a[_].charCodeAt(0),z=E(O.chars,$);if(z>=0)return O.chars[z].height}return 0}(y),this._lineHeight=k,this._ascender=k-T-this._xHeight;var se=this;I.forEach(function(O,_){for(var $,z=O.start,re=O.end,le=O.width,Y=z;Y<re;Y++){var te=B.charCodeAt(Y),H=se.getGlyph(y,te);if(H){$&&(L+=b(y,$.id,H.id));var oe=L;X===1?oe+=(D-le)/2:X===2&&(oe+=D-le),v.push({position:[oe,S],data:H,index:Y,line:_}),L+=H.xadvance+N,$=H}}S+=k,L=0}),this._linesTotal=I.length},d.prototype._setupSpaceGlyphs=function(C){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,C.chars&&C.chars.length!==0){var v=p(C,c)||function(y){for(var I=0;I<A.length;I++){var x=A[I].charCodeAt(0),D=E(y.chars,x);if(D>=0)return y.chars[D]}return 0}(C)||C.chars[0],B=this._opt.tabSize*v.xadvance;this._fallbackSpaceGlyph=v,this._fallbackTabGlyph=r(v,{x:0,y:0,xadvance:B,id:l,xoffset:0,yoffset:0,width:0,height:0})}},d.prototype.getGlyph=function(C,v){return p(C,v)||(v===l?this._fallbackTabGlyph:v===c?this._fallbackSpaceGlyph:null)},d.prototype.computeMetrics=function(C,v,B,y){var I,x=this._opt.letterSpacing||0,D=this._opt.font,L=0,S=0,k=0;if(!D.chars||D.chars.length===0)return{start:v,end:v,width:0};B=Math.min(C.length,B);for(var F=v;F<B;F++){var T,N=C.charCodeAt(F);if(T=this.getGlyph(D,N)){T.xoffset;var U=(L+=I?b(D,I.id,T.id):0)+T.xadvance+x,X=L+T.width;if(X>=y||U>=y)break;L=U,S=X,I=T}k++}return I&&(S+=I.xoffset),{start:v,end:v+k,width:S}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(C){Object.defineProperty(d.prototype,C,{get:f(C),configurable:!0})})},5751:(e,t,n)=>{var i=n(9922).hp,r=n(3558),o=function(){},s=n(1476),A=n(7034),a=n(7480),l=n(573),c=n(4597),d=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;e.exports=function(f,p){p=typeof p=="function"?p:o,typeof f=="string"?f={uri:f}:f||(f={}),f.binary&&(f=function(b){if(d)return c(b,{responseType:"arraybuffer"});if(self.XMLHttpRequest===void 0)throw new Error("your browser does not support XHR loading");var E=new self.XMLHttpRequest;return E.overrideMimeType("text/plain; charset=x-user-defined"),c({xhr:E},b)}(f)),r(f,function(b,E,C){if(b)return p(b);if(!/^2/.test(E.statusCode))return p(new Error("http status code: "+E.statusCode));if(!C)return p(new Error("no body result"));var v,B,y=!1;if(v=C,Object.prototype.toString.call(v)==="[object ArrayBuffer]"){var I=new Uint8Array(C);C=i.from(I,"binary")}l(C)&&(y=!0,typeof C=="string"&&(C=i.from(C,"binary"))),y||(i.isBuffer(C)&&(C=C.toString(f.encoding)),C=C.trim());try{var x=E.headers["content-type"];B=y?a(C):/json/.test(x)||C.charAt(0)==="{"?JSON.parse(C):/xml/.test(x)||C.charAt(0)==="<"?A(C):s(C)}catch(D){p(new Error("error parsing font "+D.message)),p=o}p(null,B)})}},573:(e,t,n)=>{var i=n(9922).hp,r=n(911),o=i.from([66,77,70,3]);e.exports=function(s){return typeof s=="string"?s.substring(0,3)==="BMF":s.length>4&&r(s.slice(0,4),o)}},9192:e=>{var t=1e3,n=60*t,i=60*n,r=24*i,o=7*r;function s(A,a,l,c){var d=a>=1.5*l;return Math.round(A/l)+" "+c+(d?"s":"")}e.exports=function(A,a){a=a||{};var l,c,d=typeof A;if(d==="string"&&A.length>0)return function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var b=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*b;case"weeks":case"week":case"w":return b*o;case"days":case"day":case"d":return b*r;case"hours":case"hour":case"hrs":case"hr":case"h":return b*i;case"minutes":case"minute":case"mins":case"min":case"m":return b*n;case"seconds":case"second":case"secs":case"sec":case"s":return b*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}(A);if(d==="number"&&isFinite(A))return a.long?(l=A,(c=Math.abs(l))>=r?s(l,c,r,"day"):c>=i?s(l,c,i,"hour"):c>=n?s(l,c,n,"minute"):c>=t?s(l,c,t,"second"):l+" ms"):function(f){var p=Math.abs(f);return p>=r?Math.round(f/r)+"d":p>=i?Math.round(f/i)+"h":p>=n?Math.round(f/n)+"m":p>=t?Math.round(f/t)+"s":f+"ms"}(A);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(A))}},1476:e=>{function t(i,r){if(!(i=i.replace(/\t+/g," ").trim()))return null;var o=i.indexOf(" ");if(o===-1)throw new Error("no named row at line "+r);var s=i.substring(0,o);i=(i=(i=(i=i.substring(o+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(d){return d.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var A=[],a=0;a<i.length;a++){var l=i[a];a===0?A.push({key:l[0],data:""}):a===i.length-1?A[A.length-1].data=n(l[0]):(A[A.length-1].data=n(l[0]),A.push({key:l[1],data:""}))}var c={key:s,data:{}};return A.forEach(function(d){c.data[d.key]=d.data}),c}function n(i){return i&&i.length!==0?i.indexOf('"')===0||i.indexOf("'")===0?i.substring(1,i.length-1):i.indexOf(",")!==-1?function(r){return r.split(",").map(function(o){return parseInt(o,10)})}(i):parseInt(i,10):""}e.exports=function(i){if(!i)throw new Error("no data provided");var r={pages:[],chars:[],kernings:[]},o=(i=i.toString().trim()).split(/\r\n?|\n/g);if(o.length===0)throw new Error("no data in BMFont file");for(var s=0;s<o.length;s++){var A=t(o[s],s);if(A)if(A.key==="page"){if(typeof A.data.id!="number")throw new Error("malformed file at line "+s+" -- needs page id=N");if(typeof A.data.file!="string")throw new Error("malformed file at line "+s+' -- needs page file="path"');r.pages[A.data.id]=A.data.file}else A.key==="chars"||A.key==="kernings"||(A.key==="char"?r.chars.push(A.data):A.key==="kerning"?r.kernings.push(A.data):r[A.key]=A.data)}return r}},7480:e=>{var t=[66,77,70];function n(r,o,s){if(s>o.length-1)return 0;var A=o.readUInt8(s++),a=o.readInt32LE(s);switch(s+=4,A){case 1:r.info=function(l,c){var d={};d.size=l.readInt16LE(c);var f=l.readUInt8(c+2);return d.smooth=f>>7&1,d.unicode=f>>6&1,d.italic=f>>5&1,d.bold=f>>4&1,f>>3&1&&(d.fixedHeight=1),d.charset=l.readUInt8(c+3)||"",d.stretchH=l.readUInt16LE(c+4),d.aa=l.readUInt8(c+6),d.padding=[l.readInt8(c+7),l.readInt8(c+8),l.readInt8(c+9),l.readInt8(c+10)],d.spacing=[l.readInt8(c+11),l.readInt8(c+12)],d.outline=l.readUInt8(c+13),d.face=function(p,b){return i(p,b).toString("utf8")}(l,c+14),d}(o,s);break;case 2:r.common=function(l,c){var d={};return d.lineHeight=l.readUInt16LE(c),d.base=l.readUInt16LE(c+2),d.scaleW=l.readUInt16LE(c+4),d.scaleH=l.readUInt16LE(c+6),d.pages=l.readUInt16LE(c+8),l.readUInt8(c+10),d.packed=0,d.alphaChnl=l.readUInt8(c+11),d.redChnl=l.readUInt8(c+12),d.greenChnl=l.readUInt8(c+13),d.blueChnl=l.readUInt8(c+14),d}(o,s);break;case 3:r.pages=function(l,c,d){for(var f=[],p=i(l,c),b=p.length+1,E=d/b,C=0;C<E;C++)f[C]=l.slice(c,c+p.length).toString("utf8"),c+=b;return f}(o,s,a);break;case 4:r.chars=function(l,c,d){for(var f=[],p=d/20,b=0;b<p;b++){var E={},C=20*b;E.id=l.readUInt32LE(c+0+C),E.x=l.readUInt16LE(c+4+C),E.y=l.readUInt16LE(c+6+C),E.width=l.readUInt16LE(c+8+C),E.height=l.readUInt16LE(c+10+C),E.xoffset=l.readInt16LE(c+12+C),E.yoffset=l.readInt16LE(c+14+C),E.xadvance=l.readInt16LE(c+16+C),E.page=l.readUInt8(c+18+C),E.chnl=l.readUInt8(c+19+C),f[b]=E}return f}(o,s,a);break;case 5:r.kernings=function(l,c,d){for(var f=[],p=d/10,b=0;b<p;b++){var E={},C=10*b;E.first=l.readUInt32LE(c+0+C),E.second=l.readUInt32LE(c+4+C),E.amount=l.readInt16LE(c+8+C),f[b]=E}return f}(o,s,a)}return 5+a}function i(r,o){for(var s=o;s<r.length&&r[s]!==0;s++);return r.slice(o,s)}e.exports=function(r){if(r.length<6)throw new Error("invalid buffer length for BMFont");var o=t.every(function(l,c){return r.readUInt8(c)===l});if(!o)throw new Error("BMFont missing BMF byte header");var s=3;if(r.readUInt8(s++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var A={kernings:[],chars:[]},a=0;a<5;a++)s+=n(A,r,s);return A}},7034:(e,t,n)=>{var i=n(7829),r=n(1896),o={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function s(A){var a=function(l){for(var c=[],d=0;d<l.attributes.length;d++)c.push(l.attributes[d]);return c}(A);return a.reduce(function(l,c){var d;return l[d=c.nodeName,o[d.toLowerCase()]||d]=c.nodeValue,l},{})}e.exports=function(A){A=A.toString();var a=r(A),l={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(C){var v=a.getElementsByTagName(C)[0];v&&(l[C]=i(s(v)))});var c=a.getElementsByTagName("pages")[0];if(!c)throw new Error("malformed file -- no <pages> element");for(var d=c.getElementsByTagName("page"),f=0;f<d.length;f++){var p=d[f],b=parseInt(p.getAttribute("id"),10),E=p.getAttribute("file");if(isNaN(b))throw new Error('malformed file -- page "id" attribute is NaN');if(!E)throw new Error('malformed file -- needs page "file" attribute');l.pages[parseInt(b,10)]=E}return["chars","kernings"].forEach(function(C){var v=a.getElementsByTagName(C)[0];if(v)for(var B=C.substring(0,C.length-1),y=v.getElementsByTagName(B),I=0;I<y.length;I++){var x=y[I];l[C].push(i(s(x)))}}),l}},7829:e=>{var t="chasrset";e.exports=function(n){for(var i in n=Object.assign({},n),t in n&&(n.charset=n[t],delete n[t]),n)i!=="face"&&i!=="charset"&&(n[i]=i==="padding"||i==="spacing"?n[i].split(",").map(function(r){return parseInt(r,10)}):parseInt(n[i],10));return n}},3216:e=>{var t=function(n){return n.replace(/^\s+|\s+$/g,"")};e.exports=function(n){if(!n)return{};for(var i,r={},o=t(n).split(`
`),s=0;s<o.length;s++){var A=o[s],a=A.indexOf(":"),l=t(A.slice(0,a)).toLowerCase(),c=t(A.slice(a+1));r[l]===void 0?r[l]=c:(i=r[l],Object.prototype.toString.call(i)==="[object Array]"?r[l].push(c):r[l]=[r[l],c])}return r}},9035:(e,t,n)=>{var i=n(8480),r=n(8167),o=n(2225),s=[0,2,3],A=[2,1,3];e.exports=function(a,l){a&&(r(a)||o(a))||(l=a||{},a=null);for(var c=typeof(l=typeof l=="number"?{count:l}:l||{}).type=="string"?l.type:"uint16",d=typeof l.count=="number"?l.count:1,f=l.start||0,p=l.clockwise!==!1?s:A,b=p[0],E=p[1],C=p[2],v=6*d,B=a||new(i(c))(v),y=0,I=0;y<v;y+=6,I+=4){var x=y+f;B[x+0]=I+0,B[x+1]=I+1,B[x+2]=I+2,B[x+3]=I+b,B[x+4]=I+E,B[x+5]=I+C}return B}},4433:(e,t,n)=>{var i=n(5651),r=n(9035),o=n(7106),s=n(1684);e.exports=function(a){return new A(a)};class A extends THREE.BufferGeometry{constructor(l){super(),typeof l=="string"&&(l={text:l}),this._opt=Object.assign({},l),l&&this.update(l)}update(l){if(typeof l=="string"&&(l={text:l}),!(l=Object.assign({},this._opt,l)).font)throw new TypeError("must specify a { font } in options");this.layout=i(l);var c=l.flipY!==!1,d=l.font,f=d.common.scaleW,p=d.common.scaleH,b=this.layout.glyphs.filter(function(y){var I=y.data;return I.width*I.height>0});this.visibleGlyphs=b;var E=o.positions(b),C=o.uvs(b,f,p,c),v=r([],{clockwise:!0,type:"uint16",count:b.length});if(this.setIndex(v),this.setAttribute("position",new THREE.BufferAttribute(E,2)),this.setAttribute("uv",new THREE.BufferAttribute(C,2)),!l.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(l.multipage){var B=o.pages(b);this.setAttribute("page",new THREE.BufferAttribute(B,1))}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var l=this.attributes.position.array,c=this.attributes.position.itemSize;if(!l||!c||l.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);s.computeSphere(l,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var l=this.boundingBox,c=this.attributes.position.array,d=this.attributes.position.itemSize;!c||!d||c.length<2?l.makeEmpty():s.computeBox(c,l)}}},1684:e=>{var t={min:[0,0],max:[0,0]};function n(i){var r=i.length/2;t.min[0]=i[0],t.min[1]=i[1],t.max[0]=i[0],t.max[1]=i[1];for(var o=0;o<r;o++){var s=i[2*o+0],A=i[2*o+1];t.min[0]=Math.min(s,t.min[0]),t.min[1]=Math.min(A,t.min[1]),t.max[0]=Math.max(s,t.max[0]),t.max[1]=Math.max(A,t.max[1])}}e.exports.computeBox=function(i,r){n(i),r.min.set(t.min[0],t.min[1],0),r.max.set(t.max[0],t.max[1],0)},e.exports.computeSphere=function(i,r){n(i);var o=t.min[0],s=t.min[1],A=t.max[0]-o,a=t.max[1]-s,l=Math.sqrt(A*A+a*a);r.center.set(o+A/2,s+a/2,0),r.radius=l/2}},7106:e=>{e.exports.pages=function(t){var n=new Float32Array(4*t.length*1),i=0;return t.forEach(function(r){var o=r.data.page||0;n[i++]=o,n[i++]=o,n[i++]=o,n[i++]=o}),n},e.exports.uvs=function(t,n,i,r){var o=new Float32Array(4*t.length*2),s=0;return t.forEach(function(A){var a=A.data,l=a.x+a.width,c=a.y+a.height,d=a.x/n,f=a.y/i,p=l/n,b=c/i;r&&(f=(i-a.y)/i,b=(i-c)/i),o[s++]=d,o[s++]=f,o[s++]=d,o[s++]=b,o[s++]=p,o[s++]=b,o[s++]=p,o[s++]=f}),o},e.exports.positions=function(t){var n=new Float32Array(4*t.length*2),i=0;return t.forEach(function(r){var o=r.data,s=r.position[0]+o.xoffset,A=r.position[1]+o.yoffset,a=o.width,l=o.height;n[i++]=s,n[i++]=A,n[i++]=s,n[i++]=A+l,n[i++]=s+a,n[i++]=A+l,n[i++]=s+a,n[i++]=A}),n}},5406:e=>{var t=/\n/,n=/\s/;function i(s,A,a,l){var c=s.indexOf(A,a);return c===-1||c>l?l:c}function r(s){return n.test(s)}function o(s,A,a,l){return{start:A,end:A+Math.min(l,a-A)}}e.exports=function(s,A){return e.exports.lines(s,A).map(function(a){return s.substring(a.start,a.end)}).join(`
`)},e.exports.lines=function(s,A){if((A=A||{}).width===0&&A.mode!=="nowrap")return[];s=s||"";var a=typeof A.width=="number"?A.width:Number.MAX_VALUE,l=Math.max(0,A.start||0),c=typeof A.end=="number"?A.end:s.length,d=A.mode,f=A.measure||o;return d==="pre"?function(p,b,E,C,v){for(var B=[],y=E,I=E;I<C&&I<b.length;I++){var x=b.charAt(I),D=t.test(x);if(D||I===C-1){var L=p(b,y,D?I:I+1,v);B.push(L),y=I+1}}return B}(f,s,l,c,a):function(p,b,E,C,v,B){var y=[],I=v;for(B==="nowrap"&&(I=Number.MAX_VALUE);E<C&&E<b.length;){for(var x=i(b,`
`,E,C);E<x&&r(b.charAt(E));)E++;var D=p(b,E,x,I),L=E+(D.end-D.start),S=L+1;if(L<x){for(;L>E&&!r(b.charAt(L));)L--;if(L===E)S>E+1&&S--,L=S;else for(S=L;L>E&&r(b.charAt(L-1));)L--}if(L>=E){var k=p(b,E,L,I);y.push(k)}E=S}return y}(f,s,l,c,a,d)}},3558:(e,t,n)=>{var i=n(919),r=n(8847),o=n(3216),s=n(4597);function A(c,d,f){var p=c;return r(d)?(f=d,typeof c=="string"&&(p={uri:c})):p=s(d,{uri:c}),p.callback=f,p}function a(c,d,f){return l(d=A(c,d,f))}function l(c){if(c.callback===void 0)throw new Error("callback argument missing");var d=!1,f=function(T,N,U){d||(d=!0,c.callback(T,N,U))};function p(){var T=void 0;if(T=B.response?B.response:B.responseText||function(N){try{if(N.responseType==="document")return N.responseXML;var U=N.responseXML&&N.responseXML.documentElement.nodeName==="parsererror";if(N.responseType===""&&!U)return N.responseXML}catch{}return null}(B),k)try{T=JSON.parse(T)}catch{}return T}function b(T){return clearTimeout(y),T instanceof Error||(T=new Error(""+(T||"Unknown XMLHttpRequest Error"))),T.statusCode=0,f(T,F)}function E(){if(!v){var T;clearTimeout(y),T=c.useXDR&&B.status===void 0?200:B.status===1223?204:B.status;var N=F,U=null;return T!==0?(N={body:p(),statusCode:T,method:x,headers:{},url:I,rawRequest:B},B.getAllResponseHeaders&&(N.headers=o(B.getAllResponseHeaders()))):U=new Error("Internal XMLHttpRequest Error"),f(U,N,N.body)}}var C,v,B=c.xhr||null;B||(B=c.cors||c.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var y,I=B.url=c.uri||c.url,x=B.method=c.method||"GET",D=c.body||c.data,L=B.headers=c.headers||{},S=!!c.sync,k=!1,F={body:void 0,headers:{},statusCode:0,method:x,url:I,rawRequest:B};if("json"in c&&c.json!==!1&&(k=!0,L.accept||L.Accept||(L.Accept="application/json"),x!=="GET"&&x!=="HEAD"&&(L["content-type"]||L["Content-Type"]||(L["Content-Type"]="application/json"),D=JSON.stringify(c.json===!0?D:c.json))),B.onreadystatechange=function(){B.readyState===4&&setTimeout(E,0)},B.onload=E,B.onerror=b,B.onprogress=function(){},B.onabort=function(){v=!0},B.ontimeout=b,B.open(x,I,!S,c.username,c.password),S||(B.withCredentials=!!c.withCredentials),!S&&c.timeout>0&&(y=setTimeout(function(){if(!v){v=!0,B.abort("timeout");var T=new Error("XMLHttpRequest timeout");T.code="ETIMEDOUT",b(T)}},c.timeout)),B.setRequestHeader)for(C in L)L.hasOwnProperty(C)&&B.setRequestHeader(C,L[C]);else if(c.headers&&!function(T){for(var N in T)if(T.hasOwnProperty(N))return!1;return!0}(c.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in c&&(B.responseType=c.responseType),"beforeSend"in c&&typeof c.beforeSend=="function"&&c.beforeSend(B),B.send(D||null),B}e.exports=a,e.exports.default=a,a.XMLHttpRequest=i.XMLHttpRequest||function(){},a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:i.XDomainRequest,function(c,d){for(var f=0;f<c.length;f++)d(c[f])}(["get","put","post","patch","head","delete"],function(c){a[c==="delete"?"del":c]=function(d,f,p){return(f=A(d,f,p)).method=c.toUpperCase(),l(f)}})},1896:e=>{e.exports=self.DOMParser!==void 0?function(t){return new self.DOMParser().parseFromString(t,"application/xml")}:self.ActiveXObject!==void 0&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var n=new self.ActiveXObject("Microsoft.XMLDOM");return n.async="false",n.loadXML(t),n}:function(t){var n=document.createElement("div");return n.innerHTML=t,n}},4597:e=>{e.exports=function(){for(var n={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)t.call(r,o)&&(n[o]=r[o])}return n};var t=Object.prototype.hasOwnProperty},8132:()=>{window.aframeStats=function(e){var t=null,n=e;return{update:function(){var i;t("te").set((i=n.querySelectorAll("*"),Array.prototype.slice.call(i).filter(function(r){return r.isEntity}),i.length)),window.performance.getEntriesByName&&t("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(i){t=i},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}}},3729:e=>{window.glStats=function(){var t=null,n=0,i=0,r=0,o=0,s=0,A=0,a=0;function l(c,d){return function(){d.apply(this,arguments),c.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=l(WebGLRenderingContext.prototype.drawArrays,function(){n++,arguments[0]==this.POINTS?A+=arguments[2]:s+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=l(WebGLRenderingContext.prototype.drawElements,function(){i++,o+=arguments[1]/3,s+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=l(WebGLRenderingContext.prototype.useProgram,function(){r++}),WebGLRenderingContext.prototype.bindTexture=l(WebGLRenderingContext.prototype.bindTexture,function(){a++}),{update:function(){t("allcalls").set(n+i),t("drawElements").set(i),t("drawArrays").set(n),t("bindTexture").set(a),t("useProgram").set(r),t("glfaces").set(o),t("glvertices").set(s),t("glpoints").set(A)},start:function(){n=0,i=0,r=0,o=0,s=0,A=0,a=0},end:function(){},attach:function(c){t=c},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var n=null;return{update:function(){var i;n("renderer.info.memory.geometries").set(t.info.memory.geometries),n("renderer.info.programs").set(((i=t.info.programs)==null?void 0:i.length)??NaN),n("renderer.info.memory.textures").set(t.info.memory.textures),n("renderer.info.render.calls").set(t.info.render.calls),n("renderer.info.render.triangles").set(t.info.render.triangles),n("renderer.info.render.points").set(t.info.render.points)},start:function(){},end:function(){},attach:function(i){n=i},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var t=null,n=0,i=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var r=Math.log(1024);function o(s){var A=Math.floor(Math.log(s)/r);return Math.round(100*s/Math.pow(1024,A))/100}return{update:function(){n=o(performance.memory.usedJSHeapSize),i=o(performance.memory.totalJSHeapSize),t("memory").set(n),t("total").set(i)},start:function(){n=0},end:function(){},attach:function(s){t=s},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},e.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},282:e=>{(function(){"performance"in window==0&&(window.performance={});var t=window.performance;if("now"in t==0){var n=Date.now();t.timing&&t.timing.navigationStart&&(n=t.timing.navigationStart),t.now=function(){return Date.now()-n}}t.mark||(t.mark=function(){}),t.measure||(t.measure=function(){})})(),window.rStats=function(t){function n(E,C){for(var v=Object.keys(E),B=0,y=v.length;B<y;B++)C(v[B])}var i=t||{},r=i.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],o=(i.CSSPath?i.CSSPath:"")+"rStats.css";(i.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",o]).forEach(function(E){var C,v;C=E,(v=document.createElement("link")).href=C,v.rel="stylesheet",v.type="text/css",document.getElementsByTagName("head")[0].appendChild(v)}),i.values||(i.values={});var s,A,a=10,l={};function c(E,C,v){var B=v||{},y=document.createElement("canvas"),I=y.getContext("2d"),x=0,D=0,L=B.color?B.color:"#666666",S=document.createElement("canvas"),k=S.getContext("2d");S.width=1,S.height=20,k.fillStyle="#444444",k.fillRect(0,0,1,20),k.fillStyle=L,k.fillRect(0,a,1,a),k.fillStyle="#ffffff",k.globalAlpha=.5,k.fillRect(0,a,1,1),k.globalAlpha=1;var F=document.createElement("canvas"),T=F.getContext("2d");return F.width=1,F.height=20,T.fillStyle="#444444",T.fillRect(0,0,1,20),T.fillStyle="#b70000",T.fillRect(0,a,1,a),T.globalAlpha=.5,T.fillStyle="#ffffff",T.fillRect(0,a,1,1),T.globalAlpha=1,y.width=200,y.height=a,y.style.width=y.width+"px",y.style.height=y.height+"px",y.className="rs-canvas",E.appendChild(y),I.fillStyle="#444444",I.fillRect(0,0,y.width,y.height),{draw:function(N,U){(D+=.1*(N-D))>(x*=.99)&&(x=D),I.drawImage(y,1,0,y.width-1,y.height,0,0,y.width-1,y.height),U?I.drawImage(F,y.width-1,y.height-D*y.height/x-a):I.drawImage(S,y.width-1,y.height-D*y.height/x-a)}}}function d(E,C){var v=document.createElement("canvas"),B=v.getContext("2d");return v.width=200,v.height=a*C,v.style.width=v.width+"px",v.style.height=v.height+"px",v.className="rs-canvas",E.appendChild(v),B.fillStyle="#444444",B.fillRect(0,0,v.width,v.height),{draw:function(y){B.drawImage(v,1,0,v.width-1,v.height,0,0,v.width-1,v.height);var I=0;n(y,function(x){var D=y[x]*v.height;B.fillStyle=r[x],B.fillRect(v.width-1,I,1,D),I+=D})}}}function f(E,C){var v,B=E,y=0,I=0,x=0,D=0,L=performance.now(),S=0,k=document.createElement("div"),F=document.createElement("span"),T=document.createElement("div"),N=document.createTextNode(""),U=i?i.values[B.toLowerCase()]:null,X=new c(k,B,U),se=!1;function O(z){if(U&&U.average){D+=z,S++;var re=performance.now();re-L>=(U.avgMs||1e3)&&(x=D/S,D=0,L=re,S=0)}}function _(){v=performance.now(),i.userTimingAPI&&performance.mark(B+"-start"),se=!0}function $(){y=performance.now()-v,i.userTimingAPI&&(performance.mark(B+"-end"),se&&performance.measure(B,B+"-start",B+"-end")),O(y)}return F.className="rs-counter-id",F.textContent=U&&U.caption?U.caption:B,T.className="rs-counter-value",T.appendChild(N),k.appendChild(F),k.appendChild(T),C?C.div.appendChild(k):A.appendChild(k),v=performance.now(),{set:function(z){O(y=z)},start:_,tick:function(){$(),_()},end:$,frame:function(){var z=performance.now(),re=z-v;I++,re>1e3&&(y=U&&U.interpolate===!1?I:1e3*I/re,I=0,v=z,O(y))},value:function(){return y},draw:function(){var z=U&&U.average?x:y;N.nodeValue=Math.round(100*z)/100;var re=U&&(U.below&&y<U.below||U.over&&y>U.over);X.draw(y,re),k.className=re?"rs-counter-base alarm":"rs-counter-base"}}}function p(E){var C=E.toLowerCase();if(C===void 0&&(C="default"),l[C])return l[C];var v=null;i&&i.groups&&n(i.groups,function(y){var I=i.groups[parseInt(y,10)];v||I.values.indexOf(C.toLowerCase())===-1||(v=I)});var B=new f(C,v);return l[C]=B,B}function b(){n(i.plugins,function(E){i.plugins[E].update()}),n(l,function(E){l[E].draw()}),i&&i.fractions&&n(i.fractions,function(E){var C=i.fractions[parseInt(E,10)],v=[],B=l[C.base.toLowerCase()];B&&(B=B.value(),n(i.fractions[E].steps,function(y){var I=i.fractions[E].steps[parseInt(y,10)].toLowerCase(),x=l[I];x&&v.push(x.value()/B)})),C.graph.draw(v)})}return function(){if(i.plugins){i.values||(i.values={}),i.groups||(i.groups=[]),i.fractions||(i.fractions=[]);for(var E=0;E<i.plugins.length;E++)i.plugins[E].attach(p),n(i.plugins[E].values,function(C){i.values[C]=i.plugins[E].values[C]}),i.groups=i.groups.concat(i.plugins[E].groups),i.fractions=i.fractions.concat(i.plugins[E].fractions)}else i.plugins={};(s=document.createElement("div")).className="rs-base",(A=document.createElement("div")).className="rs-container",A.style.height="auto",s.appendChild(A),document.body.appendChild(s),i&&(i.groups&&n(i.groups,function(C){var v=i.groups[parseInt(C,10)],B=document.createElement("div");B.className="rs-group",v.div=B;var y=document.createElement("h1");y.textContent=v.caption,y.addEventListener("click",(function(I){this.classList.toggle("hidden"),I.preventDefault()}).bind(B)),A.appendChild(y),A.appendChild(B)}),i.fractions&&n(i.fractions,function(C){var v=i.fractions[parseInt(C,10)],B=document.createElement("div");B.className="rs-fraction";var y=document.createElement("div");y.className="rs-legend";var I=0;n(i.fractions[C].steps,function(D){var L=document.createElement("p");L.textContent=i.fractions[C].steps[D],L.style.color=r[I],y.appendChild(L),I++}),B.appendChild(y),B.style.height=I*a+"px",v.div=B;var x=new d(B,I);v.graph=x,A.appendChild(B)}))}(),function(E){return E?p(E):{element:s,update:b}}},e.exports=window.rStats},2535:e=>{var t={base64:function(n,i){return"data:"+n+";base64,"+i},isMobile:function(){var n,i=!1;return n=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(i=!0),i},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch{return!0}},appendQueryParameter:function(n,i,r){var o=n.indexOf("?")<0?"?":"&";return n+(o+i+"=")+r},getQueryParameter:function(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(location.search);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))},isLandscapeMode:function(){return window.orientation==90||window.orientation==-90}};e.exports=t},5928:(e,t,n)=>{var i,r=n(2535);e.exports=(i=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||i.match(/iPod/i)?function(){var o=null;this.request=function(){o||(o=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){o&&(clearInterval(o),o=null)}}:function(){var o=document.createElement("video");o.addEventListener("ended",function(){o.play()}),this.request=function(){o.paused&&(o.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),o.play())},this.release=function(){o.pause(),o.src=""}}},8217:(e,t,n)=>{n.d(t,{A:()=>I});var i=n(963),r=n.n(i),o=n(9089),s=n.n(o),A=n(6492),a=n.n(A),l=new URL(n(9169),n.b),c=new URL(n(6085),n.b),d=new URL(n(3931),n.b),f=new URL(n(7889),n.b),p=new URL(n(6517),n.b),b=s()(r()),E=a()(l),C=a()(c),v=a()(d),B=a()(f),y=a()(p);b.push([e.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(${E}) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(${C}) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(${v});
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(${B}) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(${y}) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"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",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const I=b},2470:(e,t,n)=>{n.d(t,{A:()=>A});var i=n(963),r=n.n(i),o=n(9089),s=n.n(o)()(r());s.push([e.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const A=s},7180:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n(5072),r=n.n(i),o=n(7825),s=n.n(o),A=n(7659),a=n.n(A),l=n(5056),c=n.n(l),d=n(540),f=n.n(d),p=n(1113),b=n.n(p),E=n(8217),C={};C.styleTagTransform=b(),C.setAttributes=c(),C.insert=a().bind(null,"head"),C.domAPI=s(),C.insertStyleElement=f(),r()(E.A,C);const v=E.A&&E.A.locals?E.A.locals:void 0},9379:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n(5072),r=n.n(i),o=n(7825),s=n.n(o),A=n(7659),a=n.n(A),l=n(5056),c=n.n(l),d=n(540),f=n.n(d),p=n(1113),b=n.n(p),E=n(2470),C={};C.styleTagTransform=b(),C.setAttributes=c(),C.insert=a().bind(null,"head"),C.domAPI=s(),C.insertStyleElement=f(),r()(E.A,C);const v=E.A&&E.A.locals?E.A.locals:void 0},5072:e=>{var t=[];function n(o){for(var s=-1,A=0;A<t.length;A++)if(t[A].identifier===o){s=A;break}return s}function i(o,s){for(var A={},a=[],l=0;l<o.length;l++){var c=o[l],d=s.base?c[0]+s.base:c[0],f=A[d]||0,p="".concat(d," ").concat(f);A[d]=f+1;var b=n(p),E={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(b!==-1)t[b].references++,t[b].updater(E);else{var C=r(E,s);s.byIndex=l,t.splice(l,0,{identifier:p,updater:C,references:1})}a.push(p)}return a}function r(o,s){var A=s.domAPI(s);return A.update(o),function(a){if(a){if(a.css===o.css&&a.media===o.media&&a.sourceMap===o.sourceMap&&a.supports===o.supports&&a.layer===o.layer)return;A.update(o=a)}else A.remove()}}e.exports=function(o,s){var A=i(o=o||[],s=s||{});return function(a){a=a||[];for(var l=0;l<A.length;l++){var c=n(A[l]);t[c].references--}for(var d=i(a,s),f=0;f<A.length;f++){var p=n(A[f]);t[p].references===0&&(t[p].updater(),t.splice(p,1))}A=d}}},7659:e=>{var t={};e.exports=function(n,i){var r=function(o){if(t[o]===void 0){var s=document.querySelector(o);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch{s=null}t[o]=s}return t[o]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},540:e=>{e.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},5056:(e,t,n)=>{e.exports=function(i){var r=n.nc;r&&i.setAttribute("nonce",r)}},7825:e=>{e.exports=function(t){if(typeof document>"u")return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(i){(function(r,o,s){var A="";s.supports&&(A+="@supports (".concat(s.supports,") {")),s.media&&(A+="@media ".concat(s.media," {"));var a=s.layer!==void 0;a&&(A+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),A+=s.css,a&&(A+="}"),s.media&&(A+="}"),s.supports&&(A+="}");var l=s.sourceMap;l&&typeof btoa<"u"&&(A+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),o.styleTagTransform(A,r,o.options)})(n,t,i)},remove:function(){(function(i){if(i.parentNode===null)return!1;i.parentNode.removeChild(i)})(n)}}}},1113:e=>{e.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},3931:e=>{e.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},6085:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},9169:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},6517:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},7889:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"}},Ao={};function G(e){var t=Ao[e];if(t!==void 0)return t.exports;var n=Ao[e]={id:e,exports:{}};return ca[e](n,n.exports,G),n.exports}G.m=ca,G.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return G.d(t,{a:t}),t},G.d=(e,t)=>{for(var n in t)G.o(t,n)&&!G.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},G.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),G.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),G.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},G.b=document.baseURI||self.location.href,G.nc=void 0;var ha={};G.d(ha,{A:()=>sd});var $i={};G.r($i),G.d($i,{computeMikkTSpaceTangents:()=>il,computeMorphedAttributes:()=>cl,deepCloneAttribute:()=>ol,deinterleaveAttribute:()=>On,deinterleaveGeometry:()=>al,estimateBytesUsed:()=>Al,interleaveAttributes:()=>sl,mergeAttributes:()=>fr,mergeGeometries:()=>rl,mergeGroups:()=>hl,mergeVertices:()=>ll,toCreasedNormals:()=>dl,toTrianglesDrawMode:()=>pr});var er={};G.r(er),G.d(er,{checkARSupport:()=>Nr,checkHeadsetConnected:()=>Gr,checkVRSupport:()=>vr,isAppleVisionPro:()=>Ja,isBrowserEnvironment:()=>Vr,isFirefoxReality:()=>Xa,isIOS:()=>Zt,isIpad:()=>Ya,isLandscape:()=>Za,isMobile:()=>At,isMobileDeviceRequestingDesktopSite:()=>jr,isMobileVR:()=>Hr,isNodeEnvironment:()=>oc,isOculusBrowser:()=>_r,isR7:()=>qr,isTablet:()=>Ka,isWebXRAvailable:()=>Xn});var tr={};G.r(tr),G.d(tr,{clearObject:()=>Wr,createPool:()=>zr,removeUnusedKeys:()=>Kt});var nr={};G.r(nr),G.d(nr,{equals:()=>Sn,isCoordinate:()=>cc,isCoordinates:()=>eA,parse:()=>jn,regex:()=>$a,stringify:()=>Mn,toVector3:()=>hc});var ir={};G.r(ir),G.d(ir,{getComponentProperty:()=>tA,getComponentPropertyPath:()=>Zn,setComponentProperty:()=>Kr});var rr={};G.r(rr),G.d(rr,{parseUrl:()=>br,validateCubemapSrc:()=>iA,validateEnvMapSrc:()=>Yr,validateSrc:()=>_n});var or={};G.r(or),G.d(or,{createCompatibleTexture:()=>Xr,handleTextureEvents:()=>Jr,isCompatibleTexture:()=>rA,setTextureProperties:()=>Hn,updateDistortionMap:()=>He,updateEnvMap:()=>Br,updateMap:()=>kn,updateMapMaterialFromData:()=>$n});var St={};G.r(St),G.d(St,{parse:()=>Yt,stringify:()=>fc,toCamelCase:()=>oA});var sr={};G.r(sr),G.d(sr,{checkControllerPresentAndSetup:()=>De,emitIfAxesChanged:()=>Ue,findMatchingControllerWebXR:()=>Zr,isControllerPresentWebXR:()=>sA,onButtonEvent:()=>q});var ar={};G.r(ar),G.d(ar,{bind:()=>Cc,checkHeadsetConnected:()=>vc,clone:()=>eo,coordinates:()=>nr,debounce:()=>AA,debug:()=>ee,deepEqual:()=>to,device:()=>er,diff:()=>lA,entity:()=>ir,extend:()=>Le,extendDeep:()=>Me,findAllScenes:()=>hA,forceCanvasResizeSafariMobile:()=>nA,getElData:()=>xc,getUrlParameter:()=>Jt,isIOS:()=>bc,isIframed:()=>cA,isMobile:()=>Bc,material:()=>or,objectPool:()=>tr,shouldCaptureKeyEvent:()=>no,split:()=>tt,splitString:()=>wc,srcLoader:()=>rr,styleParser:()=>St,throttle:()=>yc,throttleLeadingAndTrailing:()=>aA,throttleTick:()=>Ic,trackedControls:()=>sr});var Ar={};G.r(Ar),G.d(Ar,{isSingleProperty:()=>ei,parseProperties:()=>fA,parseProperty:()=>ti,process:()=>$t,processPropertyDefinition:()=>Ir,stringifyProperties:()=>pA,stringifyProperty:()=>io});var lr={};G.r(lr),G.d(lr,{Component:()=>Xt,components:()=>ue,registerComponent:()=>P,registrationOrderWarnings:()=>CA});var cr={};G.r(cr),G.d(cr,{System:()=>Wn,registerSystem:()=>Fe,systems:()=>Ze});var da={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Sr={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},UA=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],Tn={CSS:{},springs:{}};function Xe(e,t,n){return Math.min(Math.max(e,t),n)}function Ht(e,t){return e.indexOf(t)>-1}function en(e,t){return e.apply(null,t)}var OA=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,PA=/^rgb/,GA=/^hsl/,j={arr:function(e){return Array.isArray(e)},obj:function(e){return Ht(Object.prototype.toString.call(e),"Object")},pth:function(e){return j.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||j.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return e===void 0},hex:function(e){return OA.test(e)},rgb:function(e){return PA.test(e)},hsl:function(e){return GA.test(e)},col:function(e){return j.hex(e)||j.rgb(e)||j.hsl(e)},key:function(e){return!da.hasOwnProperty(e)&&!Sr.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}},NA=/\(([^)]+)\)/;function ua(e){var t=NA.exec(e);return t?t[1].split(",").map(function(n){return parseFloat(n)}):[]}function ga(e,t){var n=ua(e),i=Xe(j.und(n[0])?1:n[0],.1,100),r=Xe(j.und(n[1])?100:n[1],.1,100),o=Xe(j.und(n[2])?10:n[2],.1,100),s=Xe(j.und(n[3])?0:n[3],.1,100),A=Math.sqrt(r/i),a=o/(2*Math.sqrt(r*i)),l=a<1?A*Math.sqrt(1-a*a):0,c=a<1?(a*A-s)/l:-s+A;function d(f){var p=t?t*f/1e3:f;return p=a<1?Math.exp(-p*a*A)*(1*Math.cos(l*p)+c*Math.sin(l*p)):(1+c*p)*Math.exp(-p*A),f===0||f===1?f:1-p}return t?d:function(){var f=Tn.springs[e];if(f)return f;for(var p=1/6,b=0,E=0;;)if(d(b+=p)===1){if(++E>=16)break}else E=0;var C=b*p*1e3;return Tn.springs[e]=C,C}}function tn(e,t){e===void 0&&(e=1),t===void 0&&(t=.5);var n=Xe(e,1,10),i=Xe(t,.1,2);return function(r){return r===0||r===1?r:-n*Math.pow(2,10*(r-1))*Math.sin((r-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}function jA(e){return e===void 0&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var lo=function(){var e=.1;function t(s,A){return 1-3*A+3*s}function n(s,A){return 3*A-6*s}function i(s){return 3*s}function r(s,A,a){return((t(A,a)*s+n(A,a))*s+i(A))*s}function o(s,A,a){return 3*t(A,a)*s*s+2*n(A,a)*s+i(A)}return function(s,A,a,l){if(0<=s&&s<=1&&0<=a&&a<=1){var c=new Float32Array(11);if(s!==A||a!==l)for(var d=0;d<11;++d)c[d]=r(d*e,s,a);return function(f){return s===A&&a===l||f===0||f===1?f:r(function(p){for(var b=0,E=1;E!==10&&c[E]<=p;++E)b+=e;--E;var C=b+(p-c[E])/(c[E+1]-c[E])*e,v=o(C,s,a);return v>=.001?function(B,y,I,x){for(var D=0;D<4;++D){var L=o(y,I,x);if(L===0)return y;y-=(r(y,I,x)-B)/L}return y}(p,C,s,a):v===0?C:function(B,y,I,x,D){var L,S,k=0;do(L=r(S=y+(I-y)/2,x,D)-B)>0?I=S:y=S;while(Math.abs(L)>1e-7&&++k<10);return S}(p,b,b+e,s,a)}(f),A,l)}}}}(),fa=function(){var e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],tn],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(s,A){return function(a){return 1-tn(s,A)(1-a)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(s,A){return function(a){return a<.5?tn(s,A)(2*a)/2:1-tn(s,A)(-2*a+2)/2}}]},n={linear:[.25,.25,.75,.75]};for(var i in t)for(var r=0,o=t[i].length;r<o;r++)n["ease"+i+e[r]]=t[i][r];return n}();function hr(e,t){if(j.fnc(e))return e;var n=e.split("(")[0],i=fa[n],r=ua(e);switch(n){case"spring":return ga(e,t);case"cubicBezier":return en(lo,r);case"steps":return en(jA,r);default:return j.fnc(i)?en(i,r):en(lo,i)}}function pa(e){try{return document.querySelectorAll(e)}catch{return}}var co=[];function Fn(e,t){for(var n=co,i=e.length,r=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)if(o in e){var s=e[o];t.call(r,s,o,e)&&n.push(s)}return(co=e).length=0,n}function Jn(e,t){t||(t=[]);for(var n=0,i=e.length;n<i;n++){var r=e[n];Array.isArray(r)?Jn(r,t):t.push(r)}return t}function ho(e){return j.arr(e)?e:(j.str(e)&&(e=pa(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Dr(e,t){return e.some(function(n){return n===t})}function kr(e){var t={};for(var n in e)t[n]=e[n];return t}function dr(e,t){var n=kr(e);for(var i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function Un(e,t){var n=kr(e);for(var i in t)n[i]=j.und(e[i])?t[i]:e[i];return n}var _A=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,HA=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,qA=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,VA=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,zA=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,WA=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function et(e){var t=WA.exec(e);if(t)return t[2]}function ur(e,t){return j.fnc(e)?e(t.target,t.id,t.total):e}function qe(e,t){return e.getAttribute(t)}function Rr(e,t,n){if(Dr([n,"deg","rad","turn"],et(t)))return t;var i=Tn.CSS[t+n];if(!j.und(i))return i;var r=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(r),r.style.position="absolute",r.style.width=100+n;var s=100/r.offsetWidth;o.removeChild(r);var A=s*parseFloat(t);return Tn.CSS[t+n]=A,A}function ma(e,t,n){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return n?Rr(e,r,n):r}}function Tr(e,t){return j.dom(e)&&!j.inp(e)&&(qe(e,t)||j.svg(e)&&e[t])?"attribute":j.dom(e)&&Dr(UA,t)?"transform":j.dom(e)&&t!=="transform"&&ma(e,t)?"css":e[t]!=null?"object":void 0}var KA=/(\w+)\(([^)]*)\)/g;function Ea(e){if(j.dom(e)){for(var t,n=e.style.transform||"",i=new Map;t=KA.exec(n);)i.set(t[1],t[2]);return i}}function Fr(e,t,n,i){switch(Tr(e,t)){case"transform":return function(r,o,s,A){var a=Ht(o,"scale")?1:0+function(c){return Ht(c,"translate")||c==="perspective"?"px":Ht(c,"rotate")||Ht(c,"skew")?"deg":void 0}(o),l=Ea(r).get(o)||a;return s&&(s.transforms.list.set(o,l),s.transforms.last=o),A?Rr(r,l,A):l}(e,t,i,n);case"css":return ma(e,t,n);case"attribute":return qe(e,t);default:return e[t]||0}}var YA=/^(\*=|\+=|-=)/;function Ur(e,t){var n=YA.exec(e);if(!n)return e;var i=et(e)||0,r=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return r+o+i;case"-":return r-o+i;case"*":return r*o+i}}var JA=/\s/g;function Ca(e,t){if(j.col(e))return function(r){return j.rgb(r)?(o=r,(s=_A.exec(o))?"rgba("+s[1]+",1)":o):j.hex(r)?function(A){var a=A.replace(HA,function(c,d,f,p){return d+d+f+f+p+p}),l=qA.exec(a);return"rgba("+parseInt(l[1],16)+","+parseInt(l[2],16)+","+parseInt(l[3],16)+",1)"}(r):j.hsl(r)?function(A){var a,l,c,d=VA.exec(A)||zA.exec(A),f=parseInt(d[1],10)/360,p=parseInt(d[2],10)/100,b=parseInt(d[3],10)/100,E=d[4]||1;function C(y,I,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?y+6*(I-y)*x:x<.5?I:x<2/3?y+(I-y)*(2/3-x)*6:y}if(p==0)a=l=c=b;else{var v=b<.5?b*(1+p):b+p-b*p,B=2*b-v;a=C(B,v,f+1/3),l=C(B,v,f),c=C(B,v,f-1/3)}return"rgba("+255*a+","+255*l+","+255*c+","+E+")"}(r):void 0;var o,s}(e);var n=et(e),i=n?e.substr(0,e.length-n.length):e;return t&&!JA.test(e)?i+t:i}function gr(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function uo(e){for(var t,n=e.points,i=0,r=0;r<n.numberOfItems;r++){var o=n.getItem(r);r>0&&(i+=gr(t,o)),t=o}return i}function go(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*qe(t,"r")}(e);case"rect":return function(t){return 2*qe(t,"width")+2*qe(t,"height")}(e);case"line":return function(t){return gr({x:qe(t,"x1"),y:qe(t,"y1")},{x:qe(t,"x2"),y:qe(t,"y2")})}(e);case"polyline":return uo(e);case"polygon":return function(t){var n=t.points;return uo(t)+gr(n.getItem(n.numberOfItems-1),n.getItem(0))}(e)}}function va(e,t){var n=t||{},i=n.el||function(l){for(var c=l.parentNode;j.svg(c)&&(c=c.parentNode,j.svg(c.parentNode)););return c}(e),r=i.getBoundingClientRect(),o=qe(i,"viewBox"),s=r.width,A=r.height,a=n.viewBox||(o?o.split(" "):[0,0,s,A]);return{el:i,viewBox:a,x:a[0]/1,y:a[1]/1,w:s/a[2],h:A/a[3]}}function XA(e,t){function n(A){A===void 0&&(A=0);var a=t+A>=1?t+A:0;return e.el.getPointAtLength(a)}var i=va(e.el,e.svg),r=n(),o=n(-1),s=n(1);switch(e.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(s.y-o.y,s.x-o.x)/Math.PI}}var ii=/-?\d*\.?\d+/g;function fo(e,t){var n=Ca(j.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(ii)?n.match(ii).map(Number):[0],strings:j.str(e)||t?n.split(ii):[]}}function ba(e){return Fn(e?Jn(j.arr(e)?e.map(ho):ho(e)):[],function(t,n,i){return i.indexOf(t)===n})}function Ba(e){var t=ba(e);return t.map(function(n,i){return{target:n,id:i,total:t.length,transforms:{list:Ea(n)}}})}var ZA=/^spring/;function $A(e,t){var n=kr(t);if(ZA.test(n.easing)&&(n.duration=ga(n.easing)),j.arr(e)){var i=e.length;i!==2||j.obj(e[0])?j.fnc(t.duration)||(n.duration=t.duration/i):e={value:e}}var r=j.arr(e)?e:[e];return r.map(function(o,s){var A=j.obj(o)&&!j.pth(o)?o:{value:o};return j.und(A.delay)&&(A.delay=s?0:t.delay),j.und(A.endDelay)&&(A.endDelay=s===r.length-1?t.endDelay:0),A}).map(function(o){return Un(o,n)})}var ya={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){if(i.list.set(t,n),t===i.last||r){var o="";i.list.forEach(function(s,A){o+=A+"("+s+") "}),e.style.transform=o}}};function Ia(e,t){for(var n=Ba(e),i=0,r=n.length;i<r;i++){var o=n[i];for(var s in t){var A=ur(t[s],o),a=o.target,l=et(A),c=Fr(a,s,l,o),d=Ur(Ca(A,l||et(c)),c),f=Tr(a,s);ya[f](a,s,d,o.transforms,!0)}}}function el(e,t){return Fn(Jn(e.map(function(n){return t.map(function(i){return function(r,o){var s=Tr(r.target,o.name);if(s){var A=function(l,c){var d;return l.tweens.map(function(f){var p=function(D,L){var S={};for(var k in D){var F=ur(D[k],L);j.arr(F)&&(F=F.map(function(T){return ur(T,L)})).length===1&&(F=F[0]),S[k]=F}return S.duration=parseFloat(S.duration),S.delay=parseFloat(S.delay),S}(f,c),b=p.value,E=j.arr(b)?b[1]:b,C=et(E),v=Fr(c.target,l.name,C,c),B=d?d.to.original:v,y=j.arr(b)?b[0]:B,I=et(y)||et(v),x=C||I;return j.und(E)&&(E=B),p.from=fo(y,x),p.to=fo(Ur(E,y),x),p.start=d?d.end:0,p.end=p.start+p.delay+p.duration+p.endDelay,p.easing=hr(p.easing,p.duration),p.isPath=j.pth(b),p.isColor=j.col(p.from.original),p.isColor&&(p.round=1),d=p,p})}(o,r),a=A[A.length-1];return{type:s,property:o.name,animatable:r,tweens:A,duration:a.end,delay:A[0].delay,endDelay:a.endDelay}}}(n,i)})})),function(n){return!j.und(n)})}function wa(e,t){var n=e.length,i=function(o){return o.timelineOffset?o.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,e.map(function(o){return i(o)+o.duration})):t.duration,r.delay=n?Math.min.apply(Math,e.map(function(o){return i(o)+o.delay})):t.delay,r.endDelay=n?r.duration-Math.max.apply(Math,e.map(function(o){return i(o)+o.duration-o.endDelay})):t.endDelay,r}var Qn,po=0,Qe=[],ri=[],tl=function(){function e(){Qn=requestAnimationFrame(t)}function t(n){var i=Qe.length;if(i){for(var r=0;r<i;){var o=Qe[r];if(o.paused){var s=Qe.indexOf(o);s>-1&&(Qe.splice(s,1),i=Qe.length)}else o.tick(n);r++}e()}else Qn=cancelAnimationFrame(Qn)}return e}();function Ee(e){e===void 0&&(e={});var t,n=0,i=0,r=0,o=0,s=null;function A(){return window.Promise&&new Promise(function(v){return s=v})}var a=A(),l=function(v){var B=dr(da,v),y=dr(Sr,v),I=function(k,F){var T=[],N=F.keyframes;for(var U in N&&(F=Un(function(X){for(var se=Fn(Jn(X.map(function(z){return Object.keys(z)})),function(z){return j.key(z)}).reduce(function(z,re){return z.indexOf(re)<0&&z.push(re),z},[]),O={},_=function(z){var re=se[z];O[re]=X.map(function(le){var Y={};for(var te in le)j.key(te)?te==re&&(Y.value=le[te]):Y[te]=le[te];return Y})},$=0;$<se.length;$++)_($);return O}(N),F)),F)j.key(U)&&T.push({name:U,tweens:$A(F[U],k)});return T}(y,v),x=Ba(v.targets),D=el(x,I),L=wa(D,y),S=po;return po++,Un(B,{id:S,children:[],animatables:x,animations:D,duration:L.duration,delay:L.delay,endDelay:L.endDelay})}(e);function c(){l.reversed=!l.reversed;for(var v=0,B=t.length;v<B;v++)t[v].reversed=l.reversed}function d(v){return l.reversed?l.duration-v:v}function f(){n=0,i=d(l.currentTime)*(1/Ee.speed)}function p(v,B){B&&B.seek(v-B.timelineOffset)}function b(v){for(var B=0,y=l.animations,I=y.length;B<I;){var x=y[B],D=x.animatable,L=x.tweens,S=L.length-1,k=L[S];S&&(k=Fn(L,function(oe){return v<oe.end})[0]||k);for(var F=Xe(v-k.start-k.delay,0,k.duration)/k.duration,T=isNaN(F)?1:k.easing(F),N=k.to.strings,U=k.round,X=[],se=k.to.numbers.length,O=void 0,_=0;_<se;_++){var $=void 0,z=k.to.numbers[_],re=k.from.numbers[_]||0;$=k.isPath?XA(k.value,T*z):re+T*(z-re),U&&(k.isColor&&_>2||($=Math.round($*U)/U)),X.push($)}var le=N.length;if(le){O=N[0];for(var Y=0;Y<le;Y++){N[Y];var te=N[Y+1],H=X[Y];isNaN(H)||(O+=te?H+te:H+" ")}}else O=X[0];ya[x.type](D.target,x.property,O,D.transforms),x.currentValue=O,B++}}function E(v){l[v]&&!l.passThrough&&l[v](l)}function C(v){var B=l.duration,y=l.delay,I=B-l.endDelay,x=d(v);l.progress=Xe(x/B*100,0,100),l.reversePlayback=x<l.currentTime,t&&function(D){if(l.reversePlayback)for(var L=o;L--;)p(D,t[L]);else for(var S=0;S<o;S++)p(D,t[S])}(x),!l.began&&l.currentTime>0&&(l.began=!0,E("begin"),E("loopBegin")),x<=y&&l.currentTime!==0&&b(0),(x>=I&&l.currentTime!==B||!B)&&b(B),x>y&&x<I?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,E("changeBegin")),E("change"),b(x)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,E("changeComplete")),l.currentTime=Xe(x,0,B),l.began&&E("update"),v>=B&&(i=0,l.remaining&&l.remaining!==!0&&l.remaining--,l.remaining?(n=r,E("loopComplete"),E("loopBegin"),l.direction==="alternate"&&c()):(l.paused=!0,l.completed||(l.completed=!0,E("loopComplete"),E("complete"),"Promise"in window&&(s(),a=A()))))}return l.reset=function(){var v=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=v==="reverse",l.remaining=l.loop,t=l.children;for(var B=o=t.length;B--;)l.children[B].reset();(l.reversed&&l.loop!==!0||v==="alternate"&&l.loop===1)&&l.remaining++,b(0)},l.set=function(v,B){return Ia(v,B),l},l.tick=function(v){r=v,n||(n=r),C((r+(i-n))*Ee.speed)},l.seek=function(v){C(d(v))},l.pause=function(){l.paused=!0,f()},l.play=function(){l.paused&&(l.paused=!1,Qe.push(l),f(),Qn||tl())},l.reverse=function(){c(),f()},l.restart=function(){l.reset(),l.play()},l.finished=a,l.reset(),l.autoplay&&l.play(),l}function mo(e,t){for(var n=t.length;n--;)Dr(e,t[n].animatable.target)&&t.splice(n,1)}document.addEventListener("visibilitychange",function(){if(document.hidden){for(var e=0,t=Qe.length;e<t;e++)activeInstance[e].pause();ri=Qe.slice(0),Qe=[]}else for(var n=0,i=ri.length;n<i;n++)ri[n].play()}),Ee.version="3.0.0",Ee.speed=1,Ee.running=Qe,Ee.remove=function(e){for(var t=ba(e),n=Qe.length;n--;){var i=Qe[n],r=i.animations,o=i.children;mo(t,r);for(var s=o.length;s--;){var A=o[s],a=A.animations;mo(t,a),a.length||A.children.length||o.splice(s,1)}r.length||o.length||i.pause()}},Ee.get=Fr,Ee.set=Ia,Ee.convertPx=Rr,Ee.path=function(e,t){var n=j.str(e)?pa(e)[0]:e,i=t||100;return function(r){return{property:r,el:n,svg:va(n),totalLength:go(n)*(i/100)}}},Ee.setDashoffset=function(e){var t=go(e);return e.setAttribute("stroke-dasharray",t),t},Ee.stagger=function(e,t){t===void 0&&(t={});var n=t.direction||"normal",i=t.easing?hr(t.easing):null,r=t.grid,o=t.axis,s=t.from||0,A=s==="first",a=s==="center",l=s==="last",c=j.arr(e),d=parseFloat(c?e[0]:e),f=c?parseFloat(e[1]):0,p=et(c?e[1]:e)||0,b=t.start||0+(c?d:0),E=[],C=0;return function(v,B,y){if(A&&(s=0),a&&(s=(y-1)/2),l&&(s=y-1),!E.length){for(var I=0;I<y;I++){if(r){var x=a?(r[0]-1)/2:s%r[0],D=a?(r[1]-1)/2:Math.floor(s/r[0]),L=x-I%r[0],S=D-Math.floor(I/r[0]),k=Math.sqrt(L*L+S*S);o==="x"&&(k=-L),o==="y"&&(k=-S),E.push(k)}else E.push(Math.abs(s-I));C=Math.max.apply(Math,E)}i&&(E=E.map(function(F){return i(F/C)*C})),n==="reverse"&&(E=E.map(function(F){return o?F<0?-1*F:-F:Math.abs(C-F)}))}return b+(c?(f-d)/C:d)*(Math.round(100*E[B])/100)+p}},Ee.timeline=function(e){e===void 0&&(e={});var t=Ee(e);return t.duration=0,t.add=function(n,i){var r=Qe.indexOf(t),o=t.children;function s(f){f.passThrough=!0}r>-1&&Qe.splice(r,1);for(var A=0;A<o.length;A++)s(o[A]);var a=Un(n,dr(Sr,e));a.targets=a.targets||e.targets;var l=t.duration;a.autoplay=!1,a.direction=t.direction,a.timelineOffset=j.und(i)?l:Ur(i,l),s(t),t.seek(a.timelineOffset);var c=Ee(a);s(c),o.push(c);var d=wa(o,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},Ee.easing=hr,Ee.penner=fa,Ee.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const Ln=Ee,h=DA,oi=new WeakMap;class xa extends h.Loader{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,i,r){const o=new h.FileLoader(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,s=>{this.parse(s,n,r)},i,r)}parse(t,n,i=()=>{}){this.decodeDracoFile(t,n,null,null,h.SRGBColorSpace,i).catch(i)}decodeDracoFile(t,n,i,r,o=h.LinearSRGBColorSpace,s=()=>{}){const A={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:o};return this.decodeGeometry(t,A).then(n).catch(s)}decodeGeometry(t,n){const i=JSON.stringify(n);if(oi.has(t)){const a=oi.get(t);if(a.key===i)return a.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const o=this.workerNextTaskID++,s=t.byteLength,A=this._getWorker(o,s).then(a=>(r=a,new Promise((l,c)=>{r._callbacks[o]={resolve:l,reject:c},r.postMessage({type:"decode",id:o,taskConfig:n,buffer:t},[t])}))).then(a=>this._createGeometry(a.geometry));return A.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),oi.set(t,{key:i,promise:A}),A}_createGeometry(t){const n=new h.BufferGeometry;t.index&&n.setIndex(new h.BufferAttribute(t.index.array,1));for(let i=0;i<t.attributes.length;i++){const r=t.attributes[i],o=r.name,s=r.array,A=r.itemSize,a=new h.BufferAttribute(s,A);o==="color"&&(this._assignVertexColorSpace(a,r.vertexColorSpace),a.normalized=s instanceof Float32Array==0),n.setAttribute(o,a)}return n}_assignVertexColorSpace(t,n){if(n!==h.SRGBColorSpace)return;const i=new h.Color;for(let r=0,o=t.count;r<o;r++)i.fromBufferAttribute(t,r),h.ColorManagement.toWorkingColorSpace(i,h.SRGBColorSpace),t.setXYZ(r,i.r,i.g,i.b)}_loadLibrary(t,n){const i=new h.FileLoader(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,o)=>{i.load(t,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];t||(this.decoderConfig.wasmBinary=i[1]);const o=nl.toString(),s=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){const s=o.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[t]=n,i._taskLoad+=n,i})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function nl(){let e,t;function n(i,r,o,s,A,a){const l=a.num_components(),c=o.num_points()*l,d=c*A.BYTES_PER_ELEMENT,f=function(E,C){switch(C){case Float32Array:return E.DT_FLOAT32;case Int8Array:return E.DT_INT8;case Int16Array:return E.DT_INT16;case Int32Array:return E.DT_INT32;case Uint8Array:return E.DT_UINT8;case Uint16Array:return E.DT_UINT16;case Uint32Array:return E.DT_UINT32}}(i,A),p=i._malloc(d);r.GetAttributeDataArrayForAllPoints(o,a,f,d,p);const b=new A(i.HEAPF32.buffer,p,c).slice();return i._free(p),{name:s,array:b,itemSize:l}}onmessage=function(i){const r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(A){e.onModuleLoaded=function(a){A({draco:a})},DracoDecoderModule(e)});break;case"decode":const o=r.buffer,s=r.taskConfig;t.then(A=>{const a=A.draco,l=new a.Decoder;try{const c=function(f,p,b,E){const C=E.attributeIDs,v=E.attributeTypes;let B,y;const I=p.GetEncodedGeometryType(b);if(I===f.TRIANGULAR_MESH)B=new f.Mesh,y=p.DecodeArrayToMesh(b,b.byteLength,B);else{if(I!==f.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");B=new f.PointCloud,y=p.DecodeArrayToPointCloud(b,b.byteLength,B)}if(!y.ok()||B.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const x={index:null,attributes:[]};for(const D in C){const L=self[v[D]];let S,k;if(E.useUniqueIDs)k=C[D],S=p.GetAttributeByUniqueId(B,k);else{if(k=p.GetAttributeId(B,f[C[D]]),k===-1)continue;S=p.GetAttribute(B,k)}const F=n(f,p,B,D,L,S);D==="color"&&(F.vertexColorSpace=E.vertexColorSpace),x.attributes.push(F)}return I===f.TRIANGULAR_MESH&&(x.index=function(D,L,S){const k=3*S.num_faces(),F=4*k,T=D._malloc(F);L.GetTrianglesUInt32Array(S,F,T);const N=new Uint32Array(D.HEAPF32.buffer,T,k).slice();return D._free(T),{array:N,itemSize:1}}(f,p,B)),f.destroy(B),x}(a,l,new Int8Array(o),s),d=c.attributes.map(f=>f.array.buffer);c.index&&d.push(c.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:c},d)}catch(c){console.error(c),self.postMessage({type:"error",id:r.id,error:c.message})}finally{a.destroy(l)}})}}}function il(e,t,n=!0){if(!t||!t.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!e.hasAttribute("position")||!e.hasAttribute("normal")||!e.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function i(s){if(s.normalized||s.isInterleavedBufferAttribute){const A=new Float32Array(s.count*s.itemSize);for(let a=0,l=0;a<s.count;a++)A[l++]=s.getX(a),A[l++]=s.getY(a),s.itemSize>2&&(A[l++]=s.getZ(a));return A}return s.array instanceof Float32Array?s.array:new Float32Array(s.array)}const r=e.index?e.toNonIndexed():e,o=t.generateTangents(i(r.attributes.position),i(r.attributes.normal),i(r.attributes.uv));if(n)for(let s=3;s<o.length;s+=4)o[s]*=-1;return r.setAttribute("tangent",new h.BufferAttribute(o,4)),e!==r&&e.copy(r),e}function rl(e,t=!1){const n=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),o={},s={},A=e[0].morphTargetsRelative,a=new h.BufferGeometry;let l=0;for(let c=0;c<e.length;++c){const d=e[c];let f=0;if(n!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const p in d.attributes){if(!i.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;o[p]===void 0&&(o[p]=[]),o[p].push(d.attributes[p]),f++}if(f!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(A!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const p in d.morphAttributes){if(!r.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;s[p]===void 0&&(s[p]=[]),s[p].push(d.morphAttributes[p])}if(t){let p;if(n)p=d.index.count;else{if(d.attributes.position===void 0)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;p=d.attributes.position.count}a.addGroup(l,p,c),l+=p}}if(n){let c=0;const d=[];for(let f=0;f<e.length;++f){const p=e[f].index;for(let b=0;b<p.count;++b)d.push(p.getX(b)+c);c+=e[f].attributes.position.count}a.setIndex(d)}for(const c in o){const d=fr(o[c]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" attribute."),null;a.setAttribute(c,d)}for(const c in s){const d=s[c][0].length;if(d===0)break;a.morphAttributes=a.morphAttributes||{},a.morphAttributes[c]=[];for(let f=0;f<d;++f){const p=[];for(let E=0;E<s[c].length;++E)p.push(s[c][E][f]);const b=fr(p);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" morphAttribute."),null;a.morphAttributes[c].push(b)}}return a}function fr(e){let t,n,i,r=-1,o=0;for(let l=0;l<e.length;++l){const c=e[l];if(t===void 0&&(t=c.array.constructor),t!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=c.itemSize),n!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=c.normalized),i!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=c.gpuType),r!==c.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;o+=c.count*n}const s=new t(o),A=new h.BufferAttribute(s,n,i);let a=0;for(let l=0;l<e.length;++l){const c=e[l];if(c.isInterleavedBufferAttribute){const d=a/n;for(let f=0,p=c.count;f<p;f++)for(let b=0;b<n;b++){const E=c.getComponent(f,b);A.setComponent(f+d,b,E)}}else s.set(c.array,a);a+=c.count*n}return r!==void 0&&(A.gpuType=r),A}function ol(e){return e.isInstancedInterleavedBufferAttribute||e.isInterleavedBufferAttribute?On(e):e.isInstancedBufferAttribute?new h.InstancedBufferAttribute().copy(e):new h.BufferAttribute().copy(e)}function sl(e){let t,n=0,i=0;for(let l=0,c=e.length;l<c;++l){const d=e[l];if(t===void 0&&(t=d.array.constructor),t!==d.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;n+=d.array.length,i+=d.itemSize}const r=new h.InterleavedBuffer(new t(n),i);let o=0;const s=[],A=["getX","getY","getZ","getW"],a=["setX","setY","setZ","setW"];for(let l=0,c=e.length;l<c;l++){const d=e[l],f=d.itemSize,p=d.count,b=new h.InterleavedBufferAttribute(r,f,o,d.normalized);s.push(b),o+=f;for(let E=0;E<p;E++)for(let C=0;C<f;C++)b[a[C]](E,d[A[C]](E))}return s}function On(e){const t=e.data.array.constructor,n=e.count,i=e.itemSize,r=e.normalized,o=new t(n*i);let s;s=e.isInstancedInterleavedBufferAttribute?new h.InstancedBufferAttribute(o,i,r,e.meshPerAttribute):new h.BufferAttribute(o,i,r);for(let A=0;A<n;A++)s.setX(A,e.getX(A)),i>=2&&s.setY(A,e.getY(A)),i>=3&&s.setZ(A,e.getZ(A)),i>=4&&s.setW(A,e.getW(A));return s}function al(e){const t=e.attributes,n=e.morphTargets,i=new Map;for(const r in t){const o=t[r];o.isInterleavedBufferAttribute&&(i.has(o)||i.set(o,On(o)),t[r]=i.get(o))}for(const r in n){const o=n[r];o.isInterleavedBufferAttribute&&(i.has(o)||i.set(o,On(o)),n[r]=i.get(o))}}function Al(e){let t=0;for(const i in e.attributes){const r=e.getAttribute(i);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const n=e.getIndex();return t+=n?n.count*n.itemSize*n.array.BYTES_PER_ELEMENT:0,t}function ll(e,t=1e-4){t=Math.max(t,Number.EPSILON);const n={},i=e.getIndex(),r=e.getAttribute("position"),o=i?i.count:r.count;let s=0;const A=Object.keys(e.attributes),a={},l={},c=[],d=["getX","getY","getZ","getW"],f=["setX","setY","setZ","setW"];for(let B=0,y=A.length;B<y;B++){const I=A[B],x=e.attributes[I];a[I]=new x.constructor(new x.array.constructor(x.count*x.itemSize),x.itemSize,x.normalized);const D=e.morphAttributes[I];D&&(l[I]||(l[I]=[]),D.forEach((L,S)=>{const k=new L.array.constructor(L.count*L.itemSize);l[I][S]=new L.constructor(k,L.itemSize,L.normalized)}))}const p=.5*t,b=Math.log10(1/t),E=Math.pow(10,b),C=p*E;for(let B=0;B<o;B++){const y=i?i.getX(B):B;let I="";for(let x=0,D=A.length;x<D;x++){const L=A[x],S=e.getAttribute(L),k=S.itemSize;for(let F=0;F<k;F++)I+=~~(S[d[F]](y)*E+C)+","}if(I in n)c.push(n[I]);else{for(let x=0,D=A.length;x<D;x++){const L=A[x],S=e.getAttribute(L),k=e.morphAttributes[L],F=S.itemSize,T=a[L],N=l[L];for(let U=0;U<F;U++){const X=d[U],se=f[U];if(T[se](s,S[X](y)),k)for(let O=0,_=k.length;O<_;O++)N[O][se](s,k[O][X](y))}}n[I]=s,c.push(s),s++}}const v=e.clone();for(const B in e.attributes){const y=a[B];if(v.setAttribute(B,new y.constructor(y.array.slice(0,s*y.itemSize),y.itemSize,y.normalized)),B in l)for(let I=0;I<l[B].length;I++){const x=l[B][I];v.morphAttributes[B][I]=new x.constructor(x.array.slice(0,s*x.itemSize),x.itemSize,x.normalized)}}return v.setIndex(c),v}function pr(e,t){if(t===h.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===h.TriangleFanDrawMode||t===h.TriangleStripDrawMode){let n=e.getIndex();if(n===null){const s=[],A=e.getAttribute("position");if(A===void 0)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let a=0;a<A.count;a++)s.push(a);e.setIndex(s),n=e.getIndex()}const i=n.count-2,r=[];if(t===h.TriangleFanDrawMode)for(let s=1;s<=i;s++)r.push(n.getX(0)),r.push(n.getX(s)),r.push(n.getX(s+1));else for(let s=0;s<i;s++)s%2==0?(r.push(n.getX(s)),r.push(n.getX(s+1)),r.push(n.getX(s+2))):(r.push(n.getX(s+2)),r.push(n.getX(s+1)),r.push(n.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}function cl(e){const t=new h.Vector3,n=new h.Vector3,i=new h.Vector3,r=new h.Vector3,o=new h.Vector3,s=new h.Vector3,A=new h.Vector3,a=new h.Vector3,l=new h.Vector3;function c(_,$,z,re,le,Y,te,H){t.fromBufferAttribute($,le),n.fromBufferAttribute($,Y),i.fromBufferAttribute($,te);const oe=_.morphTargetInfluences;if(z&&oe){A.set(0,0,0),a.set(0,0,0),l.set(0,0,0);for(let fe=0,pe=z.length;fe<pe;fe++){const ae=oe[fe],ke=z[fe];ae!==0&&(r.fromBufferAttribute(ke,le),o.fromBufferAttribute(ke,Y),s.fromBufferAttribute(ke,te),re?(A.addScaledVector(r,ae),a.addScaledVector(o,ae),l.addScaledVector(s,ae)):(A.addScaledVector(r.sub(t),ae),a.addScaledVector(o.sub(n),ae),l.addScaledVector(s.sub(i),ae)))}t.add(A),n.add(a),i.add(l)}_.isSkinnedMesh&&(_.applyBoneTransform(le,t),_.applyBoneTransform(Y,n),_.applyBoneTransform(te,i)),H[3*le+0]=t.x,H[3*le+1]=t.y,H[3*le+2]=t.z,H[3*Y+0]=n.x,H[3*Y+1]=n.y,H[3*Y+2]=n.z,H[3*te+0]=i.x,H[3*te+1]=i.y,H[3*te+2]=i.z}const d=e.geometry,f=e.material;let p,b,E;const C=d.index,v=d.attributes.position,B=d.morphAttributes.position,y=d.morphTargetsRelative,I=d.attributes.normal,x=d.morphAttributes.position,D=d.groups,L=d.drawRange;let S,k,F,T,N,U,X;const se=new Float32Array(v.count*v.itemSize),O=new Float32Array(I.count*I.itemSize);if(C!==null)if(Array.isArray(f))for(S=0,F=D.length;S<F;S++)for(N=D[S],U=Math.max(N.start,L.start),X=Math.min(N.start+N.count,L.start+L.count),k=U,T=X;k<T;k+=3)p=C.getX(k),b=C.getX(k+1),E=C.getX(k+2),c(e,v,B,y,p,b,E,se),c(e,I,x,y,p,b,E,O);else for(U=Math.max(0,L.start),X=Math.min(C.count,L.start+L.count),S=U,F=X;S<F;S+=3)p=C.getX(S),b=C.getX(S+1),E=C.getX(S+2),c(e,v,B,y,p,b,E,se),c(e,I,x,y,p,b,E,O);else if(Array.isArray(f))for(S=0,F=D.length;S<F;S++)for(N=D[S],U=Math.max(N.start,L.start),X=Math.min(N.start+N.count,L.start+L.count),k=U,T=X;k<T;k+=3)p=k,b=k+1,E=k+2,c(e,v,B,y,p,b,E,se),c(e,I,x,y,p,b,E,O);else for(U=Math.max(0,L.start),X=Math.min(v.count,L.start+L.count),S=U,F=X;S<F;S+=3)p=S,b=S+1,E=S+2,c(e,v,B,y,p,b,E,se),c(e,I,x,y,p,b,E,O);return{positionAttribute:v,normalAttribute:I,morphedPositionAttribute:new h.Float32BufferAttribute(se,3),morphedNormalAttribute:new h.Float32BufferAttribute(O,3)}}function hl(e){if(e.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),e;let t=e.groups;if(t=t.sort((s,A)=>s.materialIndex!==A.materialIndex?s.materialIndex-A.materialIndex:s.start-A.start),e.getIndex()===null){const s=e.getAttribute("position"),A=[];for(let a=0;a<s.count;a+=3)A.push(a,a+1,a+2);e.setIndex(A)}const n=e.getIndex(),i=[];for(let s=0;s<t.length;s++){const A=t[s],a=A.start,l=a+A.count;for(let c=a;c<l;c++)i.push(n.getX(c))}e.dispose(),e.setIndex(i);let r=0;for(let s=0;s<t.length;s++){const A=t[s];A.start=r,r+=A.count}let o=t[0];e.groups=[o];for(let s=1;s<t.length;s++){const A=t[s];o.materialIndex===A.materialIndex?o.count+=A.count:(o=A,e.groups.push(o))}return e}function dl(e,t=Math.PI/3){const n=Math.cos(t),i=100*(1+1e-10),r=[new h.Vector3,new h.Vector3,new h.Vector3],o=new h.Vector3,s=new h.Vector3,A=new h.Vector3,a=new h.Vector3;function l(E){return`${~~(E.x*i)},${~~(E.y*i)},${~~(E.z*i)}`}const c=e.index?e.toNonIndexed():e,d=c.attributes.position,f={};for(let E=0,C=d.count/3;E<C;E++){const v=3*E,B=r[0].fromBufferAttribute(d,v+0),y=r[1].fromBufferAttribute(d,v+1),I=r[2].fromBufferAttribute(d,v+2);o.subVectors(I,y),s.subVectors(B,y);const x=new h.Vector3().crossVectors(o,s).normalize();for(let D=0;D<3;D++){const L=l(r[D]);L in f||(f[L]=[]),f[L].push(x)}}const p=new Float32Array(3*d.count),b=new h.BufferAttribute(p,3,!1);for(let E=0,C=d.count/3;E<C;E++){const v=3*E,B=r[0].fromBufferAttribute(d,v+0),y=r[1].fromBufferAttribute(d,v+1),I=r[2].fromBufferAttribute(d,v+2);o.subVectors(I,y),s.subVectors(B,y),A.crossVectors(o,s).normalize();for(let x=0;x<3;x++){const D=f[l(r[x])];a.set(0,0,0);for(let L=0,S=D.length;L<S;L++){const k=D[L];A.dot(k)>n&&a.add(k)}a.normalize(),b.setXYZ(v+x,a.x,a.y,a.z)}}return c.setAttribute("normal",b),c}class Or extends h.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new ml(n)}),this.register(function(n){return new El(n)}),this.register(function(n){return new Ql(n)}),this.register(function(n){return new Ll(n)}),this.register(function(n){return new Ml(n)}),this.register(function(n){return new vl(n)}),this.register(function(n){return new bl(n)}),this.register(function(n){return new Bl(n)}),this.register(function(n){return new yl(n)}),this.register(function(n){return new pl(n)}),this.register(function(n){return new Il(n)}),this.register(function(n){return new Cl(n)}),this.register(function(n){return new xl(n)}),this.register(function(n){return new wl(n)}),this.register(function(n){return new gl(n)}),this.register(function(n){return new Sl(n)}),this.register(function(n){return new Dl(n)})}load(t,n,i,r){const o=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const l=h.LoaderUtils.extractUrlBase(t);s=h.LoaderUtils.resolveURL(l,this.path)}else s=h.LoaderUtils.extractUrlBase(t);this.manager.itemStart(t);const A=function(l){r?r(l):console.error(l),o.manager.itemError(t),o.manager.itemEnd(t)},a=new h.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{o.parse(l,s,function(c){n(c),o.manager.itemEnd(t)},A)}catch(c){A(c)}},i,A)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,i,r){let o;const s={},A={},a=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(a.decode(new Uint8Array(t,0,4))===Qa){try{s[K.KHR_BINARY_GLTF]=new kl(t)}catch(c){return void(r&&r(c))}o=JSON.parse(s[K.KHR_BINARY_GLTF].content)}else o=JSON.parse(a.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Hl(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),A[d.name]=d,s[d.name]=!0}if(o.extensionsUsed)for(let c=0;c<o.extensionsUsed.length;++c){const d=o.extensionsUsed[c],f=o.extensionsRequired||[];switch(d){case K.KHR_MATERIALS_UNLIT:s[d]=new fl;break;case K.KHR_DRACO_MESH_COMPRESSION:s[d]=new Rl(o,this.dracoLoader);break;case K.KHR_TEXTURE_TRANSFORM:s[d]=new Tl;break;case K.KHR_MESH_QUANTIZATION:s[d]=new Fl;break;default:f.indexOf(d)>=0&&A[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(s),l.setPlugins(A),l.parse(i,r)}parseAsync(t,n){const i=this;return new Promise(function(r,o){i.parse(t,n,r,o)})}}function ul(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const K={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class gl{constructor(t){this.parser=t,this.name=K.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const o=n[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const n=this.parser,i="light:"+t;let r=n.cache.get(i);if(r)return r;const o=n.json,s=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let A;const a=new h.Color(16777215);s.color!==void 0&&a.setRGB(s.color[0],s.color[1],s.color[2],h.LinearSRGBColorSpace);const l=s.range!==void 0?s.range:0;switch(s.type){case"directional":A=new h.DirectionalLight(a),A.target.position.set(0,0,-1),A.add(A.target);break;case"point":A=new h.PointLight(a),A.distance=l;break;case"spot":A=new h.SpotLight(a),A.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=s.spot.innerConeAngle!==void 0?s.spot.innerConeAngle:0,s.spot.outerConeAngle=s.spot.outerConeAngle!==void 0?s.spot.outerConeAngle:Math.PI/4,A.angle=s.spot.outerConeAngle,A.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,A.target.position.set(0,0,-1),A.add(A.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return A.position.set(0,0,0),Je(A,s),s.intensity!==void 0&&(A.intensity=s.intensity),A.name=n.createUniqueName(s.name||"light_"+t),r=Promise.resolve(A),n.cache.add(i,r),r}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,i=this.parser,r=i.json.nodes[t],o=(r.extensions&&r.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(s){return i._getNodeRef(n.cache,o,s)})}}class fl{constructor(){this.name=K.KHR_MATERIALS_UNLIT}getMaterialType(){return h.MeshBasicMaterial}extendParams(t,n,i){const r=[];t.color=new h.Color(1,1,1),t.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const s=o.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],h.LinearSRGBColorSpace),t.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",o.baseColorTexture,h.SRGBColorSpace))}return Promise.all(r)}}class pl{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name].emissiveStrength;return r!==void 0&&(n.emissiveIntensity=r),Promise.resolve()}}class ml{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(n.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(n,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(n,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(n,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const A=s.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new h.Vector2(A,A)}return Promise.all(o)}}class El{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return n.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class Cl{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(n.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(n,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(n.iridescenceIOR=s.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(n,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}}class vl{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new h.Color(0,0,0),n.sheenRoughness=0,n.sheen=1;const s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){const A=s.sheenColorFactor;n.sheenColor.setRGB(A[0],A[1],A[2],h.LinearSRGBColorSpace)}return s.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(n,"sheenColorMap",s.sheenColorTexture,h.SRGBColorSpace)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(n,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class bl{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(n.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(n,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class Bl{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];n.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(n,"thicknessMap",s.thicknessTexture)),n.attenuationDistance=s.attenuationDistance||1/0;const A=s.attenuationColor||[1,1,1];return n.attenuationColor=new h.Color().setRGB(A[0],A[1],A[2],h.LinearSRGBColorSpace),Promise.all(o)}}class yl{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return n.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class Il{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];n.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(n,"specularIntensityMap",s.specularTexture));const A=s.specularColorFactor||[1,1,1];return n.specularColor=new h.Color().setRGB(A[0],A[1],A[2],h.LinearSRGBColorSpace),s.specularColorTexture!==void 0&&o.push(i.assignTexture(n,"specularColorMap",s.specularColorTexture,h.SRGBColorSpace)),Promise.all(o)}}class wl{constructor(t){this.parser=t,this.name=K.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return n.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(n,"bumpMap",s.bumpTexture)),Promise.all(o)}}class xl{constructor(t){this.parser=t,this.name=K.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?h.MeshPhysicalMaterial:null}extendMaterialParams(t,n){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(n.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(n.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(n,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}}class Ql{constructor(t){this.parser=t,this.name=K.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],s=n.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,o.source,s)}}class Ll{constructor(t){this.parser=t,this.name=K.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[n])return null;const s=o.extensions[n],A=r.images[s.source];let a=i.textureLoader;if(A.uri){const l=i.options.manager.getHandler(A.uri);l!==null&&(a=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(t,s.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class Ml{constructor(t){this.parser=t,this.name=K.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[n])return null;const s=o.extensions[n],A=r.images[s.source];let a=i.textureLoader;if(A.uri){const l=i.options.manager.getHandler(A.uri);l!==null&&(a=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(t,s.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class Sl{constructor(t){this.name=K.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,i=n.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(A){const a=r.byteOffset||0,l=r.byteLength||0,c=r.count,d=r.byteStride,f=new Uint8Array(A,a,l);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(c,d,f,r.mode,r.filter).then(function(p){return p.buffer}):s.ready.then(function(){const p=new ArrayBuffer(c*d);return s.decodeGltfBuffer(new Uint8Array(p),c,d,f,r.mode,r.filter),p})})}return null}}class Dl{constructor(t){this.name=K.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,i=n.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const a of r.primitives)if(a.mode!==Te.TRIANGLES&&a.mode!==Te.TRIANGLE_STRIP&&a.mode!==Te.TRIANGLE_FAN&&a.mode!==void 0)return null;const o=i.extensions[this.name].attributes,s=[],A={};for(const a in o)s.push(this.parser.getDependency("accessor",o[a]).then(l=>(A[a]=l,A[a])));return s.length<1?null:(s.push(this.parser.createNodeMesh(t)),Promise.all(s).then(a=>{const l=a.pop(),c=l.isGroup?l.children:[l],d=a[0].count,f=[];for(const p of c){const b=new h.Matrix4,E=new h.Vector3,C=new h.Quaternion,v=new h.Vector3(1,1,1),B=new h.InstancedMesh(p.geometry,p.material,d);for(let y=0;y<d;y++)A.TRANSLATION&&E.fromBufferAttribute(A.TRANSLATION,y),A.ROTATION&&C.fromBufferAttribute(A.ROTATION,y),A.SCALE&&v.fromBufferAttribute(A.SCALE,y),B.setMatrixAt(y,b.compose(E,C,v));for(const y in A)if(y==="_COLOR_0"){const I=A[y];B.instanceColor=new h.InstancedBufferAttribute(I.array,I.itemSize,I.normalized)}else y!=="TRANSLATION"&&y!=="ROTATION"&&y!=="SCALE"&&p.geometry.setAttribute(y,A[y]);h.Object3D.prototype.copy.call(B,p),this.parser.assignFinalMaterial(B),f.push(B)}return l.isGroup?(l.clear(),l.add(...f),l):f[0]}))}}const Qa="glTF";class kl{constructor(t){this.name=K.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Qa)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,o=new DataView(t,12);let s=0;for(;s<r;){const A=o.getUint32(s,!0);s+=4;const a=o.getUint32(s,!0);if(s+=4,a===1313821514){const l=new Uint8Array(t,12+s,A);this.content=i.decode(l)}else if(a===5130562){const l=12+s;this.body=t.slice(l,l+A)}s+=A}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Rl{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=K.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const i=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,A={},a={},l={};for(const c in s){const d=mr[c]||c.toLowerCase();A[d]=s[c]}for(const c in t.attributes){const d=mr[c]||c.toLowerCase();if(s[c]!==void 0){const f=i.accessors[t.attributes[c]],p=Mt[f.componentType];l[d]=p.name,a[d]=f.normalized===!0}}return n.getDependency("bufferView",o).then(function(c){return new Promise(function(d,f){r.decodeDracoFile(c,function(p){for(const b in p.attributes){const E=p.attributes[b],C=a[b];C!==void 0&&(E.normalized=C)}d(p)},A,l,h.LinearSRGBColorSpace,f)})})}}class Tl{constructor(){this.name=K.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord!==void 0&&n.texCoord!==t.channel||n.offset!==void 0||n.rotation!==void 0||n.scale!==void 0)&&(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class Fl{constructor(){this.name=K.KHR_MESH_QUANTIZATION}}class La extends h.Interpolant{constructor(t,n,i,r){super(t,n,i,r)}copySampleValue_(t){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let s=0;s!==r;s++)n[s]=i[o+s];return n}interpolate_(t,n,i,r){const o=this.resultBuffer,s=this.sampleValues,A=this.valueSize,a=2*A,l=3*A,c=r-n,d=(i-n)/c,f=d*d,p=f*d,b=t*l,E=b-l,C=-2*p+3*f,v=p-f,B=1-C,y=v-f+d;for(let I=0;I!==A;I++){const x=s[E+I+A],D=s[E+I+a]*c,L=s[b+I+A],S=s[b+I]*c;o[I]=B*x+y*D+C*L+v*S}return o}}const Ul=new h.Quaternion;class Ol extends La{interpolate_(t,n,i,r){const o=super.interpolate_(t,n,i,r);return Ul.fromArray(o).normalize().toArray(o),o}}const Te={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Mt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Eo={9728:h.NearestFilter,9729:h.LinearFilter,9984:h.NearestMipmapNearestFilter,9985:h.LinearMipmapNearestFilter,9986:h.NearestMipmapLinearFilter,9987:h.LinearMipmapLinearFilter},Co={33071:h.ClampToEdgeWrapping,33648:h.MirroredRepeatWrapping,10497:h.RepeatWrapping},si={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mr={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},it={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Pl={CUBICSPLINE:void 0,LINEAR:h.InterpolateLinear,STEP:h.InterpolateDiscrete};function Gl(e){return e.DefaultMaterial===void 0&&(e.DefaultMaterial=new h.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:h.FrontSide})),e.DefaultMaterial}function ct(e,t,n){for(const i in n.extensions)e[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function Je(e,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Nl(e,t){if(e.updateMorphTargets(),t.weights!==void 0)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)e.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jl(e){let t;const n=e.extensions&&e.extensions[K.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+ai(n.attributes):e.indices+":"+ai(e.attributes)+":"+e.mode,e.targets!==void 0)for(let i=0,r=e.targets.length;i<r;i++)t+=":"+ai(e.targets[i]);return t}function ai(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function Er(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const _l=new h.Matrix4;class Hl{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new ul,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){const A=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(A)===!0;const a=A.match(/Version\/(\d+)/);r=i&&a?parseInt(a[1],10):-1,o=A.indexOf("Firefox")>-1,s=o?A.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new h.TextureLoader(this.options.manager):this.textureLoader=new h.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new h.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){const A={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return ct(o,A,r),Je(A,r),Promise.all(i._invokeAll(function(a){return a.afterRoot&&a.afterRoot(A)})).then(function(){for(const a of A.scenes)a.updateMatrixWorld();t(A)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=n.length;r<o;r++){const s=n[r].joints;for(let A=0,a=s.length;A<a;A++)t[s[A]].isBone=!0}for(let r=0,o=t.length;r<o;r++){const s=t[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,i){if(t.refs[n]<=1)return i;const r=i.clone(),o=(s,A)=>{const a=this.associations.get(s);a!=null&&this.associations.set(A,a);for(const[l,c]of s.children.entries())o(c,A.children[l])};return o(i,r),r.name+="_instance_"+t.uses[n]++,r}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=t(n[i]);if(r)return r}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const o=t(n[r]);o&&i.push(o)}return i}getDependency(t,n){const i=t+":"+n;let r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,n)}),!r)throw new Error("Unknown type: "+t)}this.cache.add(i,r)}return r}getDependencies(t){let n=this.cache.get(t);if(!n){const i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(o,s){return i.getDependency(t,s)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[K.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,s){i.load(h.LoaderUtils.resolveURL(n.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,o=n.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(t){const n=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){const s=si[r.type],A=Mt[r.componentType],a=r.normalized===!0,l=new A(r.count*s);return Promise.resolve(new h.BufferAttribute(l,s,a))}const o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){const A=s[0],a=si[r.type],l=Mt[r.componentType],c=l.BYTES_PER_ELEMENT,d=c*a,f=r.byteOffset||0,p=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,b=r.normalized===!0;let E,C;if(p&&p!==d){const v=Math.floor(f/p),B="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let y=n.cache.get(B);y||(E=new l(A,v*p,r.count*p/c),y=new h.InterleavedBuffer(E,p/c),n.cache.add(B,y)),C=new h.InterleavedBufferAttribute(y,a,f%p/c,b)}else E=A===null?new l(r.count*a):new l(A,f,r.count*a),C=new h.BufferAttribute(E,a,b);if(r.sparse!==void 0){const v=si.SCALAR,B=Mt[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,I=r.sparse.values.byteOffset||0,x=new B(s[1],y,r.sparse.count*v),D=new l(s[2],I,r.sparse.count*a);A!==null&&(C=new h.BufferAttribute(C.array.slice(),C.itemSize,C.normalized)),C.normalized=!1;for(let L=0,S=x.length;L<S;L++){const k=x[L];if(C.setX(k,D[L*a]),a>=2&&C.setY(k,D[L*a+1]),a>=3&&C.setZ(k,D[L*a+2]),a>=4&&C.setW(k,D[L*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}C.normalized=b}return C})}loadTexture(t){const n=this.json,i=this.options,r=n.textures[t].source,o=n.images[r];let s=this.textureLoader;if(o.uri){const A=i.manager.getHandler(o.uri);A!==null&&(s=A)}return this.loadTextureImage(t,r,s)}loadTextureImage(t,n,i){const r=this,o=this.json,s=o.textures[t],A=o.images[n],a=(A.uri||A.bufferView)+":"+s.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(n,i).then(function(c){c.flipY=!1,c.name=s.name||A.name||"",c.name===""&&typeof A.uri=="string"&&A.uri.startsWith("data:image/")===!1&&(c.name=A.uri);const d=(o.samplers||{})[s.sampler]||{};return c.magFilter=Eo[d.magFilter]||h.LinearFilter,c.minFilter=Eo[d.minFilter]||h.LinearMipmapLinearFilter,c.wrapS=Co[d.wrapS]||h.RepeatWrapping,c.wrapT=Co[d.wrapT]||h.RepeatWrapping,c.generateMipmaps=!c.isCompressedTexture&&c.minFilter!==h.NearestFilter&&c.minFilter!==h.LinearFilter,r.associations.set(c,{textures:t}),c}).catch(function(){return null});return this.textureCache[a]=l,l}loadImageSource(t,n){const i=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(c=>c.clone());const o=i.images[t],s=self.URL||self.webkitURL;let A=o.uri||"",a=!1;if(o.bufferView!==void 0)A=this.getDependency("bufferView",o.bufferView).then(function(c){a=!0;const d=new Blob([c],{type:o.mimeType});return A=s.createObjectURL(d),A});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const l=Promise.resolve(A).then(function(c){return new Promise(function(d,f){let p=d;n.isImageBitmapLoader===!0&&(p=function(b){const E=new h.Texture(b);E.needsUpdate=!0,d(E)}),n.load(h.LoaderUtils.resolveURL(c,r.path),p,void 0,f)})}).then(function(c){var d;return a===!0&&s.revokeObjectURL(A),Je(c,o),c.userData.mimeType=o.mimeType||((d=o.uri).search(/\.jpe?g($|\?)/i)>0||d.search(/^data\:image\/jpeg/)===0?"image/jpeg":d.search(/\.webp($|\?)/i)>0||d.search(/^data\:image\/webp/)===0?"image/webp":d.search(/\.ktx2($|\?)/i)>0||d.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"),c}).catch(function(c){throw console.error("THREE.GLTFLoader: Couldn't load texture",A),c});return this.sourceCache[t]=l,l}assignTexture(t,n,i,r){const o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&((s=s.clone()).channel=i.texCoord),o.extensions[K.KHR_TEXTURE_TRANSFORM]){const A=i.extensions!==void 0?i.extensions[K.KHR_TEXTURE_TRANSFORM]:void 0;if(A){const a=o.associations.get(s);s=o.extensions[K.KHR_TEXTURE_TRANSFORM].extendTexture(s,A),o.associations.set(s,a)}}return r!==void 0&&(s.colorSpace=r),t[n]=s,s})}assignFinalMaterial(t){const n=t.geometry;let i=t.material;const r=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,s=n.attributes.normal===void 0;if(t.isPoints){const A="PointsMaterial:"+i.uuid;let a=this.cache.get(A);a||(a=new h.PointsMaterial,h.Material.prototype.copy.call(a,i),a.color.copy(i.color),a.map=i.map,a.sizeAttenuation=!1,this.cache.add(A,a)),i=a}else if(t.isLine){const A="LineBasicMaterial:"+i.uuid;let a=this.cache.get(A);a||(a=new h.LineBasicMaterial,h.Material.prototype.copy.call(a,i),a.color.copy(i.color),a.map=i.map,this.cache.add(A,a)),i=a}if(r||o||s){let A="ClonedMaterial:"+i.uuid+":";r&&(A+="derivative-tangents:"),o&&(A+="vertex-colors:"),s&&(A+="flat-shading:");let a=this.cache.get(A);a||(a=i.clone(),o&&(a.vertexColors=!0),s&&(a.flatShading=!0),r&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(A,a),this.associations.set(a,this.associations.get(i))),i=a}t.material=i}getMaterialType(){return h.MeshStandardMaterial}loadMaterial(t){const n=this,i=this.json,r=this.extensions,o=i.materials[t];let s;const A={},a=[];if((o.extensions||{})[K.KHR_MATERIALS_UNLIT]){const c=r[K.KHR_MATERIALS_UNLIT];s=c.getMaterialType(),a.push(c.extendParams(A,o,n))}else{const c=o.pbrMetallicRoughness||{};if(A.color=new h.Color(1,1,1),A.opacity=1,Array.isArray(c.baseColorFactor)){const d=c.baseColorFactor;A.color.setRGB(d[0],d[1],d[2],h.LinearSRGBColorSpace),A.opacity=d[3]}c.baseColorTexture!==void 0&&a.push(n.assignTexture(A,"map",c.baseColorTexture,h.SRGBColorSpace)),A.metalness=c.metallicFactor!==void 0?c.metallicFactor:1,A.roughness=c.roughnessFactor!==void 0?c.roughnessFactor:1,c.metallicRoughnessTexture!==void 0&&(a.push(n.assignTexture(A,"metalnessMap",c.metallicRoughnessTexture)),a.push(n.assignTexture(A,"roughnessMap",c.metallicRoughnessTexture))),s=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(t)}),a.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(t,A)})))}o.doubleSided===!0&&(A.side=h.DoubleSide);const l=o.alphaMode||"OPAQUE";if(l==="BLEND"?(A.transparent=!0,A.depthWrite=!1):(A.transparent=!1,l==="MASK"&&(A.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==h.MeshBasicMaterial&&(a.push(n.assignTexture(A,"normalMap",o.normalTexture)),A.normalScale=new h.Vector2(1,1),o.normalTexture.scale!==void 0)){const c=o.normalTexture.scale;A.normalScale.set(c,c)}if(o.occlusionTexture!==void 0&&s!==h.MeshBasicMaterial&&(a.push(n.assignTexture(A,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(A.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==h.MeshBasicMaterial){const c=o.emissiveFactor;A.emissive=new h.Color().setRGB(c[0],c[1],c[2],h.LinearSRGBColorSpace)}return o.emissiveTexture!==void 0&&s!==h.MeshBasicMaterial&&a.push(n.assignTexture(A,"emissiveMap",o.emissiveTexture,h.SRGBColorSpace)),Promise.all(a).then(function(){const c=new s(A);return o.name&&(c.name=o.name),Je(c,o),n.associations.set(c,{materials:t}),o.extensions&&ct(r,c,o),c})}createUniqueName(t){const n=h.PropertyBinding.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,i=this.extensions,r=this.primitiveCache;function o(A){return i[K.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(A,n).then(function(a){return vo(a,A,n)})}const s=[];for(let A=0,a=t.length;A<a;A++){const l=t[A],c=jl(l),d=r[c];if(d)s.push(d.promise);else{let f;f=l.extensions&&l.extensions[K.KHR_DRACO_MESH_COMPRESSION]?o(l):vo(new h.BufferGeometry,l,n),r[c]={primitive:l,promise:f},s.push(f)}}return Promise.all(s)}loadMesh(t){const n=this,i=this.json,r=this.extensions,o=i.meshes[t],s=o.primitives,A=[];for(let a=0,l=s.length;a<l;a++){const c=s[a].material===void 0?Gl(this.cache):this.getDependency("material",s[a].material);A.push(c)}return A.push(n.loadGeometries(s)),Promise.all(A).then(function(a){const l=a.slice(0,a.length-1),c=a[a.length-1],d=[];for(let p=0,b=c.length;p<b;p++){const E=c[p],C=s[p];let v;const B=l[p];if(C.mode===Te.TRIANGLES||C.mode===Te.TRIANGLE_STRIP||C.mode===Te.TRIANGLE_FAN||C.mode===void 0)v=o.isSkinnedMesh===!0?new h.SkinnedMesh(E,B):new h.Mesh(E,B),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),C.mode===Te.TRIANGLE_STRIP?v.geometry=pr(v.geometry,h.TriangleStripDrawMode):C.mode===Te.TRIANGLE_FAN&&(v.geometry=pr(v.geometry,h.TriangleFanDrawMode));else if(C.mode===Te.LINES)v=new h.LineSegments(E,B);else if(C.mode===Te.LINE_STRIP)v=new h.Line(E,B);else if(C.mode===Te.LINE_LOOP)v=new h.LineLoop(E,B);else{if(C.mode!==Te.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);v=new h.Points(E,B)}Object.keys(v.geometry.morphAttributes).length>0&&Nl(v,o),v.name=n.createUniqueName(o.name||"mesh_"+t),Je(v,o),C.extensions&&ct(r,v,C),n.assignFinalMaterial(v),d.push(v)}for(let p=0,b=d.length;p<b;p++)n.associations.set(d[p],{meshes:t,primitives:p});if(d.length===1)return o.extensions&&ct(r,d[0],o),d[0];const f=new h.Group;o.extensions&&ct(r,f,o),n.associations.set(f,{meshes:t});for(let p=0,b=d.length;p<b;p++)f.add(d[p]);return f})}loadCamera(t){let n;const i=this.json.cameras[t],r=i[i.type];if(r)return i.type==="perspective"?n=new h.PerspectiveCamera(h.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new h.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Je(n,i),Promise.resolve(n);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const n=this.json.skins[t],i=[];for(let r=0,o=n.joints.length;r<o;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const o=r.pop(),s=r,A=[],a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];if(d){A.push(d);const f=new h.Matrix4;o!==null&&f.fromArray(o.array,16*l),a.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[l])}return new h.Skeleton(A,a)})}loadAnimation(t){const n=this.json,i=this,r=n.animations[t],o=r.name?r.name:"animation_"+t,s=[],A=[],a=[],l=[],c=[];for(let d=0,f=r.channels.length;d<f;d++){const p=r.channels[d],b=r.samplers[p.sampler],E=p.target,C=E.node,v=r.parameters!==void 0?r.parameters[b.input]:b.input,B=r.parameters!==void 0?r.parameters[b.output]:b.output;E.node!==void 0&&(s.push(this.getDependency("node",C)),A.push(this.getDependency("accessor",v)),a.push(this.getDependency("accessor",B)),l.push(b),c.push(E))}return Promise.all([Promise.all(s),Promise.all(A),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(d){const f=d[0],p=d[1],b=d[2],E=d[3],C=d[4],v=[];for(let B=0,y=f.length;B<y;B++){const I=f[B],x=p[B],D=b[B],L=E[B],S=C[B];if(I===void 0)continue;I.updateMatrix&&I.updateMatrix();const k=i._createAnimationTracks(I,x,D,L,S);if(k)for(let F=0;F<k.length;F++)v.push(k[F])}return new h.AnimationClip(o,void 0,v)})}createNodeMesh(t){const n=this.json,i=this,r=n.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){const s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(A){if(A.isMesh)for(let a=0,l=r.weights.length;a<l;a++)A.morphTargetInfluences[a]=r.weights[a]}),s})}loadNode(t){const n=this,i=this.json.nodes[t],r=n._loadNodeShallow(t),o=[],s=i.children||[];for(let a=0,l=s.length;a<l;a++)o.push(n.getDependency("node",s[a]));const A=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([r,Promise.all(o),A]).then(function(a){const l=a[0],c=a[1],d=a[2];d!==null&&l.traverse(function(f){f.isSkinnedMesh&&f.bind(d,_l)});for(let f=0,p=c.length;f<p;f++)l.add(c[f]);return l})}_loadNodeShallow(t){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=n.nodes[t],s=o.name?r.createUniqueName(o.name):"",A=[],a=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(t)});return a&&A.push(a),o.camera!==void 0&&A.push(r.getDependency("camera",o.camera).then(function(l){return r._getNodeRef(r.cameraCache,o.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(t)}).forEach(function(l){A.push(l)}),this.nodeCache[t]=Promise.all(A).then(function(l){let c;if(c=o.isBone===!0?new h.Bone:l.length>1?new h.Group:l.length===1?l[0]:new h.Object3D,c!==l[0])for(let d=0,f=l.length;d<f;d++)c.add(l[d]);if(o.name&&(c.userData.name=o.name,c.name=s),Je(c,o),o.extensions&&ct(i,c,o),o.matrix!==void 0){const d=new h.Matrix4;d.fromArray(o.matrix),c.applyMatrix4(d)}else o.translation!==void 0&&c.position.fromArray(o.translation),o.rotation!==void 0&&c.quaternion.fromArray(o.rotation),o.scale!==void 0&&c.scale.fromArray(o.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=t,c}),this.nodeCache[t]}loadScene(t){const n=this.extensions,i=this.json.scenes[t],r=this,o=new h.Group;i.name&&(o.name=r.createUniqueName(i.name)),Je(o,i),i.extensions&&ct(n,o,i);const s=i.nodes||[],A=[];for(let a=0,l=s.length;a<l;a++)A.push(r.getDependency("node",s[a]));return Promise.all(A).then(function(a){for(let l=0,c=a.length;l<c;l++)o.add(a[l]);return r.associations=(l=>{const c=new Map;for(const[d,f]of r.associations)(d instanceof h.Material||d instanceof h.Texture)&&c.set(d,f);return l.traverse(d=>{const f=r.associations.get(d);f!=null&&c.set(d,f)}),c})(o),o})}_createAnimationTracks(t,n,i,r,o){const s=[],A=t.name?t.name:t.uuid,a=[];let l;switch(it[o.path]===it.weights?t.traverse(function(f){f.morphTargetInfluences&&a.push(f.name?f.name:f.uuid)}):a.push(A),it[o.path]){case it.weights:l=h.NumberKeyframeTrack;break;case it.rotation:l=h.QuaternionKeyframeTrack;break;case it.position:case it.scale:l=h.VectorKeyframeTrack;break;default:l=i.itemSize===1?h.NumberKeyframeTrack:h.VectorKeyframeTrack}const c=r.interpolation!==void 0?Pl[r.interpolation]:h.InterpolateLinear,d=this._getArrayFromAccessor(i);for(let f=0,p=a.length;f<p;f++){const b=new l(a[f]+"."+it[o.path],n.array,d,c);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),s.push(b)}return s}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const i=Er(n.constructor),r=new Float32Array(n.length);for(let o=0,s=n.length;o<s;o++)r[o]=n[o]*i;n=r}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){return new(this instanceof h.QuaternionKeyframeTrack?Ol:La)(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function vo(e,t,n){const i=t.attributes,r=[];function o(s,A){return n.getDependency("accessor",s).then(function(a){e.setAttribute(A,a)})}for(const s in i){const A=mr[s]||s.toLowerCase();A in e.attributes||r.push(o(i[s],A))}if(t.indices!==void 0&&!e.index){const s=n.getDependency("accessor",t.indices).then(function(A){e.setIndex(A)});r.push(s)}return h.ColorManagement.workingColorSpace!==h.LinearSRGBColorSpace&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${h.ColorManagement.workingColorSpace}" not supported.`),Je(e,t),function(s,A,a){const l=A.attributes,c=new h.Box3;if(l.POSITION===void 0)return;{const p=a.json.accessors[l.POSITION],b=p.min,E=p.max;if(b===void 0||E===void 0)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(c.set(new h.Vector3(b[0],b[1],b[2]),new h.Vector3(E[0],E[1],E[2])),p.normalized){const C=Er(Mt[p.componentType]);c.min.multiplyScalar(C),c.max.multiplyScalar(C)}}const d=A.targets;if(d!==void 0){const p=new h.Vector3,b=new h.Vector3;for(let E=0,C=d.length;E<C;E++){const v=d[E];if(v.POSITION!==void 0){const B=a.json.accessors[v.POSITION],y=B.min,I=B.max;if(y!==void 0&&I!==void 0){if(b.setX(Math.max(Math.abs(y[0]),Math.abs(I[0]))),b.setY(Math.max(Math.abs(y[1]),Math.abs(I[1]))),b.setZ(Math.max(Math.abs(y[2]),Math.abs(I[2]))),B.normalized){const x=Er(Mt[B.componentType]);b.multiplyScalar(x)}p.max(b)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}c.expandByVector(p)}s.boundingBox=c;const f=new h.Sphere;c.getCenter(f.center),f.radius=c.min.distanceTo(c.max)/2,s.boundingSphere=f}(e,t,n),Promise.all(r).then(function(){return t.targets!==void 0?function(s,A,a){let l=!1,c=!1,d=!1;for(let E=0,C=A.length;E<C;E++){const v=A[E];if(v.POSITION!==void 0&&(l=!0),v.NORMAL!==void 0&&(c=!0),v.COLOR_0!==void 0&&(d=!0),l&&c&&d)break}if(!l&&!c&&!d)return Promise.resolve(s);const f=[],p=[],b=[];for(let E=0,C=A.length;E<C;E++){const v=A[E];if(l){const B=v.POSITION!==void 0?a.getDependency("accessor",v.POSITION):s.attributes.position;f.push(B)}if(c){const B=v.NORMAL!==void 0?a.getDependency("accessor",v.NORMAL):s.attributes.normal;p.push(B)}if(d){const B=v.COLOR_0!==void 0?a.getDependency("accessor",v.COLOR_0):s.attributes.color;b.push(B)}}return Promise.all([Promise.all(f),Promise.all(p),Promise.all(b)]).then(function(E){const C=E[0],v=E[1],B=E[2];return l&&(s.morphAttributes.position=C),c&&(s.morphAttributes.normal=v),d&&(s.morphAttributes.color=B),s.morphTargetsRelative=!0,s})}(e,t.targets,n):e})}class ql{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const n=this.workerCreator();n.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=n}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,n){const i=this.workersResolve[t];if(i&&i(n),this.queue.length){const{resolve:r,msg:o,transfer:s}=this.queue.shift();this.workersResolve[t]=r,this.workers[t].postMessage(o,s)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,n){return new Promise(i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(t,n)):this.queue.push({resolve:i,msg:t,transfer:n})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Ma=9,Sa=15,Da=16,ka=22,Ra=37,Ta=43,Fa=76,Ua=83,Oa=97,Pa=100,Ga=103,Na=109,ja=165,_a=166,Pr=1000066e3;class Vl{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Dt{constructor(t,n,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+n,i),this._littleEndian=r,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const n=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,n}_skip(t){return this._offset+=t,this}_scan(t,n){n===void 0&&(n=0);const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==n&&r<t;)r++,this._offset++;return r<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const Ie=[171,75,84,88,32,50,48,187,13,10,26,10];function bo(e){return new TextDecoder().decode(e)}var zl=G(9922).hp;let Ai,Ye,Cr;const li={env:{emscripten_notify_memory_growth:function(e){Cr=new Uint8Array(Ye.exports.memory.buffer)}}};class Wl{init(){return Ai||(Ai=typeof fetch<"u"?fetch("data:application/wasm;base64,"+Bo).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,li)).then(this._init):WebAssembly.instantiate(zl.from(Bo,"base64"),li).then(this._init),Ai)}_init(t){Ye=t.instance,li.env.emscripten_notify_memory_growth(0)}decode(t,n=0){if(!Ye)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=t.byteLength,r=Ye.exports.malloc(i);Cr.set(t,r),n=n||Number(Ye.exports.ZSTD_findDecompressedSize(r,i));const o=Ye.exports.malloc(n),s=Ye.exports.ZSTD_decompress(o,n,r,i),A=Cr.slice(o,o+s);return Ye.exports.free(r),Ye.exports.free(o),A}}const Bo="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",ci=new WeakMap;let hi,di=0;class Se extends h.Loader{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new ql,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}async detectSupportAsync(t){return this.workerConfig={astcSupported:await t.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await t.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await t.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await t.hasFeatureAsync("texture-compression-bc"),bptcSupported:await t.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await t.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(t){return t.isWebGPURenderer===!0?this.workerConfig={astcSupported:t.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:t.hasFeature("texture-compression-etc1"),etc2Supported:t.hasFeature("texture-compression-etc2"),dxtSupported:t.hasFeature("texture-compression-bc"),bptcSupported:t.hasFeature("texture-compression-bptc"),pvrtcSupported:t.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:t.extensions.has("WEBGL_compressed_texture_astc")&&t.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const t=new h.FileLoader(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const n=t.loadAsync("basis_transcoder.js"),i=new h.FileLoader(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const r=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([n,r]).then(([o,s])=>{const A=Se.BasisWorker.toString(),a=["/* constants */","let _EngineFormat = "+JSON.stringify(Se.EngineFormat),"let _EngineType = "+JSON.stringify(Se.EngineType),"let _TranscoderFormat = "+JSON.stringify(Se.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Se.BasisFormat),"/* basis_transcoder.js */",o,"/* worker */",A.substring(A.indexOf("{")+1,A.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a])),this.transcoderBinary=s,this.workerPool.setWorkerCreator(()=>{const l=new Worker(this.workerSourceURL),c=this.transcoderBinary.slice(0);return l.postMessage({type:"init",config:this.workerConfig,transcoderBinary:c},[c]),l})}),di>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),di++}return this.transcoderPending}load(t,n,i,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const o=new h.FileLoader(this.manager);o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials),o.load(t,s=>{this.parse(s,n,r)},i,r)}parse(t,n,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(ci.has(t))return ci.get(t).promise.then(n).catch(i);this._createTexture(t).then(r=>n?n(r):null).catch(i)}_createTextureFrom(t,n){const{type:i,error:r,data:{faces:o,width:s,height:A,format:a,type:l,dfdFlags:c}}=t;if(i==="error")return Promise.reject(r);let d;if(n.faceCount===6)d=new h.CompressedCubeTexture(o,a,l);else{const f=o[0].mipmaps;d=n.layerCount>1?new h.CompressedArrayTexture(f,s,A,n.layerCount,a,l):new h.CompressedTexture(f,s,A,a,l)}return d.minFilter=o[0].mipmaps.length===1?h.LinearFilter:h.LinearMipmapLinearFilter,d.magFilter=h.LinearFilter,d.generateMipmaps=!1,d.needsUpdate=!0,d.colorSpace=yo(n),d.premultiplyAlpha=!!(1&c),d}async _createTexture(t,n={}){const i=function(A){const a=new Uint8Array(A.buffer,A.byteOffset,Ie.length);if(a[0]!==Ie[0]||a[1]!==Ie[1]||a[2]!==Ie[2]||a[3]!==Ie[3]||a[4]!==Ie[4]||a[5]!==Ie[5]||a[6]!==Ie[6]||a[7]!==Ie[7]||a[8]!==Ie[8]||a[9]!==Ie[9]||a[10]!==Ie[10]||a[11]!==Ie[11])throw new Error("Missing KTX 2.0 identifier.");const l=new Vl,c=17*Uint32Array.BYTES_PER_ELEMENT,d=new Dt(A,Ie.length,c,!0);l.vkFormat=d._nextUint32(),l.typeSize=d._nextUint32(),l.pixelWidth=d._nextUint32(),l.pixelHeight=d._nextUint32(),l.pixelDepth=d._nextUint32(),l.layerCount=d._nextUint32(),l.faceCount=d._nextUint32();const f=d._nextUint32();l.supercompressionScheme=d._nextUint32();const p=d._nextUint32(),b=d._nextUint32(),E=d._nextUint32(),C=d._nextUint32(),v=d._nextUint64(),B=d._nextUint64(),y=new Dt(A,Ie.length+c,3*f*8,!0);for(let H=0;H<f;H++)l.levels.push({levelData:new Uint8Array(A.buffer,A.byteOffset+y._nextUint64(),y._nextUint64()),uncompressedByteLength:y._nextUint64()});const I=new Dt(A,p,b,!0),x={vendorId:I._skip(4)._nextUint16(),descriptorType:I._nextUint16(),versionNumber:I._nextUint16(),descriptorBlockSize:I._nextUint16(),colorModel:I._nextUint8(),colorPrimaries:I._nextUint8(),transferFunction:I._nextUint8(),flags:I._nextUint8(),texelBlockDimension:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],bytesPlane:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],samples:[]},D=(x.descriptorBlockSize/4-6)/4;for(let H=0;H<D;H++){const oe={bitOffset:I._nextUint16(),bitLength:I._nextUint8(),channelType:I._nextUint8(),samplePosition:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&oe.channelType?(oe.sampleLower=I._nextInt32(),oe.sampleUpper=I._nextInt32()):(oe.sampleLower=I._nextUint32(),oe.sampleUpper=I._nextUint32()),x.samples[H]=oe}l.dataFormatDescriptor.length=0,l.dataFormatDescriptor.push(x);const L=new Dt(A,E,C,!0);for(;L._offset<C;){const H=L._nextUint32(),oe=L._scan(H),fe=bo(oe);if(l.keyValue[fe]=L._nextUint8Array(H-oe.byteLength-1),fe.match(/^ktx/i)){const pe=bo(l.keyValue[fe]);l.keyValue[fe]=pe.substring(0,pe.lastIndexOf("\0"))}L._skip(H%4?4-H%4:0)}if(B<=0)return l;const S=new Dt(A,v,B,!0),k=S._nextUint16(),F=S._nextUint16(),T=S._nextUint32(),N=S._nextUint32(),U=S._nextUint32(),X=S._nextUint32(),se=[];for(let H=0;H<f;H++)se.push({imageFlags:S._nextUint32(),rgbSliceByteOffset:S._nextUint32(),rgbSliceByteLength:S._nextUint32(),alphaSliceByteOffset:S._nextUint32(),alphaSliceByteLength:S._nextUint32()});const O=v+S._offset,_=O+T,$=_+N,z=$+U,re=new Uint8Array(A.buffer,A.byteOffset+O,T),le=new Uint8Array(A.buffer,A.byteOffset+_,N),Y=new Uint8Array(A.buffer,A.byteOffset+$,U),te=new Uint8Array(A.buffer,A.byteOffset+z,X);return l.globalData={endpointCount:k,selectorCount:F,imageDescs:se,endpointsData:re,selectorsData:le,tablesData:Y,extendedData:te},l}(new Uint8Array(t)),r=i.vkFormat===Pr&&i.dataFormatDescriptor[0].colorModel===167;if(i.vkFormat!==0&&(!r||this.workerConfig.astcHDRSupported))return async function(A){const{vkFormat:a}=A;if(ui[a]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let l;A.supercompressionScheme===2&&(hi||(hi=new Promise(async f=>{const p=new Wl;await p.init(),f(p)})),l=await hi);const c=[];for(let f=0;f<A.levels.length;f++){const p=Math.max(1,A.pixelWidth>>f),b=Math.max(1,A.pixelHeight>>f),E=A.pixelDepth?Math.max(1,A.pixelDepth>>f):0,C=A.levels[f];let v,B;if(A.supercompressionScheme===0)v=C.levelData;else{if(A.supercompressionScheme!==2)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");v=l.decode(C.levelData,C.uncompressedByteLength)}B=gi[a]===h.FloatType?new Float32Array(v.buffer,v.byteOffset,v.byteLength/Float32Array.BYTES_PER_ELEMENT):gi[a]===h.HalfFloatType?new Uint16Array(v.buffer,v.byteOffset,v.byteLength/Uint16Array.BYTES_PER_ELEMENT):v,c.push({data:B,width:p,height:b,depth:E})}let d;if(Kl.has(ui[a]))d=A.pixelDepth===0?new h.DataTexture(c[0].data,A.pixelWidth,A.pixelHeight):new h.Data3DTexture(c[0].data,A.pixelWidth,A.pixelHeight,A.pixelDepth);else{if(A.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");d=new h.CompressedTexture(c,A.pixelWidth,A.pixelHeight),d.minFilter=c.length===1?h.LinearFilter:h.LinearMipmapLinearFilter,d.magFilter=h.LinearFilter}return d.mipmaps=c,d.type=gi[a],d.format=ui[a],d.colorSpace=yo(A),d.needsUpdate=!0,Promise.resolve(d)}(i);const o=n,s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:o},[t])).then(A=>this._createTextureFrom(A.data,i));return ci.set(t,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),di--,this}}Se.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2},Se.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25},Se.EngineFormat={RGBAFormat:h.RGBAFormat,RGBA_ASTC_4x4_Format:h.RGBA_ASTC_4x4_Format,RGB_BPTC_UNSIGNED_Format:h.RGB_BPTC_UNSIGNED_Format,RGBA_BPTC_Format:h.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:h.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:h.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:h.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:h.RGB_ETC1_Format,RGB_ETC2_Format:h.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:h.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:h.RGBA_S3TC_DXT1_Format},Se.EngineType={UnsignedByteType:h.UnsignedByteType,HalfFloatType:h.HalfFloatType,FloatType:h.FloatType},Se.BasisWorker=function(){let e,t,n;const i=_EngineFormat,r=_EngineType,o=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(d){const f=d.data;switch(f.type){case"init":e=f.config,p=f.transcoderBinary,t=new Promise(b=>{n={wasmBinary:p,onRuntimeInitialized:b},BASIS(n)}).then(()=>{n.initializeBasis(),n.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":t.then(()=>{try{const{faces:b,buffers:E,width:C,height:v,hasAlpha:B,format:y,type:I,dfdFlags:x}=function(D){const L=new n.KTX2File(new Uint8Array(D));function S(){L.close(),L.delete()}if(!L.isValid())throw S(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let k;if(L.isUASTC())k=s.UASTC;else if(L.isETC1S())k=s.ETC1S;else{if(!L.isHDR())throw new Error("THREE.KTX2Loader: Unknown Basis encoding");k=s.UASTC_HDR}const F=L.getWidth(),T=L.getHeight(),N=L.getLayers()||1,U=L.getLevels(),X=L.getFaces(),se=L.getHasAlpha(),O=L.getDFDFlags(),{transcoderFormat:_,engineFormat:$,engineType:z}=function(Y,te,H,oe){const fe=a[Y];for(let pe=0;pe<fe.length;pe++){const ae=fe[pe];if((!ae.if||e[ae.if])&&ae.basisFormat.includes(Y)&&!(oe&&ae.transcoderFormat.length<2)&&(!ae.needsPowerOfTwo||l(te)&&l(H)))return{transcoderFormat:ae.transcoderFormat[oe?1:0],engineFormat:ae.engineFormat[oe?1:0],engineType:ae.engineType[0]}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}(k,F,T,se);if(!F||!T||!U)throw S(),new Error("THREE.KTX2Loader:	Invalid texture");if(!L.startTranscoding())throw S(),new Error("THREE.KTX2Loader: .startTranscoding failed");const re=[],le=[];for(let Y=0;Y<X;Y++){const te=[];for(let H=0;H<U;H++){const oe=[];let fe,pe;for(let ke=0;ke<N;ke++){const je=L.getImageLevelInfo(H,ke,Y);Y!==0||H!==0||ke!==0||je.origWidth%4==0&&je.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),U>1?(fe=je.origWidth,pe=je.origHeight):(fe=je.width,pe=je.height);let ze=new Uint8Array(L.getImageTranscodedSizeInBytes(H,ke,0,_));const vt=L.transcodeImage(ze,H,ke,Y,_,0,-1,-1);if(z===r.HalfFloatType&&(ze=new Uint16Array(ze.buffer,ze.byteOffset,ze.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!vt)throw S(),new Error("THREE.KTX2Loader: .transcodeImage failed.");oe.push(ze)}const ae=c(oe);te.push({data:ae,width:fe,height:pe}),le.push(ae.buffer)}re.push({mipmaps:te,width:F,height:T,format:$,type:z})}return S(),{faces:re,buffers:le,width:F,height:T,hasAlpha:se,dfdFlags:O,format:$,type:z}}(f.buffer);self.postMessage({type:"transcode",id:f.id,data:{faces:b,width:C,height:v,hasAlpha:B,format:y,type:I,dfdFlags:x}},E)}catch(b){console.error(b),self.postMessage({type:"error",id:f.id,error:b.message})}})}var p});const A=[{if:"astcSupported",basisFormat:[s.UASTC],transcoderFormat:[o.ASTC_4x4,o.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],engineType:[r.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.BC7_M5,o.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],engineType:[r.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.BC1,o.BC3],engineFormat:[i.RGBA_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],engineType:[r.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.ETC1,o.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],engineType:[r.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.ETC1],engineFormat:[i.RGB_ETC1_Format],engineType:[r.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.PVRTC1_4_RGB,o.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],engineType:[r.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[s.UASTC_HDR],transcoderFormat:[o.BC6H],engineFormat:[i.RGB_BPTC_UNSIGNED_Format],engineType:[r.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.RGBA32,o.RGBA32],engineFormat:[i.RGBAFormat,i.RGBAFormat],engineType:[r.UnsignedByteType,r.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[s.UASTC_HDR],transcoderFormat:[o.RGBA_HALF],engineFormat:[i.RGBAFormat],engineType:[r.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],a={[s.ETC1S]:A.filter(d=>d.basisFormat.includes(s.ETC1S)).sort((d,f)=>d.priorityUASTC-f.priorityUASTC),[s.UASTC]:A.filter(d=>d.basisFormat.includes(s.UASTC)).sort((d,f)=>d.priorityUASTC-f.priorityUASTC),[s.UASTC_HDR]:A.filter(d=>d.basisFormat.includes(s.UASTC_HDR)).sort((d,f)=>d.priorityHDR-f.priorityHDR)};function l(d){return d<=2||!(d&d-1)&&d!==0}function c(d){if(d.length===1)return d[0];let f=0;for(let E=0;E<d.length;E++)f+=d[E].byteLength;const p=new Uint8Array(f);let b=0;for(let E=0;E<d.length;E++){const C=d[E];p.set(C,b),b+=C.byteLength}return p}};const Kl=new Set([h.RGBAFormat,h.RGFormat,h.RedFormat]),ui={[Na]:h.RGBAFormat,[Oa]:h.RGBAFormat,[Ra]:h.RGBAFormat,[Ta]:h.RGBAFormat,[Ga]:h.RGFormat,[Ua]:h.RGFormat,[Da]:h.RGFormat,[ka]:h.RGFormat,[Pa]:h.RedFormat,[Fa]:h.RedFormat,[Sa]:h.RedFormat,[Ma]:h.RedFormat,[Pr]:h.RGBA_ASTC_4x4_Format,[_a]:h.RGBA_ASTC_6x6_Format,[ja]:h.RGBA_ASTC_6x6_Format},gi={[Na]:h.FloatType,[Oa]:h.HalfFloatType,[Ra]:h.UnsignedByteType,[Ta]:h.UnsignedByteType,[Ga]:h.FloatType,[Ua]:h.HalfFloatType,[Da]:h.UnsignedByteType,[ka]:h.UnsignedByteType,[Pa]:h.FloatType,[Fa]:h.HalfFloatType,[Sa]:h.UnsignedByteType,[Ma]:h.UnsignedByteType,[Pr]:h.HalfFloatType,[_a]:h.UnsignedByteType,[ja]:h.UnsignedByteType};function yo(e){const t=e.dataFormatDescriptor[0];return t.colorPrimaries===1?t.transferFunction===2?h.SRGBColorSpace:h.LinearSRGBColorSpace:t.colorPrimaries===10?t.transferFunction===2?"display-p3":"display-p3-linear":(t.colorPrimaries===0||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),h.NoColorSpace)}const J={c:null,u:[new h.Vector3,new h.Vector3,new h.Vector3],e:[]},ne={c:null,u:[new h.Vector3,new h.Vector3,new h.Vector3],e:[]},ce=[[],[],[]],V=[[],[],[]],Ae=[],ht=new h.Vector3,dt=new h.Vector3,ut=new h.Vector3,me=new h.Vector3,Io=new h.Vector3,wo=new h.Vector3,Oe=new h.Matrix3,xo=new h.Box3,nn=new h.Matrix4,Qo=new h.Matrix4,Lo=new h.Ray;class Pn{constructor(t=new h.Vector3,n=new h.Vector3,i=new h.Matrix3){this.center=t,this.halfSize=n,this.rotation=i}set(t,n,i){return this.center=t,this.halfSize=n,this.rotation=i,this}copy(t){return this.center.copy(t.center),this.halfSize.copy(t.halfSize),this.rotation.copy(t.rotation),this}clone(){return new this.constructor().copy(this)}getSize(t){return t.copy(this.halfSize).multiplyScalar(2)}clampPoint(t,n){const i=this.halfSize;me.subVectors(t,this.center),this.rotation.extractBasis(ht,dt,ut),n.copy(this.center);const r=h.MathUtils.clamp(me.dot(ht),-i.x,i.x);n.add(ht.multiplyScalar(r));const o=h.MathUtils.clamp(me.dot(dt),-i.y,i.y);n.add(dt.multiplyScalar(o));const s=h.MathUtils.clamp(me.dot(ut),-i.z,i.z);return n.add(ut.multiplyScalar(s)),n}containsPoint(t){return me.subVectors(t,this.center),this.rotation.extractBasis(ht,dt,ut),Math.abs(me.dot(ht))<=this.halfSize.x&&Math.abs(me.dot(dt))<=this.halfSize.y&&Math.abs(me.dot(ut))<=this.halfSize.z}intersectsBox3(t){return this.intersectsOBB(Yl.fromBox3(t))}intersectsSphere(t){return this.clampPoint(t.center,wo),wo.distanceToSquared(t.center)<=t.radius*t.radius}intersectsOBB(t,n=Number.EPSILON){J.c=this.center,J.e[0]=this.halfSize.x,J.e[1]=this.halfSize.y,J.e[2]=this.halfSize.z,this.rotation.extractBasis(J.u[0],J.u[1],J.u[2]),ne.c=t.center,ne.e[0]=t.halfSize.x,ne.e[1]=t.halfSize.y,ne.e[2]=t.halfSize.z,t.rotation.extractBasis(ne.u[0],ne.u[1],ne.u[2]);for(let o=0;o<3;o++)for(let s=0;s<3;s++)ce[o][s]=J.u[o].dot(ne.u[s]);me.subVectors(ne.c,J.c),Ae[0]=me.dot(J.u[0]),Ae[1]=me.dot(J.u[1]),Ae[2]=me.dot(J.u[2]);for(let o=0;o<3;o++)for(let s=0;s<3;s++)V[o][s]=Math.abs(ce[o][s])+n;let i,r;for(let o=0;o<3;o++)if(i=J.e[o],r=ne.e[0]*V[o][0]+ne.e[1]*V[o][1]+ne.e[2]*V[o][2],Math.abs(Ae[o])>i+r)return!1;for(let o=0;o<3;o++)if(i=J.e[0]*V[0][o]+J.e[1]*V[1][o]+J.e[2]*V[2][o],r=ne.e[o],Math.abs(Ae[0]*ce[0][o]+Ae[1]*ce[1][o]+Ae[2]*ce[2][o])>i+r)return!1;return i=J.e[1]*V[2][0]+J.e[2]*V[1][0],r=ne.e[1]*V[0][2]+ne.e[2]*V[0][1],!(Math.abs(Ae[2]*ce[1][0]-Ae[1]*ce[2][0])>i+r||(i=J.e[1]*V[2][1]+J.e[2]*V[1][1],r=ne.e[0]*V[0][2]+ne.e[2]*V[0][0],Math.abs(Ae[2]*ce[1][1]-Ae[1]*ce[2][1])>i+r||(i=J.e[1]*V[2][2]+J.e[2]*V[1][2],r=ne.e[0]*V[0][1]+ne.e[1]*V[0][0],Math.abs(Ae[2]*ce[1][2]-Ae[1]*ce[2][2])>i+r||(i=J.e[0]*V[2][0]+J.e[2]*V[0][0],r=ne.e[1]*V[1][2]+ne.e[2]*V[1][1],Math.abs(Ae[0]*ce[2][0]-Ae[2]*ce[0][0])>i+r||(i=J.e[0]*V[2][1]+J.e[2]*V[0][1],r=ne.e[0]*V[1][2]+ne.e[2]*V[1][0],Math.abs(Ae[0]*ce[2][1]-Ae[2]*ce[0][1])>i+r||(i=J.e[0]*V[2][2]+J.e[2]*V[0][2],r=ne.e[0]*V[1][1]+ne.e[1]*V[1][0],Math.abs(Ae[0]*ce[2][2]-Ae[2]*ce[0][2])>i+r||(i=J.e[0]*V[1][0]+J.e[1]*V[0][0],r=ne.e[1]*V[2][2]+ne.e[2]*V[2][1],Math.abs(Ae[1]*ce[0][0]-Ae[0]*ce[1][0])>i+r||(i=J.e[0]*V[1][1]+J.e[1]*V[0][1],r=ne.e[0]*V[2][2]+ne.e[2]*V[2][0],Math.abs(Ae[1]*ce[0][1]-Ae[0]*ce[1][1])>i+r||(i=J.e[0]*V[1][2]+J.e[1]*V[0][2],r=ne.e[0]*V[2][1]+ne.e[1]*V[2][0],Math.abs(Ae[1]*ce[0][2]-Ae[0]*ce[1][2])>i+r)))))))))}intersectsPlane(t){this.rotation.extractBasis(ht,dt,ut);const n=this.halfSize.x*Math.abs(t.normal.dot(ht))+this.halfSize.y*Math.abs(t.normal.dot(dt))+this.halfSize.z*Math.abs(t.normal.dot(ut)),i=t.normal.dot(this.center)-t.constant;return Math.abs(i)<=n}intersectRay(t,n){return this.getSize(Io),xo.setFromCenterAndSize(me.set(0,0,0),Io),nn.setFromMatrix3(this.rotation),nn.setPosition(this.center),Qo.copy(nn).invert(),Lo.copy(t).applyMatrix4(Qo),Lo.intersectBox(xo,n)?n.applyMatrix4(nn):null}intersectsRay(t){return this.intersectRay(t,me)!==null}fromBox3(t){return t.getCenter(this.center),t.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(t){return t.center.equals(this.center)&&t.halfSize.equals(this.halfSize)&&t.rotation.equals(this.rotation)}applyMatrix4(t){const n=t.elements;let i=me.set(n[0],n[1],n[2]).length();const r=me.set(n[4],n[5],n[6]).length(),o=me.set(n[8],n[9],n[10]).length();t.determinant()<0&&(i=-i),Oe.setFromMatrix4(t);const s=1/i,A=1/r,a=1/o;return Oe.elements[0]*=s,Oe.elements[1]*=s,Oe.elements[2]*=s,Oe.elements[3]*=A,Oe.elements[4]*=A,Oe.elements[5]*=A,Oe.elements[6]*=a,Oe.elements[7]*=a,Oe.elements[8]*=a,this.rotation.multiply(Oe),this.halfSize.x*=i,this.halfSize.y*=r,this.halfSize.z*=o,me.setFromMatrixPosition(t),this.center.add(me),this}}const Yl=new Pn,Jl=/^[og]\s*(.+)?/,Xl=/^mtllib /,Zl=/^usemtl /,$l=/^usemap /,Mo=/\s+/,So=new h.Vector3,fi=new h.Vector3,Do=new h.Vector3,ko=new h.Vector3,Re=new h.Vector3,rn=new h.Color;function ec(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,n){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=n!==!1);const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){const s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);const A={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(a){const l={index:typeof a=="number"?a:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return l.clone=this.clone.bind(l),l}};return this.materials.push(A),A},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,n){const i=parseInt(t,10);return 3*(i>=0?i-1:i+n/3)},parseNormalIndex:function(t,n){const i=parseInt(t,10);return 3*(i>=0?i-1:i+n/3)},parseUVIndex:function(t,n){const i=parseInt(t,10);return 2*(i>=0?i-1:i+n/2)},addVertex:function(t,n,i){const r=this.vertices,o=this.object.geometry.vertices;o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2]),o.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(t){const n=this.vertices;this.object.geometry.vertices.push(n[t+0],n[t+1],n[t+2])},addVertexLine:function(t){const n=this.vertices;this.object.geometry.vertices.push(n[t+0],n[t+1],n[t+2])},addNormal:function(t,n,i){const r=this.normals,o=this.object.geometry.normals;o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2]),o.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(t,n,i){const r=this.vertices,o=this.object.geometry.normals;So.fromArray(r,t),fi.fromArray(r,n),Do.fromArray(r,i),Re.subVectors(Do,fi),ko.subVectors(So,fi),Re.cross(ko),Re.normalize(),o.push(Re.x,Re.y,Re.z),o.push(Re.x,Re.y,Re.z),o.push(Re.x,Re.y,Re.z)},addColor:function(t,n,i){const r=this.colors,o=this.object.geometry.colors;r[t]!==void 0&&o.push(r[t+0],r[t+1],r[t+2]),r[n]!==void 0&&o.push(r[n+0],r[n+1],r[n+2]),r[i]!==void 0&&o.push(r[i+0],r[i+1],r[i+2])},addUV:function(t,n,i){const r=this.uvs,o=this.object.geometry.uvs;o.push(r[t+0],r[t+1]),o.push(r[n+0],r[n+1]),o.push(r[i+0],r[i+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const n=this.uvs;this.object.geometry.uvs.push(n[t+0],n[t+1])},addFace:function(t,n,i,r,o,s,A,a,l){const c=this.vertices.length;let d=this.parseVertexIndex(t,c),f=this.parseVertexIndex(n,c),p=this.parseVertexIndex(i,c);if(this.addVertex(d,f,p),this.addColor(d,f,p),A!==void 0&&A!==""){const b=this.normals.length;d=this.parseNormalIndex(A,b),f=this.parseNormalIndex(a,b),p=this.parseNormalIndex(l,b),this.addNormal(d,f,p)}else this.addFaceNormal(d,f,p);if(r!==void 0&&r!==""){const b=this.uvs.length;d=this.parseUVIndex(r,b),f=this.parseUVIndex(o,b),p=this.parseUVIndex(s,b),this.addUV(d,f,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const n=this.vertices.length;for(let i=0,r=t.length;i<r;i++){const o=this.parseVertexIndex(t[i],n);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(t,n){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let o=0,s=t.length;o<s;o++)this.addVertexLine(this.parseVertexIndex(t[o],i));for(let o=0,s=n.length;o<s;o++)this.addUVLine(this.parseUVIndex(n[o],r))}};return e.startObject("",!1),e}class Ha extends h.Loader{constructor(t){super(t),this.materials=null}load(t,n,i,r){const o=this,s=new h.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(A){try{n(o.parse(A))}catch(a){r?r(a):console.error(a),o.manager.itemError(t)}},i,r)}setMaterials(t){return this.materials=t,this}parse(t){const n=new ec;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const i=t.split(`
`);let r=[];for(let s=0,A=i.length;s<A;s++){const a=i[s].trimStart();if(a.length===0)continue;const l=a.charAt(0);if(l!=="#")if(l==="v"){const c=a.split(Mo);switch(c[0]){case"v":n.vertices.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),c.length>=7?(rn.setRGB(parseFloat(c[4]),parseFloat(c[5]),parseFloat(c[6]),h.SRGBColorSpace),n.colors.push(rn.r,rn.g,rn.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));break;case"vt":n.uvs.push(parseFloat(c[1]),parseFloat(c[2]))}}else if(l==="f"){const c=a.slice(1).trim().split(Mo),d=[];for(let p=0,b=c.length;p<b;p++){const E=c[p];if(E.length>0){const C=E.split("/");d.push(C)}}const f=d[0];for(let p=1,b=d.length-1;p<b;p++){const E=d[p],C=d[p+1];n.addFace(f[0],E[0],C[0],f[1],E[1],C[1],f[2],E[2],C[2])}}else if(l==="l"){const c=a.substring(1).trim().split(" ");let d=[];const f=[];if(a.indexOf("/")===-1)d=c;else for(let p=0,b=c.length;p<b;p++){const E=c[p].split("/");E[0]!==""&&d.push(E[0]),E[1]!==""&&f.push(E[1])}n.addLineGeometry(d,f)}else if(l==="p"){const c=a.slice(1).trim().split(" ");n.addPointGeometry(c)}else if((r=Jl.exec(a))!==null){const c=(" "+r[0].slice(1).trim()).slice(1);n.startObject(c)}else if(Zl.test(a))n.object.startMaterial(a.substring(7).trim(),n.materialLibraries);else if(Xl.test(a))n.materialLibraries.push(a.substring(7).trim());else if($l.test(a))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(l==="s"){if(r=a.split(" "),r.length>1){const d=r[1].trim().toLowerCase();n.object.smooth=d!=="0"&&d!=="off"}else n.object.smooth=!0;const c=n.object.currentMaterial();c&&(c.smooth=n.object.smooth)}else{if(a==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+a+'"')}}n.finalize();const o=new h.Group;if(o.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0))for(let s=0,A=n.objects.length;s<A;s++){const a=n.objects[s],l=a.geometry,c=a.materials,d=l.type==="Line",f=l.type==="Points";let p=!1;if(l.vertices.length===0)continue;const b=new h.BufferGeometry;b.setAttribute("position",new h.Float32BufferAttribute(l.vertices,3)),l.normals.length>0&&b.setAttribute("normal",new h.Float32BufferAttribute(l.normals,3)),l.colors.length>0&&(p=!0,b.setAttribute("color",new h.Float32BufferAttribute(l.colors,3))),l.hasUVIndices===!0&&b.setAttribute("uv",new h.Float32BufferAttribute(l.uvs,2));const E=[];for(let v=0,B=c.length;v<B;v++){const y=c[v],I=y.name+"_"+y.smooth+"_"+p;let x=n.materials[I];if(this.materials!==null)if(x=this.materials.create(y.name),!d||!x||x instanceof h.LineBasicMaterial){if(f&&x&&!(x instanceof h.PointsMaterial)){const D=new h.PointsMaterial({size:10,sizeAttenuation:!1});h.Material.prototype.copy.call(D,x),D.color.copy(x.color),D.map=x.map,x=D}}else{const D=new h.LineBasicMaterial;h.Material.prototype.copy.call(D,x),D.color.copy(x.color),x=D}x===void 0&&(x=d?new h.LineBasicMaterial:f?new h.PointsMaterial({size:1,sizeAttenuation:!1}):new h.MeshPhongMaterial,x.name=y.name,x.flatShading=!y.smooth,x.vertexColors=p,n.materials[I]=x),E.push(x)}let C;if(E.length>1){for(let v=0,B=c.length;v<B;v++){const y=c[v];b.addGroup(y.groupStart,y.groupCount,v)}C=d?new h.LineSegments(b,E):f?new h.Points(b,E):new h.Mesh(b,E)}else C=d?new h.LineSegments(b,E[0]):f?new h.Points(b,E[0]):new h.Mesh(b,E[0]);C.name=a.name,o.add(C)}else if(n.vertices.length>0){const s=new h.PointsMaterial({size:1,sizeAttenuation:!1}),A=new h.BufferGeometry;A.setAttribute("position",new h.Float32BufferAttribute(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(A.setAttribute("color",new h.Float32BufferAttribute(n.colors,3)),s.vertexColors=!0);const a=new h.Points(A,s);o.add(a)}return o}}class qa extends h.Loader{constructor(t){super(t)}load(t,n,i,r){const o=this,s=this.path===""?h.LoaderUtils.extractUrlBase(t):this.path,A=new h.FileLoader(this.manager);A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(t,function(a){try{n(o.parse(a,s))}catch(l){r?r(l):console.error(l),o.manager.itemError(t)}},i,r)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,n){const i=t.split(`
`);let r={};const o=/\s+/,s={};for(let a=0;a<i.length;a++){let l=i[a];if(l=l.trim(),l.length===0||l.charAt(0)==="#")continue;const c=l.indexOf(" ");let d=c>=0?l.substring(0,c):l;d=d.toLowerCase();let f=c>=0?l.substring(c+1):"";if(f=f.trim(),d==="newmtl")r={name:f},s[f]=r;else if(d==="ka"||d==="kd"||d==="ks"||d==="ke"){const p=f.split(o,3);r[d]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])]}else r[d]=f}const A=new tc(this.resourcePath||n,this.materialOptions);return A.setCrossOrigin(this.crossOrigin),A.setManager(this.manager),A.setMaterials(s),A}}class tc{constructor(t="",n={}){this.baseUrl=t,this.options=n,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:h.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:h.RepeatWrapping}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const n={};for(const i in t){const r=t[i],o={};n[i]=o;for(const s in r){let A=!0,a=r[s];const l=s.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(a=[a[0]/255,a[1]/255,a[2]/255]),this.options&&this.options.ignoreZeroRGBs&&a[0]===0&&a[1]===0&&a[2]===0&&(A=!1)}A&&(o[l]=a)}}return n}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const n in this.materialsInfo)this.materialsArray[t]=this.create(n),this.nameLookup[n]=t,t++;return this.materialsArray}create(t){return this.materials[t]===void 0&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const n=this,i=this.materialsInfo[t],r={name:t,side:this.side};function o(s,A){if(r[s])return;const a=n.getTextureParams(A,r),l=n.loadTexture((c=n.baseUrl,typeof(d=a.url)!="string"||d===""?"":/^https?:\/\//i.test(d)?d:c+d));var c,d;l.repeat.copy(a.scale),l.offset.copy(a.offset),l.wrapS=n.wrap,l.wrapT=n.wrap,s!=="map"&&s!=="emissiveMap"||(l.colorSpace=h.SRGBColorSpace),r[s]=l}for(const s in i){const A=i[s];let a;if(A!=="")switch(s.toLowerCase()){case"kd":r.color=h.ColorManagement.toWorkingColorSpace(new h.Color().fromArray(A),h.SRGBColorSpace);break;case"ks":r.specular=h.ColorManagement.toWorkingColorSpace(new h.Color().fromArray(A),h.SRGBColorSpace);break;case"ke":r.emissive=h.ColorManagement.toWorkingColorSpace(new h.Color().fromArray(A),h.SRGBColorSpace);break;case"map_kd":o("map",A);break;case"map_ks":o("specularMap",A);break;case"map_ke":o("emissiveMap",A);break;case"norm":o("normalMap",A);break;case"map_bump":case"bump":o("bumpMap",A);break;case"map_d":o("alphaMap",A),r.transparent=!0;break;case"ns":r.shininess=parseFloat(A);break;case"d":a=parseFloat(A),a<1&&(r.opacity=a,r.transparent=!0);break;case"tr":a=parseFloat(A),this.options&&this.options.invertTrProperty&&(a=1-a),a>0&&(r.opacity=1-a,r.transparent=!0)}}return this.materials[t]=new h.MeshPhongMaterial(r),this.materials[t]}getTextureParams(t,n){const i={scale:new h.Vector2(1,1),offset:new h.Vector2(0,0)},r=t.split(/\s+/);let o;return o=r.indexOf("-bm"),o>=0&&(n.bumpScale=parseFloat(r[o+1]),r.splice(o,2)),o=r.indexOf("-s"),o>=0&&(i.scale.set(parseFloat(r[o+1]),parseFloat(r[o+2])),r.splice(o,4)),o=r.indexOf("-o"),o>=0&&(i.offset.set(parseFloat(r[o+1]),parseFloat(r[o+2])),r.splice(o,4)),i.url=r.join(" ").trim(),i}loadTexture(t,n,i,r,o){const s=this.manager!==void 0?this.manager:h.DefaultLoadingManager;let A=s.getHandler(t);A===null&&(A=new h.TextureLoader(s)),A.setCrossOrigin&&A.setCrossOrigin(this.crossOrigin);const a=A.load(t,i,r,o);return n!==void 0&&(a.mapping=n),a}}class Va{static fromCubeTexture(t){let n=0;const i=new h.Vector3,r=new h.Vector3,o=new h.Color,s=[0,0,0,0,0,0,0,0,0],A=new h.SphericalHarmonics3,a=A.coefficients;for(let c=0;c<6;c++){const d=t.image[c],f=d.width,p=d.height,b=document.createElement("canvas");b.width=f,b.height=p;const E=b.getContext("2d");E.drawImage(d,0,0,f,p);const C=E.getImageData(0,0,f,p),v=C.data,B=C.width,y=2/B;for(let I=0,x=v.length;I<x;I+=4){o.setRGB(v[I]/255,v[I+1]/255,v[I+2]/255),Ro(o,t.colorSpace);const D=I/4,L=(D%B+.5)*y-1,S=1-(Math.floor(D/B)+.5)*y;switch(c){case 0:i.set(-1,S,-L);break;case 1:i.set(1,S,L);break;case 2:i.set(-L,1,-S);break;case 3:i.set(-L,-1,S);break;case 4:i.set(-L,S,1);break;case 5:i.set(L,S,-1)}const k=i.lengthSq(),F=4/(Math.sqrt(k)*k);n+=F,r.copy(i).normalize(),h.SphericalHarmonics3.getBasisAt(r,s);for(let T=0;T<9;T++)a[T].x+=s[T]*o.r*F,a[T].y+=s[T]*o.g*F,a[T].z+=s[T]*o.b*F}}const l=4*Math.PI/n;for(let c=0;c<9;c++)a[c].x*=l,a[c].y*=l,a[c].z*=l;return new h.LightProbe(A)}static async fromCubeRenderTarget(t,n){const i=t.coordinateSystem===h.WebGLCoordinateSystem?-1:1;let r=0;const o=new h.Vector3,s=new h.Vector3,A=new h.Color,a=[0,0,0,0,0,0,0,0,0],l=new h.SphericalHarmonics3,c=l.coefficients,d=n.texture.type,f=n.width;let p;t.isWebGLRenderer&&(p=d===h.HalfFloatType?new Uint16Array(f*f*4):new Uint8Array(f*f*4));for(let E=0;E<6;E++){t.isWebGLRenderer?await t.readRenderTargetPixelsAsync(n,0,0,f,f,p,E):p=await t.readRenderTargetPixelsAsync(n,0,0,f,f,0,E);const C=2/f;for(let v=0,B=p.length;v<B;v+=4){let y,I,x;d===h.HalfFloatType?(y=h.DataUtils.fromHalfFloat(p[v]),I=h.DataUtils.fromHalfFloat(p[v+1]),x=h.DataUtils.fromHalfFloat(p[v+2])):(y=p[v]/255,I=p[v+1]/255,x=p[v+2]/255),A.setRGB(y,I,x),Ro(A,n.texture.colorSpace);const D=v/4,L=(1-(D%f+.5)*C)*i,S=1-(Math.floor(D/f)+.5)*C;switch(E){case 0:o.set(-1*i,S,L*i);break;case 1:o.set(1*i,S,-L*i);break;case 2:o.set(L,1,-S);break;case 3:o.set(L,-1,S);break;case 4:o.set(L,S,1);break;case 5:o.set(-L,S,-1)}const k=o.lengthSq(),F=4/(Math.sqrt(k)*k);r+=F,s.copy(o).normalize(),h.SphericalHarmonics3.getBasisAt(s,a);for(let T=0;T<9;T++)c[T].x+=a[T]*A.r*F,c[T].y+=a[T]*A.g*F,c[T].z+=a[T]*A.b*F}}const b=4*Math.PI/r;for(let E=0;E<9;E++)c[E].x*=b,c[E].y*=b,c[E].z*=b;return new h.LightProbe(l)}}function Ro(e,t){switch(t){case h.SRGBColorSpace:e.convertSRGBToLinear();break;case h.LinearSRGBColorSpace:case h.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.")}return e}var za=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n,i,r,o,s=function(l){t.deviceOrientation=l},A=function(){t.screenOrientation=window.orientation||0},a=(n=new THREE.Vector3(0,0,1),i=new THREE.Euler,r=new THREE.Quaternion,o=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(l,c,d,f,p){i.set(d,c,-f,"YXZ"),l.setFromEuler(i),l.multiply(o),l.multiply(r.setFromAxisAngle(n,-p))});this.connect=function(){A(),window.addEventListener("orientationchange",A,!1),window.addEventListener("deviceorientation",s,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",A,!1),window.removeEventListener("deviceorientation",s,!1),t.enabled=!1},this.update=function(){if(t.enabled!==!1){var l=t.deviceOrientation;if(l){var c=l.alpha?THREE.MathUtils.degToRad(l.alpha)+t.alphaOffset:0,d=l.beta?THREE.MathUtils.degToRad(l.beta):0,f=l.gamma?THREE.MathUtils.degToRad(l.gamma):0,p=t.screenOrientation?THREE.MathUtils.degToRad(t.screenOrientation):0;a(t.object.quaternion,c,d,f,p)}}},this.dispose=function(){t.disconnect()},this.connect()},Ge=globalThis.THREE={...h};Ge.DRACOLoader=xa,Ge.GLTFLoader=Or,Ge.KTX2Loader=Se,Ge.OBJLoader=Ha,Ge.MTLLoader=qa,Ge.OBB=Pn,Ge.BufferGeometryUtils=$i,Ge.LightProbeGenerator=Va,Ge.DeviceOrientationControls=za,Ge.Cache.enabled=!0;const Wa=Ge;var de=window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",be="aframe-injected",nc=G(8878),Wt=G.n(nc),To={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};Wt().formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" "),this.useColors){var t;this.color=(t=function(o){var s=o.split(":");return s[s.length-1]}(this.namespace),To.colors&&To.colors[t]||null);var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(o){o!=="%%"&&(i++,o==="%c"&&(r=i))}),e.splice(r,0,n)}};var pi=function(){try{return window.localStorage}catch{}}();pi&&(parseInt(pi.logs,10)||pi.logs==="true")?Wt().enable("*"):Wt().enable("*:error,*:info,*:warn");const ee=Wt();var ic=G(1124),rc=G.n(ic),Fo=ee("device:error"),Gn=!1,Nn=!1,Xn=navigator.xr!==void 0;if(Xn){var bt=function(){var e=document.querySelector("a-scene");e?e.hasLoaded?e.components["xr-mode-ui"].updateEnterInterfaces():e.addEventListener("loaded",bt):window.addEventListener("DOMContentLoaded",bt)},Uo=function(e){Fo("WebXR session support error: "+e.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(e){Gn=e,bt()}).catch(Uo),navigator.xr.isSessionSupported("immersive-ar").then(function(e){Nn=e,bt()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){Gn=!0,bt()}).catch(Uo),navigator.xr.supportsSession("immersive-ar").then(function(){Nn=!0,bt()}).catch(function(){})):Fo("WebXR has neither isSessionSupported or supportsSession?!")}function Gr(){return Gn||Nn}function Nr(){return Nn}function vr(){return Gn}var kt,mi,At=(kt=!1,mi=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(mi)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(mi.substr(0,4)))&&(kt=!0),(Zt()||Ka()||qr())&&(kt=!0),Hr()&&(kt=!1),function(){return kt});function Ka(e){var t=e||window.navigator.userAgent;return/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(t)||Ya()}function Ya(e,t,n){var i=e||window.navigator.userAgent,r=t||window.navigator.platform,o=n||window.navigator.maxTouchPoints||0;return(r==="iPad"||r==="MacIntel")&&o>0&&/Macintosh|Intel|iPad|ipad/i.test(i)&&!window.MSStream}function Ja(){var e=navigator.userAgent.includes("Macintosh"),t=navigator.maxTouchPoints===5;return e&&t&&Xn}function Zt(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function jr(){return!At()&&!Hr()&&window.orientation!==void 0}function _r(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}function Xa(){return/(Mobile VR)/i.test(window.navigator.userAgent)}function Hr(){return _r()||Xa()||Ja()}function qr(){return/R7 Build/.test(window.navigator.userAgent)}function Za(){var e=window.orientation;return qr()&&(e+=90),e===90||e===-90}var Vr=typeof process>"u"||process.browser===!0,oc=!Vr,sc=Object.freeze(Object.create(null));function ac(){return{}}function zr(e){var t=[],n=null;function i(r){var o,s;if((r=r===void 0?t.length:r)>0&&n==null&&(n=0),r>0)for(o=t.length,t.length+=Number(r),s=o;s<t.length;s++)t[s]=e();return t.length}return e=e||ac,{grow:i,pool:t,recycle:function(r){r instanceof Object&&(n!==null&&n!==-1?t[--n]=r:t[t.length]=r)},size:function(){return t.length},use:function(){var r;return n!==null&&n!==t.length||i(t.length||5),r=t[n],t[n++]=sc,Wr(r),r}}}function Wr(e){var t;if(e&&e.constructor===Object)for(t in e)e[t]=void 0}function Kt(e,t){var n;if(e&&e.constructor===Object)for(n in e)n in t||delete e[n]}var Ac=ee("utils:coordinates:warn"),Oo=["x","y","z","w"],$a=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/,lc=/\s+/g;function jn(e,t,n){var i,r,o,s,A,a,l,c,d=n&&typeof n=="object"?n:{};if(e&&e instanceof Object)return A=e.x===void 0?t&&t.x:e.x,a=e.y===void 0?t&&t.y:e.y,l=e.z===void 0?t&&t.z:e.z,c=e.w===void 0?t&&t.w:e.w,A!=null&&(d.x=Rt(A)),a!=null&&(d.y=Rt(a)),l!=null&&(d.z=Rt(l)),c!=null&&(d.w=Rt(c)),d;if(e==null)return typeof t=="object"?Object.assign(d,t):t;for(i=e.trim().split(lc),s=0;s<Oo.length;s++)if(o=Oo[s],i[s])d[o]=parseFloat(i[s],10);else{if((r=t&&t[o])===void 0)continue;d[o]=Rt(r)}return d}function Mn(e){var t;return typeof e!="object"?e:(t=e.x+" "+e.y,e.z!=null&&(t+=" "+e.z),e.w!=null&&(t+=" "+e.w),t)}function Sn(e,t){return typeof e!="object"||typeof t!="object"?e===t:e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}function eA(e){return $a.test(e)}function cc(e){return Ac("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),eA(e)}function Rt(e){return e!=null&&e.constructor===String?parseFloat(e,10):e}function hc(e){return new h.Vector3(e.x,e.y,e.z)}var tt=function(){var e={};return function(t,n){return n in e||(e[n]={}),t in e[n]||(e[n][t]=t.split(n)),e[n][t]}}();function Zn(e,t){var n=tt(e,t=t||".");return n.length===1?n[0]:n}function tA(e,t,n){var i;return n=n||".",t.indexOf(n)!==-1?(i=Zn(t,n)).constructor===String?e.getAttribute(i):e.getAttribute(i[0])[i[1]]:e.getAttribute(t)}function Kr(e,t,n,i){var r;i=i||".",t.indexOf(i)===-1?e.setAttribute(t,n):(r=Zn(t,i)).constructor===String?e.setAttribute(r,n):e.setAttribute(r[0],r[1],n)}function nA(e){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t,10)+1+"px",e.style.height=parseInt(n,10)+1+"px",setTimeout(function(){e.style.width=t,e.style.height=n},200)}var Dn=ee("utils:src-loader:warn");function _n(e,t,n){(function(i,r){var o;i.tagName?r(i.tagName==="IMG"):((o=new XMLHttpRequest).open("HEAD",i),o.addEventListener("load",function(s){var A;o.status>=200&&o.status<300?(A=o.getResponseHeader("Content-Type"))==null?Po(i,r):A.startsWith("image")?r(!0):r(!1):Po(i,r),o.abort()}),o.send())})(e,function(i){i?t(e):n(e)})}function Yr(e,t,n){var i,r,o,s="",A=[];if(typeof e=="string"){let a=function(l){A.push(l),A.length===6&&t(A)};for(r=0;r<5;r++)s+="(url\\((?:[^\\)]+)\\),\\s*)";if(s+="(url\\((?:[^\\)]+)\\)\\s*)",o=e.match(new RegExp(s))){for(r=1;r<7;r++)_n(br(o[r]),a);return}if(!e.startsWith("#"))return void _n(br(e)||e,n)}if(i=e.tagName?e:function(a){try{var l=document.querySelector(a);return l||Dn('No element was found matching the selector: "%s"',a),l}catch{return void Dn('"%s" is not a valid selector',a)}}(e))return i.tagName==="A-CUBEMAP"&&i.srcs?t(i.srcs):i.tagName==="IMG"?n(i):void Dn('Selector "%s" does not point to <a-cubemap> or <img>',e)}function iA(e,t){return Yr(e,t,function(){Dn("Expected cubemap but got image")})}function br(e){var t=e.match(/url\((.+)\)/);if(t)return t[1]}function Po(e,t){var n=new Image;n.addEventListener("load",function(){t(!0)}),n.addEventListener("error",function(){t(!1)}),n.src=e}var dc=ee("utils:material:warn"),uc=new Set(["emissiveMap","envMap","map","specularMap"]);function Hn(e,t){var n=t.offset||{x:0,y:0},i=t.repeat||{x:1,y:1},r=t.npot||!1,o=t.anisotropy||h.Texture.DEFAULT_ANISOTROPY,s=e.wrapS,A=e.wrapT,a=e.magFilter,l=e.minFilter;r&&(s=h.ClampToEdgeWrapping,A=h.ClampToEdgeWrapping,a=h.LinearFilter,l=h.LinearFilter),i.x===1&&i.y===1||(s=h.RepeatWrapping,A=h.RepeatWrapping),e.offset.set(n.x,n.y),e.repeat.set(i.x,i.y),e.wrapS===s&&e.wrapT===A&&e.magFilter===a&&e.minFilter===l&&e.anisotropy===o||(e.wrapS=s,e.wrapT=A,e.magFilter=a,e.minFilter=l,e.anisotropy=o,e.needsUpdate=!0)}function $n(e,t,n,i){var r=n.el,o=n.material,s=r.sceneEl.systems.renderer,A=i[t];if(n.materialSrcs||(n.materialSrcs={}),!A)return delete n.materialSrcs[e],void a(null);function a(l){o[e]!==l&&(o[e]&&o[e].dispose(),o[e]=l,o.needsUpdate=!0,Jr(r,l))}A===n.materialSrcs[e]&&o[e]?Hn(o[e],i):(n.materialSrcs[e]=A,A instanceof h.Texture?a(A):r.sceneEl.systems.material.loadTextureSource(A,function(l){if(n.materialSrcs[e]===A){var c=o[e];!c||l!==null&&rA(c,l)||(c=null),!c&&l&&(c=Xr(l)),c&&(c.source!==l&&(c.source=l,c.needsUpdate=!0),uc.has(e)&&s.applyColorCorrection(c),Hn(c,i)),a(c)}}))}function kn(e,t){return $n("map","src",e,t)}function He(e,t,n){var i=e;e==="ambientOcclusion"&&(i="ao");var r={};return r.src=n[e+"Map"],r.offset=n[e+"TextureOffset"],r.repeat=n[e+"TextureRepeat"],r.wrap=n[e+"TextureWrap"],$n(i+"Map","src",t,r)}var Ei={};function Br(e,t){var n=e.material,i=e.el,r="envMap",o=t.envMap,s=t.sphericalEnvMap,A=t.refract;if(s&&(o=s,dc("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),e.materialSrcs||(e.materialSrcs={}),!o)return delete e.materialSrcs[r],n.envMap=null,void(n.needsUpdate=!0);function a(l){e.materialSrcs[r]===o&&(n.envMap=l,n.needsUpdate=!0,Jr(i,l))}e.materialSrcs[r]=o,Ei[o]?Ei[o].then(a):Ei[o]=new Promise(function(l){Yr(o,function(c){i.sceneEl.systems.material.loadCubeMapTexture(c,function(d){d.mapping=A?h.CubeRefractionMapping:h.CubeReflectionMapping,a(d),l(d)})},function(c){i.sceneEl.systems.material.loadTexture(c,{src:c},function(d){d.mapping=A?h.EquirectangularRefractionMapping:h.EquirectangularReflectionMapping,a(d),l(d)})})})}function Jr(e,t){function n(){e.emit("materialvideoloadeddata",{src:t.image,texture:t})}function i(){e.emit("materialvideoended",{src:t.image,texture:t})}t&&(e.emit("materialtextureloaded",{src:t.image,texture:t}),t.image&&t.image.tagName==="VIDEO"&&(t.image.addEventListener("loadeddata",n),t.image.addEventListener("ended",i),t.addEventListener("dispose",function(){t.image.removeEventListener("loadeddata",n),t.image.removeEventListener("ended",i)})))}function rA(e,t){return e.source===t&&(t.data instanceof HTMLCanvasElement?e.isCanvasTexture:t.data instanceof HTMLVideoElement?e.isVideoTexture:e.isTexture&&!e.isCanvasTexture&&!e.isVideoTexture)}function Xr(e){var t;return(t=e.data instanceof HTMLCanvasElement?new h.CanvasTexture:e.data instanceof HTMLVideoElement?new h.VideoTexture(e.data):new h.Texture).source=e,t.needsUpdate=!0,t}var gc=/-([a-z])/g;function Yt(e,t){var n;return typeof e!="string"?e:(n=function(i,r){var o,s,A,a,l,c;for(r=r||{},o=pc(i),s=0;s<o.length;s++)(A=o[s])&&(a=A.indexOf(":"),l=A.substr(0,a).trim(),c=A.substr(a+1).trim(),r[oA(l)]=c);return r}(e,t),n[""]?e:n)}function fc(e){return typeof e=="string"?e:function(t){var n,i=0,r=0,o="";for(n in t)i++;for(n in t)o+=n+": "+t[n],r<i-1&&(o+="; "),r++;return o}(e)}function oA(e){return e.replace(gc,mc)}var on,Go,pc=(on=[],Go=/url\([^)]+$/,function(e){var t,n="",i=0;for(on.length=0;i<e.length;)(t=e.indexOf(";",i))===-1&&(t=e.length),n+=e.substring(i,t),Go.test(n)?(n+=";",i=t+1):(on.push(n.trim()),n="",i=t+1);return on});function mc(e){return e[1].toUpperCase()}var Ec=["x","y","z","w"];function De(e,t,n){var i,r,o=e.el;if((r=!!(i=sA(e,t,n)))===e.controllerPresent)return r;e.controllerPresent=r,r?(e.addEventListeners(),e.injectTrackedControls(i),o.emit("controllerconnected",{name:e.name,component:e})):(e.removeEventListeners(),o.emit("controllerdisconnected",{name:e.name,component:e}))}function sA(e,t,n){var i,r=e.el.sceneEl,o=r&&r.systems["tracked-controls"];return!!o&&!(!(i=o.controllers)||!i.length)&&Zr(i,t,n.hand,n.index,n.iterateControllerProfiles,n.handTracking)}function Zr(e,t,n,i,r,o){var s,A,a,l,c=!1;for(s=0;s<e.length;s++){if(l=(a=e[s]).profiles,o)c=a.hand;else if(r)for(A=0;A<l.length&&!(c=l[A].startsWith(t));A++);else c=l.length>0&&l[0].startsWith(t);if(c){if(a.handedness==="right"||a.handedness==="left"){if(a.handedness===n)return e[s]}else if(s===i)return e[s]}}}function Ue(e,t,n){var i,r,o,s,A;for(r in t){for(i=t[r],o=!1,A=0;A<i.length;A++)n.detail.changed[i[A]]&&(o=!0);if(o){for(s={},A=0;A<i.length;A++)s[Ec[A]]=n.detail.axis[i[A]];e.el.emit(r+"moved",s)}}}function q(e,t,n,i){var r=(i?n.mapping[i]:n.mapping).buttons[e];n.el.emit(r+t),n.updateModel&&n.updateModel(r,t)}var $r=ee("utils:warn");function Cc(e){return e.bind.apply(e,Array.prototype.slice.call(arguments,1))}function vc(){return $r("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),Gr()}function bc(){return $r("`utils.isIOS` has moved to `utils.device.isIOS`"),Zt()}function Bc(){return $r("`utils.isMobile has moved to `utils.device.isMobile`"),At(arguments)}function yc(e,t,n){var i;return n&&(e=e.bind(n)),function(){var r=Date.now();(i===void 0||(i===void 0?t:r-i)>=t)&&(i=r,e.apply(null,arguments))}}function aA(e,t,n){var i,r,o;n&&(e=e.bind(n));var s=function(){i=Date.now(),e.apply(this,o),r=void 0};return function(){var A=Date.now(),a=i===void 0?t:A-i;a>=t?(clearTimeout(r),r=void 0,i=A,e.apply(null,arguments)):(r=r||setTimeout(s,t-a),o=arguments)}}function Ic(e,t,n){var i;return n&&(e=e.bind(n)),function(r,o){var s=i===void 0?o:r-i;(i===void 0||s>=t)&&(i=r,e(r,s))}}function AA(e,t,n){var i;return function(){var r=this,o=arguments,s=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(r,o)},t),s&&e.apply(r,o)}}var Le=Object.assign,Me=rc();function eo(e){return JSON.parse(JSON.stringify(e))}var Pe,gt,to=(Pe=zr(function(){return[]}),function(e,t){var n,i,r,o,s,A;if(e===void 0||t===void 0||e===null||t===null||!(e&&t&&e.constructor===Object&&t.constructor===Object||e.constructor===Array&&t.constructor===Array))return e===t;for(n in i=Pe.use(),r=Pe.use(),i.length=0,r.length=0,e)i.push(n);for(n in t)r.push(n);if(i.length!==r.length)return Pe.recycle(i),Pe.recycle(r),!1;for(o=0;o<i.length;++o)if(s=e[i[o]],A=t[i[o]],typeof s=="object"||typeof A=="object"||Array.isArray(s)&&Array.isArray(A)){if(s===A)continue;if(!to(s,A))return Pe.recycle(i),Pe.recycle(r),!1}else if(s!==A)return Pe.recycle(i),Pe.recycle(r),!1;return Pe.recycle(i),Pe.recycle(r),!0}),lA=(gt=[],function(e,t,n){var i,r,o,s,A,a,l;for(A in s=n||{},gt.length=0,e)gt.push(A);if(!t)return s;for(o in t)gt.indexOf(o)===-1&&gt.push(o);for(a=0;a<gt.length;a++)i=e[A=gt[a]],r=t[A],((l=i&&r&&i.constructor===Object&&r.constructor===Object)&&!to(i,r)||!l&&i!==r)&&(s[A]=r);return s});function no(e){return!e.metaKey&&document.activeElement===document.body}function wc(e,t){t===void 0&&(t=" ");var n=new RegExp(t,"g");return(e=(e||"").replace(n,t)).split(t)}function xc(e,t){t=t||{};var n={};return Object.keys(t).forEach(function(i){e.hasAttribute(i)&&(n[i]=e.getAttribute(i))}),n}function Jt(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function cA(){return window.top!==window.self}function hA(e){for(var t=[],n=e.getElementsByTagName("*"),i=0,r=n.length;i<r;i++)n[i].isScene&&t.push(n[i]);return t}var Ci,Qc=[Vt({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),Vt({name:"mobile-web-app-capable",content:"yes"}),Vt({name:"theme-color",content:"black"})],Lc=[Vt({name:"apple-mobile-web-app-capable",content:"yes"}),Vt({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(Ci={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:Ci,exists:function(){return document.querySelector('link[rel="'+Ci.rel+'"]')}})];function Vt(e){return{tagName:"meta",attributes:e,exists:function(){return document.querySelector('meta[name="'+e.name+'"]')}}}var Ne,rt,dA,Mc=G(5928),Sc=G.n(Mc),Dc=St,No="loading-screen";function vi(e){var t=Ne.hasAttribute("embedded"),n=dA(Ne.canvas,t,Ne.maxCanvasSize,Ne.is("vr-mode"));e.aspect=n.width/n.height,e.updateProjectionMatrix(),Ne.renderer.setSize(n.width,n.height,!1)}const Ct=[];var uA=Wt()("core:propertyTypes:warn"),yr={},kc=/[,> .[\]:]/,Rc=/url\((.+)\)/;function ve(e,t,n,i,r,o){if(e in yr)throw new Error("Property type "+e+" is already registered.");yr[e]={default:t,parse:n||Tc,stringify:i||qn,equals:r||gA,isCacheable:o!==!1}}function jo(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Tt(e){var t,n;return typeof e!="string"?e:(n=e.match(Rc))?n[1]:e.charAt(0)==="#"?(t=document.getElementById(e.substring(1)))?t.tagName==="CANVAS"||t.tagName==="VIDEO"||t.tagName==="IMG"?t:t.getAttribute("src"):void uA('"'+e+'" asset not found.'):e}function Ft(e){return e.getAttribute?e.getAttribute("id")?"#"+e.getAttribute("id"):e.getAttribute("src"):qn(e)}function Tc(e){return e}function qn(e){return e===null?"null":e.toString()}function gA(e,t){return e===t}function _o(e){return parseInt(e,10)}function bi(e,t,n){return jn(e,t,n)}function Bi(e,t){if(e===null)return!0;if(typeof e!="object"||Object.keys(e).length!==t)return!1;var n=e.x,i=e.y,r=e.z,o=e.w;return!(typeof n!="number"||typeof i!="number"||t>2&&typeof r!="number"||t>3&&typeof o!="number")}ve("audio","",Tt,Ft),ve("array",[],function(e){return Array.isArray(e)?e:e&&typeof e=="string"?e.split(",").map(function(t){return t.trim()}):[]},function(e){return e.join(", ")},jo),ve("asset","",Tt,Ft),ve("boolean",!1,function(e){return e!=="false"&&e!==!1}),ve("color","#FFF"),ve("int",0,_o),ve("number",0,function(e){return parseFloat(e,10)}),ve("map","",Tt,Ft),ve("model","",Tt,Ft),ve("selector",null,function(e){return e?typeof e!="string"?e:e[0]!=="#"||kc.test(e)?document.querySelector(e):document.getElementById(e.substring(1)):null},function(e){return e.getAttribute?"#"+e.getAttribute("id"):qn(e)},gA,!1),ve("selectorAll",null,function(e){return e?typeof e!="string"?e:Array.prototype.slice.call(document.querySelectorAll(e),0):null},function(e){return e instanceof Array?e.map(function(t){return"#"+t.getAttribute("id")}).join(", "):qn(e)},jo,!1),ve("src","",function(e){return uA("`src` property type is deprecated. Use `asset` instead."),Tt(e)},Ft),ve("string",""),ve("time",0,_o),ve("vec2",{x:0,y:0},bi,Mn,Sn),ve("vec3",{x:0,y:0,z:0},bi,Mn,Sn),ve("vec4",{x:0,y:0,z:0,w:1},bi,Mn,Sn);var Fc=function(e,t){return(e!=="audio"||typeof t=="string")&&!(e==="array"&&!Array.isArray(t))&&(e!=="asset"||typeof t=="string")&&(e!=="boolean"||typeof t=="boolean")&&(e!=="color"||typeof t=="string")&&(e!=="int"||typeof t=="number")&&(e!=="number"||typeof t=="number")&&(e!=="map"||typeof t=="string")&&(e!=="model"||typeof t=="string")&&(e!=="selector"||typeof t=="string"||t===null)&&(e!=="selectorAll"||typeof t=="string"||t===null)&&(e!=="src"||typeof t=="string")&&(e!=="string"||typeof t=="string")&&(e!=="time"||typeof t=="number")&&(e==="vec2"?Bi(t,2):e==="vec3"?Bi(t,3):e!=="vec4"||Bi(t,4))},Uc=yr,Vn=ee("core:schema:warn");function ei(e){return"type"in e?typeof e.type=="string":"default"in e}function $t(e,t){var n;if(ei(e))return Ir(e,t);for(n in e)e[n]=Ir(e[n],t);return e}function Ir(e,t){var n,i,r=e.default,o=e.type;return e.type?e.type==="bool"?o="boolean":e.type==="float"&&(o="number"):o=r===void 0||typeof r!="boolean"&&typeof r!="number"?Array.isArray(r)?"array":"string":typeof r,(i=Uc[o])||Vn("Unknown property type for component `"+t+"`: "+o),n=!!e.parse,e.parse=e.parse||i.parse,e.stringify=e.stringify||i.stringify,e.equals=e.equals||i.equals,e.isCacheable=e.isCacheable===!0||i.isCacheable,e.type=o,"default"in e?n||Fc(o,r)||Vn("Default value `"+r+"` does not match type `"+o+"` in component `"+t+"`"):e.default=i.default,e}var Ut,fA=(Ut=[],function(e,t,n,i,r){var o,s,A,a;for(s in Ut.length=0,n?e:t)n&&e[s]===void 0||Ut.push(s);if(e===null||typeof e!="object")return e;for(s in e)e[s]===void 0||t[s]||r||Vn("Unknown property `"+s+"` for component/system `"+i+"`.");for(o=0;o<Ut.length;o++){if(A=t[s=Ut[o]],a=e[s],!t[s])return;e[s]=ti(a,A)}return e});function ti(e,t,n){return e!=null&&e!==""||(e=t.default,Array.isArray(e)&&(e=e.slice())),t.parse(e,t.default,n)}function pA(e,t){var n,i,r,o,s={};for(n in e)i=t[n],typeof(o=r=e[n])=="object"&&(o=io(r,i),i||Vn("Unknown component property: "+n)),o!==void 0&&(s[n]=o);return s}function io(e,t){return typeof e!="object"?e:t&&e!==null?t.stringify(e):JSON.stringify(e)}var ue={},qt=ti,mA=$t,Oc=ei,Pc=pA,Gc=io,yi=St,zt=ee("core:component:warn"),Nc=document.currentScript,jc=new RegExp("[A-Z]+"),EA={},_c=Object.freeze({}),Bt=[],Hc={get:function(e,t){return e.getComputedPropertyValue(t)},set:function(e,t,n){return t in e.schema?e.recomputeProperty(t,n):n!==void 0&&e.handleUnknownProperty(t,n),!0}},Xt=function(e,t,n){var i=this;if(this.sceneOnly&&!e.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(n&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=e,this.id=n,this.attrName=this.name+(n?"__"+n:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=EA[this.name];var r=this.events;this.events={},function(o,s){var A;for(A in s)o.events[A]=s[A].bind(o)}(this,r),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),Kt(this.data,this.schema),this.oldData=this.objectPool.use(),Kt(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,Hc)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.throttledEmitComponentChanged=aA(function(){e.emit("componentchanged",i.evtDetail,!1)},200),this.updateProperties(t,!0)};Xt.prototype={schema:{},init:function(){},events:{},update:function(e){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(e){var t=this.schema;return typeof e=="string"?e:this.isSingleProperty?Gc(e,t):(e=Pc(e,t),yi.stringify(e))},flushToDOM:function(e){var t=e?this.data:this.attrValue;t!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(t))},updateProperties:function(e,t){var n=this.el;this.updateData(e,t),(n.hasLoaded||n.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var e,t=this.el;t.initializingComponents[this.name]||(t.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete t.initializingComponents[this.name],e=this.isObjectBased?_c:void 0,this.dataChanged=!1,this.storeOldData(),this.update(e),t.isPlaying&&this.play(),t.emit("componentinitialized",this.evtDetail,!1))},updateData:function(e,t){this.isSingleProperty?this.recomputeProperty(void 0,e):(t?(Wr(this.attrValue),this.recomputeData(e),this.schemaChangeRequired=!!this.updateSchema):typeof e=="string"?yi.parse(e,this.attrValueProxy):Le(this.attrValueProxy,e),this.updateSchemaIfNeeded(e))},updateSchemaIfNeeded:function(e){if(this.schemaChangeRequired&&this.updateSchema)for(var t in Bt.length=0,this.updateSchema(this.data),Kt(this.data,this.schema),this.recomputeData(e),this.schemaChangeRequired=!1,this.attrValue)this.attrValue[t]!==void 0&&Bt.indexOf(t)===-1&&(t in this.schema||zt("Unknown property `"+t+"` for component `"+this.name+"`."));for(var n=0;n<Bt.length;n++)zt("Unknown property `"+Bt[n]+"` for component `"+this.name+"`.");Bt.length=0},callUpdateHandler:function(){if(this.isPositionRotationScale||this.dataChanged){this.dataChanged=!1;var e=this.oldData;this.oldDataInUse=!0,this.update(e),e!==this.oldData&&this.objectPool.recycle(e),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(e){(this.isSingleProperty||e in this.schema)&&(e?this.attrValue[e]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(e,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(e){var t;t=Le({},ue[this.name].schema),Le(t,e),this.schema=mA(t),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(e){var t=this.el.mixinEls,n=this.attrValue&&e?this.attrValue[e]:this.attrValue;if(n!==void 0)return n;for(var i=t.length-1;i>=0;i--){var r=t[i].getAttribute(this.attrName);if(r!==null&&(!e||e in r))return e?r[e]:r}return e?this.schema[e].default:this.schema.default},recomputeProperty:function(e,t){var n=e?this.schema[e]:this.schema;if(t!=null){this.attrValue===void 0&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var i=e?this.attrValue[e]:this.attrValue;typeof(i=n.isCacheable?qt(t,n,i):t)=="string"&&(i=t===""?void 0:t),e?this.attrValue[e]=i:this.attrValue=i}this.oldDataInUse&&(this.oldData=this.objectPool.use(),Kt(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var r=e?this.oldData[e]:this.oldData,o=e?this.data[e]:this.data,s=qt(this.getComputedPropertyValue(e),n,o);return n.type!=="array"||e||(s=eo(s)),n.equals(s,r)||(this.dataChanged=!0,n.schemaChange&&(this.schemaChangeRequired=!0)),e?this.data[e]=s:this.data=s,s},handleUnknownProperty:function(e,t){this.attrValue===void 0&&(this.attrValue=this.objectPool.use()),this.attrValue[e]=t,this.deferUnknownPropertyWarnings?Bt.push(e):this.silenceUnknownPropertyWarnings||zt("Unknown property `"+e+"` for component `"+this.name+"`.")},storeOldData:function(){var e;if(this.isObjectBased)if(this.isSingleProperty)this.oldData=qt(this.data,this.schema,this.oldData);else for(e in this.schema)this.data[e]!==void 0&&(this.data[e]&&typeof this.data[e]=="object"?this.oldData[e]=qt(this.data[e],this.schema[e],this.oldData[e]):this.oldData[e]=this.data[e]);else this.oldData=this.data},recomputeData:function(e){var t;if(this.isSingleProperty)this.recomputeProperty(void 0,e);else{for(t in this.schema)this.attrValueProxy[t]=void 0;e&&typeof e=="object"?Le(this.attrValueProxy,e):typeof e=="string"&&yi.parse(e,this.attrValueProxy)}},eventsAttach:function(){var e;for(e in this.eventsDetach(),this.events)this.el.addEventListener(e,this.events[e])},eventsDetach:function(){var e;for(e in this.events)this.el.removeEventListener(e,this.events[e])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};var CA={};function P(e,t){var n,i,r,o,s,A={};if(document.currentScript&&document.currentScript!==Nc&&Ct.forEach(function(l){l.hasLoaded||document.currentScript.compareDocumentPosition(l)!==Node.DOCUMENT_POSITION_FOLLOWING&&(zt("The component `"+e+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(CA[e]=!0))}),jc.test(e)===!0&&zt("The component name `"+e+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+e.toLowerCase()+"`"),e.indexOf("__")!==-1)throw new Error("The component name `"+e+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(t).forEach(function(l){A[l]={value:t[l],writable:!0}}),ue[e])throw new Error("The component `"+e+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");((n=function(l,c,d){Xt.call(this,l,c,d)}).prototype=Object.create(Xt.prototype,A)).name=e,n.prototype.isPositionRotationScale=e==="position"||e==="rotation"||e==="scale",n.prototype.constructor=n,n.prototype.system=cr&&Ze[e],n.prototype.play=(o=n.prototype.play,function(){var l=this.el.sceneEl,c=this.el.isPlaying&&!this.isPlaying;this.initialized&&c&&(o.call(this),this.isPlaying=!0,this.eventsAttach(),Ho(this)&&l.addBehavior(this))}),n.prototype.pause=(s=n.prototype.pause,function(){var l=this.el.sceneEl;this.isPlaying&&(s.call(this),this.isPlaying=!1,this.eventsDetach(),Ho(this)&&l.removeBehavior(this))}),i=Le(mA(n.prototype.schema,n.prototype.name)),n.prototype.isSingleProperty=r=Oc(n.prototype.schema),n.prototype.isObjectBased=!r||r&&(qo(i.default)||qo(qt(void 0,i))),EA[e]=zr(),ue[e]={Component:n,dependencies:n.prototype.dependencies,before:n.prototype.before,after:n.prototype.after,isSingleProperty:n.prototype.isSingleProperty,isObjectBased:n.prototype.isObjectBased,multiple:n.prototype.multiple,sceneOnly:n.prototype.sceneOnly,name:e,schema:i,stringify:n.prototype.stringify};for(var a=0;a<Ct.length;a++)Ct[a].emit("componentregistered",{name:e},!1);return n}function Ho(e){return e.tick||e.tock}function qo(e){return e&&e.constructor===Object&&!(e instanceof window.HTMLElement)}var zn=!1;function wr(){zn||(zn=!0,setTimeout(function(){document.dispatchEvent(new CustomEvent("aframeready"))}))}var qc=St,Ze={},Wn=function(e){var t=lr&&ue[this.name];this.el=e,this.sceneEl=e,t&&(t.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};function Fe(e,t){var n,i,r={},o=hA(document);if(Object.keys(t).forEach(function(s){r[s]={value:t[s],writable:!0}}),Ze[e])throw new Error("The system `"+e+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(i=function(s){Wn.call(this,s)},(i.prototype=Object.create(Wn.prototype,r)).name=e,i.prototype.constructor=i,i.prototype.schema=Le($t(i.prototype.schema)),Ze[e]=i,zn)for(n=0;n<o.length;n++)o[n].initSystem(e)}Wn.prototype={schema:{},init:function(){},update:function(e){},updateProperties:function(e){var t=this.data;Object.keys(this.schema).length!==0&&(this.buildData(e),this.update(t))},buildData:function(e){var t=this.schema;Object.keys(t).length!==0&&(e=e||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),ei(t)?this.data=ti(e,t):this.data=fA(qc.parse(e)||{},t,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}};var Ii=ee("core:a-node:warn"),xr={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function Vc(e){return e.tagName.toLowerCase()in xr||e.isANode}class Be extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isANode=!0,this.mixinEls=[]}connectedCallback(){zn?this.doConnectedCallback():document.addEventListener("aframeready",this.connectedCallback.bind(this))}doConnectedCallback(){var t;this.sceneEl=this.closestScene(),this.sceneEl||Ii("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(t=this.getAttribute("mixin"))&&this.updateMixins(t)}attributeChangedCallback(t,n,i){i!==this.computedMixinStr&&(t!=="mixin"||this.isMixin||this.updateMixins(i,n))}closestScene(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}closest(t){for(var n=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,i=this;i&&!n.call(i,t);)i=i.parentElement;return i}disconnectedCallback(){this.hasLoaded=!1}load(t,n){var i,r=this;this.hasLoaded||(n=n||Vc,i=this.getChildren().filter(n).map(function(o){return new Promise(function(s,A){if(o.hasLoaded)return s();o.addEventListener("loaded",s),o.addEventListener("error",A)})}),Promise.allSettled(i).then(function(o){o.forEach(function(s){s.status==="rejected"&&Ii("Rendering scene with errors on node: ",s.reason.target)}),r.isLoading=!0,r.setupMutationObserver(),t&&t(),r.isLoading=!1,r.hasLoaded=!0,r.emit("loaded-private",void 0,!1),r.emit("loaded",void 0,!1)}))}setupMutationObserver(){var t=this;new MutationObserver(function(n){var i;for(i=0;i<n.length;i++)if(n[i].type==="attributes"){var r=n[i].attributeName,o=window.HTMLElement.prototype.getAttribute.call(t,r),s=n[i].oldValue;t.attributeChangedCallback(r,s,o)}}).observe(this,{attributes:!0,attributeOldValue:!0})}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(t,n){var i,r,o,s=Be.newMixinIdArray,A=Be.oldMixinIdArray,a=Be.mixinIds;for(s.length=0,A.length=0,r=t?tt(t.trim(),/\s+/):s,o=n?tt(n.trim(),/\s+/):A,a.newMixinIds=r,a.oldMixinIds=o,i=0;i<o.length;i++)r.indexOf(o[i])===-1&&this.unregisterMixin(o[i]);for(this.computedMixinStr="",this.mixinEls.length=0,i=0;i<r.length;i++)this.registerMixin(r[i]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),r.length===0&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),a}registerMixin(t){var n,i,r,o=document.getElementById(t);if(o){if(r=o.getAttribute("mixin"))for(n=tt(r.trim(),/\s+/),i=0;i<n.length;i++)this.registerMixin(n[i]);this.computedMixinStr=this.computedMixinStr+" "+o.id,this.mixinEls.push(o)}else Ii("No mixin was found with id `%s`",t)}setAttribute(t,n){t==="mixin"&&this.updateMixins(n),window.HTMLElement.prototype.setAttribute.call(this,t,n)}unregisterMixin(t){var n,i=this.mixinEls;for(n=0;n<i.length;++n)if(t===i[n].id){i.splice(n,1);break}}emit(t,n,i,r){var o=Be.evtData;i===void 0&&(i=!0),o.bubbles=!!i,o.detail=n,r&&(o=Le({},r,o)),this.dispatchEvent(new CustomEvent(t,o))}}Be.evtData={},Be.newMixinIdArray=[],Be.oldMixinIdArray=[],Be.mixinIds={},customElements.define("a-node",Be);var zc=ee("core:a-entity:debug"),wi=ee("core:a-entity:warn"),Kn="__",xi=["position","rotation","scale","visible"],Wc={once:!0};class Ce extends Be{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new h.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(t,n,i){var r=this.components[t];super.attributeChangedCallback(),r&&r.justInitialized&&i===""?delete r.justInitialized:(r||i!==null)&&this.setEntityAttribute(t,n,i)}doConnectedCallback(){var t,n,i=this;super.doConnectedCallback(),n=this.sceneEl,this.addToParent(),this.isScene||(n?!(t=n.querySelector("a-assets"))||t.hasLoaded?this.load():t.addEventListener("loaded",function(){i.load()}):this.load())}disconnectedCallback(){var t;if(this.parentEl){for(t in this.components)this.removeComponent(t,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(t){return this.object3DMap[t]}setObject3D(t,n){var i,r=this;if(!(n instanceof h.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(i=this.getObject3D(t))&&this.object3D.remove(i),n.el=this,n.children.length&&n.traverse(function(o){o.el=r}),this.object3D.add(n),this.object3DMap[t]=n,this.emit("object3dset",{object:n,type:t})}removeObject3D(t){var n=this.getObject3D(t);n?(this.object3D.remove(n),delete this.object3DMap[t],this.emit("object3dremove",{type:t})):wi("Tried to remove `Object3D` of type:",t,"which was not defined.")}getOrCreateObject3D(t,n){var i=this.getObject3D(t);return!i&&n&&(i=new n,this.setObject3D(t,i)),wi("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),i}add(t){if(!t.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(t.object3D),this.emit("child-attached",{el:t})}addToParent(){var t=this.parentEl=this.parentNode;t&&t.add&&!this.attachedToParent&&(t.add(this),this.attachedToParent=!0)}removeFromParent(){var t=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,t.emit("child-detached",{el:this})}load(){var t=this;!this.hasLoaded&&this.parentEl&&super.load.call(this,function(){t.parentEl&&(t.updateComponents(),(t.isScene||t.parentEl.isPlaying)&&t.play())})}remove(t){t?this.object3D.remove(t.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var t=this.children,n=[],i=0;i<t.length;i++){var r=t[i];r instanceof Ce&&n.push(r)}return n}initComponent(t,n,i){var r,o,s,A;A=(s=tt(t,Kn))[0],o=s.length>2?s.slice(1).join("__"):s[1],ue[A]&&(Vo(this,t)||n!==void 0||i)&&(t in this.components||(this.initComponentDependencies(A),r=new ue[A].Component(this,n,o),this.isPlaying&&r.play(),this.hasAttribute(t)||(r.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,t,"")),zc("Component initialized: %s",t)))}initComponentDependencies(t){var n,i;if(ue[t]&&(n=ue[t].dependencies))for(i=0;i<n.length;i++)this.initComponent(n[i],window.HTMLElement.prototype.getAttribute.call(this,n[i])||void 0,!0)}removeComponent(t,n){var i;(i=this.components[t])&&(i.initialized?(i.pause(),i.remove(),n&&(i.destroy(),delete this.components[t],this.hasAttribute(t)&&window.HTMLElement.prototype.removeAttribute.call(this,t)),this.emit("componentremoved",i.evtDetail,!1)):this.addEventListener("componentinitialized",function r(o){o.detail.name===t&&(this.removeComponent(t,n),this.removeEventListener("componentinitialized",r))}))}updateComponents(){var t,n,i,r,o,s,A=this.componentsToUpdate;if(this.hasLoaded||this.isLoading){for(i=0;i<this.mixinEls.length;i++)for(r in this.mixinEls[i].componentCache)Qi(r)&&(A[r]=!0);if(this.getExtraComponents)for(r in n=this.getExtraComponents())Qi(r)&&(A[r]=!0);for(i=0;i<this.attributes.length;++i)r=this.attributes[i].name,xi.indexOf(r)===-1&&Qi(r)&&(A[r]=!0);for(i=0;i<xi.length;i++)r=xi[i],this.hasAttribute(r)&&this.updateComponent(r,this.getDOMAttribute(r));for(r in A)o=this.getDOMAttribute(r),t=(s=n&&n[r])?s.constructor===Object?Le(s,Yt(o||{})):o||s:o,this.updateComponent(r,t),delete A[r]}}updateComponent(t,n,i){var r=this.components[t];if(r)return n!==null||Vo(this,t)?void r.updateProperties(n,i):void this.removeComponent(t,!0);this.initComponent(t,n,!1)}removeAttribute(t,n){var i=this.components[t];i&&n===void 0&&this.removeComponent(t,!0),i&&n!==void 0?i.resetProperty(n):(t==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,t))}play(){var t,n,i;if(!this.isPlaying&&(this.hasLoaded||this.isLoading)){for(i in this.isPlaying=!0,this.components)this.components[i].play();for(t=this.getChildEntities(),n=0;n<t.length;n++)t[n].play();this.emit("play")}}pause(){var t,n,i;if(this.isPlaying){for(i in this.isPlaying=!1,this.components)this.components[i].pause();for(t=this.getChildEntities(),n=0;n<t.length;n++)t[n].pause();this.emit("pause")}}setEntityAttribute(t,n,i){if(ue[t]||this.components[t])this.updateComponent(t,i);else if(t==="mixin"){if(i===this.computedMixinStr)return;this.mixinUpdate(i,n)}}mixinUpdate(t,n,i){var r,o,s,A,a=Ce.componentsUpdated,l=this;if(i||(n=n||this.getAttribute("mixin")),this.hasLoaded){for(s=this.updateMixins(t,n),a.length=0,A=0;A<this.mixinEls.length;A++)for(r in this.mixinEls[A].componentCache)a.indexOf(r)===-1&&(this.components[r]?this.components[r].handleMixinUpdate():this.initComponent(r,null),a.push(r));for(A=0;A<s.oldMixinIds.length;A++)if(o=document.getElementById(s.oldMixinIds[A]))for(r in o.componentCache)a.indexOf(r)===-1&&this.components[r]&&(this.getDOMAttribute(r)?this.components[r].handleMixinUpdate():this.removeComponent(r,!0))}else this.addEventListener("loaded-private",function(){l.mixinUpdate(t,n,!0)},Wc)}setAttribute(t,n,i){var r,o,s,A,a,l=Ce.singlePropUpdate;if(s=(A=t.indexOf(Kn))>0?t.substring(0,A):t,!ue[s])return t==="mixin"&&this.mixinUpdate(n),void super.setAttribute.call(this,t,n);if(!this.components[t]&&this.hasAttribute(t)&&this.updateComponent(t,window.HTMLElement.prototype.getAttribute.call(this,t)),i!==void 0&&typeof n=="string"&&n.length>0&&typeof Yt(n)=="string"){for(a in l)delete l[a];(r=l)[n]=i,o=!1}else r=n,o=i===!0;this.updateComponent(t,r,o),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[t].flushToDOM()}flushToDOM(t){var n,i,r,o=this.components,s=this.children;for(r in o)o[r].flushToDOM();if(t)for(i=0;i<s.length;++i)(n=s[i]).flushToDOM&&n.flushToDOM(t)}getAttribute(t){var n,i,r,o;return t==="position"?this.object3D.position:t==="rotation"?(i=h.MathUtils.radToDeg,r=this.object3D.rotation,(o=this.rotationObj).x=i(r.x),o.y=i(r.y),o.z=i(r.z),o):t==="scale"?this.object3D.scale:t==="visible"?this.object3D.visible:(n=this.components[t])?n.data:window.HTMLElement.prototype.getAttribute.call(this,t)}getDOMAttribute(t){var n=this.components[t];return n?n.attrValue:window.HTMLElement.prototype.getAttribute.call(this,t)}addState(t){this.is(t)||(this.states.push(t),this.emit("stateadded",t))}removeState(t){var n=this.states.indexOf(t);n!==-1&&(this.states.splice(n,1),this.emit("stateremoved",t))}is(t){return this.states.indexOf(t)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var t;if(this.parentNode)wi("Entity can only be destroyed if detached from scenegraph.");else for(t in this.components)this.components[t].destroy()}}function Vo(e,t){return!(!e.components[t]||!e.components[t].attrValue)||function(n,i){var r,o=!1;for(r=0;r<i.length&&!(o=i[r].hasAttribute(n));++r);return o}(t,e.mixinEls)}function Qi(e){return e.indexOf(Kn)!==-1&&(e=tt(e,Kn)[0]),!!ue[e]}function Kc(e){if(e.data&&e.data.type==="vr")switch(e.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}Ce.componentsUpdated=[],Ce.singlePropUpdate={},customElements.define("a-entity",Ce),Zt()&&window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)});var Li=ee("core:a-scene:warn"),Yc=Zt(),zo=At(),Jc=Xn;class vA extends Ce{constructor(){var t;super(),(t=this).clock=new h.Clock,t.isIOS=Yc,t.isMobile=zo,t.hasWebXR=Jc,t.isAR=!1,t.isScene=!0,t.object3D=new h.Scene,t.resize=t.resize.bind(t),t.render=t.render.bind(t),t.systems={},t.systemNames=[],t.time=t.delta=0,t.usedOfferSession=!1,t.componentOrder=[],t.behaviors={},t.hasLoaded=!1,t.isPlaying=!1,t.originalHTML=t.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var t=this,n=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),function(i){var r;function o(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||i.exitVR(),document.activeElement.blur(),document.body.focus()}(r=document.createElement("canvas")).classList.add("a-canvas"),r.dataset.aframeCanvas=!0,i.appendChild(r),document.addEventListener("fullscreenchange",o),document.addEventListener("mozfullscreenchange",o),document.addEventListener("webkitfullscreenchange",o),document.addEventListener("MSFullscreenChange",o),r.addEventListener("touchmove",function(s){s.preventDefault()},{passive:!1}),i.canvas=r,i.emit("render-target-loaded",{target:r}),setTimeout(i.resize.bind(i),0)}(this),this.setupRenderer(),function(i,r){dA=r;var o,s,A,a,l,c,d,f,p,b,E=(Ne=i).hasAttribute(No)?Dc.parse(Ne.getAttribute(No)):void 0,C=E&&E.dotsColor||"white",v=E&&E.backgroundColor||"#24CAFF";(E===void 0||E.enabled==="true"||E.enabled===void 0)&&(o=new h.Scene,s=new h.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),A=new h.MeshBasicMaterial({color:C}),a=new h.Mesh(s,A),l=a.clone(),c=a.clone(),d=new h.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),f=new h.Clock,p=0,b=function(){Ne.renderer.render(o,d),p=f.getElapsedTime()%4,a.visible=p>=1,l.visible=p>=2,c.visible=p>=3},o.background=new h.Color(v),o.add(d),a.position.set(-1,0,-15),l.position.set(0,0,-15),c.position.set(1,0,-15),d.add(a),d.add(l),d.add(c),(rt=document.createElement("div")).className="a-loader-title",rt.innerHTML=document.title,rt.style.display="none",rt.setAttribute(be,""),Ne.appendChild(rt),setTimeout(function(){Ne.hasLoaded||(vi(d),rt.style.display="block",window.addEventListener("resize",function(){vi(d)}),Ne.renderer.setAnimationLoop(b))},200))}(this,Yo),this.resize(),n||this.addFullScreenStyles(),cA()&&window.addEventListener("message",Kc.bind(this)),function(i){var r,o=document.head,s=o.querySelector("script"),A=[];return Qc.forEach(a),i.isIOS&&Lc.forEach(a),A;function a(l){l&&!l.exists()&&(r=function(c){if(c&&c.tagName){var d=document.createElement(c.tagName);return d.setAttribute(be,""),Le(d,c.attributes)}}(l),r&&(s?s.parentNode.insertBefore(r,s):o.appendChild(r),A.push(r)))}}(this),function(i){if(i.isMobile){var r=i.wakelock=new(Sc());i.addEventListener("enter-vr",function(){r.request()}),i.addEventListener("exit-vr",function(){r.release()})}}(this),this.enterVRBound=function(){t.enterVR()},this.exitVRBound=function(){t.exitVR()},window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){t.attachedCallbackPostCamera()}),this.initSystems(),this.componentOrder=Wo(ue,this.componentOrder),this.addEventListener("componentregistered",function(){t.componentOrder=Wo(ue,t.componentOrder)}),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){t.enterVR()})}attachedCallbackPostCamera(){var t=this;window.addEventListener("load",void 0),window.addEventListener("resize",function(){t.isIOS?setTimeout(t.resize,100):t.resize()}),this.play(),Ct.push(this)}initSystems(){var t;for(t in this.initSystem("camera"),Ze)t!=="camera"&&this.initSystem(t)}initSystem(t){this.systems[t]||(this.systems[t]=new Ze[t](this),this.systemNames.push(t))}disconnectedCallback(){var t=Ct.indexOf(this);super.disconnectedCallback(),Ct.splice(t,1),window.removeEventListener("sessionend",this.resize),this.removeFullScreenStyles(),this.renderer.dispose()}addBehavior(t){var n,i,r=this.behaviors[t.name];for(i in r||(r=this.behaviors[t.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}}),r)if(t[i]){if((n=r[i]).inUse){var o=n.markedForRemoval.indexOf(t);o!==-1&&n.markedForRemoval.splice(o,1)}n.array.indexOf(t)===-1&&n.array.push(t)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return Gr()}enterAR(){var t;if(!this.hasWebXR)throw t="Failed to enter AR mode, WebXR not supported.",new Error(t);if(!Nr())throw t="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(t);return this.enterVR(!0)}enterVR(t,n){var i,r=this,o=r.renderer.xr;if(n&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(r.usedOfferSession&&n)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var s=r.getAttribute("renderer");if(o.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var A=this.sceneEl.systems.webxr.sessionReferenceSpaceType;o.setReferenceSpaceType(A);var a=t?"immersive-ar":"immersive-vr";return i=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(c,d){var f=n?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);r.usedOfferSession|=n,f(a,i).then(function(p){n&&(r.usedOfferSession=!1),o.layersEnabled=i.requiredFeatures.indexOf("layers")!==-1,o.setSession(p).then(function(){o.setFoveation(s.foveationLevel),r.xrSession=p,r.systems.renderer.setWebXRFrameRate(p),p.addEventListener("end",r.exitVRBound),l(c)})},function(p){d(new Error("Failed to enter "+(a==="immersive-ar"?"AR":"VR")+" mode (`requestSession`)",{cause:p}))})})}throw new Error("Failed to enter "+(t?"AR":"VR")+" no WebXR")}return l(),Promise.resolve();function l(c){var d;t?r.addState("ar-mode"):r.addState("vr-mode"),r.emit("enter-vr",{target:r}),!r.hasWebXR&&r.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),r.addFullScreenStyles(),r.isMobile||r.checkHeadsetConnected()||((d=r.canvas).requestFullscreen||d.webkitRequestFullscreen||d.mozRequestFullScreen||d.msRequestFullscreen).apply(d,[{navigationUI:"hide"}]),r.resize(),c&&c()}}exitVR(){var t=this,n=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(n.enabled=!1,!this.hasWebXR)throw Error("Failed to exit VR - no WebXR");this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return t.removeState("vr-mode"),t.removeState("ar-mode"),t.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),t.hasAttribute("embedded")&&t.removeFullScreenStyles(),t.resize(),t.isIOS&&nA(t.canvas),t.renderer.setPixelRatio(window.devicePixelRatio),t.emit("exit-vr",{target:t}),Promise.resolve()}getAttribute(t){var n=this.systems[t];return n?n.data:Ce.prototype.getAttribute.call(this,t)}getDOMAttribute(t){var n=this.systems[t];return n?n.data:Ce.prototype.getDOMAttribute.call(this,t)}setAttribute(t,n,i){if(Ze[t]){Be.prototype.setAttribute.call(this,t,n);var r=this.systems[t];r&&r.updateProperties(n)}else Ce.prototype.setAttribute.call(this,t,n,i)}removeBehavior(t){var n,i,r,o=this.behaviors[t.name];for(i in o)t[i]&&(r=(n=o[i]).array.indexOf(t))!==-1&&(n.inUse?n.markedForRemoval.indexOf(t)===-1&&n.markedForRemoval.push(t):(n.array[r]=n.array[n.array.length-1],n.array.pop()))}resize(){var t,n,i=this.camera,r=this.canvas,o=this.renderer.xr.isPresenting;t=this.renderer.xr.enabled&&o,!i||!r||this.is("vr-mode")&&(this.isMobile||t)||(n=Yo(r,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode")),i.aspect=n.width/n.height,i.updateProjectionMatrix(),this.renderer.setSize(n.width,n.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var t,n,i,r=this;i={alpha:!0,antialias:!zo,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&((n=Yt(this.getAttribute("renderer"))).precision&&(i.precision=n.precision+"p"),n.antialias&&n.antialias!=="auto"&&(i.antialias=n.antialias==="true"),n.logarithmicDepthBuffer&&n.logarithmicDepthBuffer!=="auto"&&(i.logarithmicDepthBuffer=n.logarithmicDepthBuffer==="true"),n.alpha&&(i.alpha=n.alpha==="true"),n.stencil&&(i.stencil=n.stencil==="true"),n.multiviewStereo&&(i.multiviewStereo=n.multiviewStereo==="true"),this.maxCanvasSize={width:n.maxCanvasWidth?parseInt(n.maxCanvasWidth):this.maxCanvasSize.width,height:n.maxCanvasHeight?parseInt(n.maxCanvasHeight):this.maxCanvasSize.height});var o=["WebGLRenderer","WebGPURenderer"].find(function(s){return h[s]});(t=this.renderer=new h[o](i)).xr.setPoseTarget||(t.xr.setPoseTarget=function(){}),t.setPixelRatio(window.devicePixelRatio),this.camera&&t.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){t.xr.setPoseTarget(r.camera.el.object3D)})}play(){var t=this,n=this;this.renderStarted?Ce.prototype.play.call(this):(this.addEventListener("loaded",function(){var i=this.renderer;Ce.prototype.play.call(this),n.renderStarted||(n.resize(),n.renderer&&(window.performance&&window.performance.mark("render-started"),window.removeEventListener("resize",vi),rt&&(rt.style.display="none"),i.setAnimationLoop(this.render),n.renderStarted=!0,n.emit("renderstart")))}),setTimeout(function(){Ce.prototype.load.call(t)}))}updateComponent(t){t in Ze||Ce.prototype.updateComponent.apply(this,arguments)}tick(t,n){var i,r=this.systems;for(this.callComponentBehaviors("tick",t,n),i=0;i<this.systemNames.length;i++)r[this.systemNames[i]].tick&&r[this.systemNames[i]].tick(t,n)}tock(t,n,i){var r,o=this.systems;for(this.callComponentBehaviors("tock",t,n),r=0;r<this.systemNames.length;r++)o[this.systemNames[r]].tock&&o[this.systemNames[r]].tock(t,n,i)}render(t,n){var i=this.renderer;this.frame=n,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta);var r=null;if(this.is("ar-mode")&&(r=this.object3D.background,this.object3D.background=null),i.render(this.object3D,this.camera),r&&(this.object3D.background=r),this.isPlaying){var o=i.xr.isPresenting?i.xr.getCamera():this.camera;this.tock(this.time,this.delta,o)}}callComponentBehaviors(t,n,i){for(var r,o=0;o<this.componentOrder.length;o++){var s=this.behaviors[this.componentOrder[o]];if(s){var A=s[t];for(A.inUse=!0,r=0;r<A.array.length;r++)A.array[r].isPlaying&&A.array[r][t](n,i);for(A.inUse=!1,r=0;r<A.markedForRemoval.length;r++)this.removeBehavior(A.markedForRemoval[r]);A.markedForRemoval.length=0}}}}function Wo(e,t){var n,i,r={},o=t||[];for(i in o.length=0,e){var s=e[i];if(s!==void 0){var A=s.before?s.before.slice(0):[],a=s.after?s.after.slice(0):[];r[i]={before:A,after:a,visited:!1,done:!1}}}for(i in r)for(n=0;n<r[i].before.length;n++){var l=r[i].before[n];l in r?r[l].after.push(i):Li("Invalid ordering constraint, no component named `"+l+"` referenced by `"+i+"`")}function c(d){if(d in r&&!r[d].done)if(r[d].visited)Li("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");else{r[d].visited=!0;for(var f=0;f<r[d].after.length;f++){var p=r[d].after[f];p in r||Li("Invalid before/after constraint, no component named `"+p+"` referenced in `"+d+"`"),c(p)}r[d].done=!0,o.push(d)}}for(i in r)r[i].done||c(i);return o}function Ko(e,t){var n,i=window.devicePixelRatio;return!t||t.width===-1&&t.height===-1||e.width*i<t.width&&e.height*i<t.height||(n=e.width/e.height,e.width*i>t.width&&t.width!==-1&&(e.width=Math.round(t.width/i),e.height=Math.round(t.width/n/i)),e.height*i>t.height&&t.height!==-1&&(e.height=Math.round(t.height/i),e.width=Math.round(t.height*n/i))),e}function Yo(e,t,n,i){return e.parentElement?t?Ko({height:e.parentElement.offsetHeight,width:e.parentElement.offsetWidth},n):function(r,o){var s;return s={height:document.body.offsetHeight,width:document.body.offsetWidth},o?s:Ko(s,r)}(n,i):{height:0,width:0}}customElements.define("a-scene",vA);var Xc=$t,lt={},ro=[],Qr=function(){};function xe(e,t){var n,i={};if(Object.keys(t).forEach(function(r){i[r]={value:t[r],writable:!0}}),lt[e])throw new Error("The geometry `"+e+"` has been already registered");return((n=function(){Qr.call(this)}).prototype=Object.create(Qr.prototype,i)).name=e,n.prototype.constructor=n,lt[e]={Geometry:n,schema:Xc(n.prototype.schema)},ro.push(e),n}Qr.prototype={schema:{},init:function(e){return this.geometry=new h.BufferGeometry,this.geometry},update:function(e){}};var oo=ee,Zc=Kr,$c=oo("extras:primitives:debug"),Jo=oo("extras:primitives:warn"),eh=oo("extras:primitives:error"),bA={};function we(e,t){if(e=e.toLowerCase(),!xr[e]){xr[e]=!0,$c("Registering <%s>",e),t.defaultAttributes&&Jo("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var n=t.mappings||{},i=class extends Ce{constructor(){super(),this.defaultComponentsFromPrimitive=t.defaultComponents||t.defaultAttributes||{},this.deprecated=t.deprecated||null,this.deprecatedMappings=t.deprecatedMappings||{},this.mappings=n,t.deprecated&&console.warn(t.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var r=this.mappings,o=this;Object.keys(r).forEach(function(s){var A;s!==s.toLowerCase()&&Jo("Mapping keys should be specified in lower case. The mapping key "+s+" may not be recognized"),ue[s]&&(A=r[s].replace(".","-"),r[A]=r[s],delete r[s],console.warn("The primitive "+o.tagName.toLowerCase()+" has a mapping collision. The attribute "+s+" has the same name as a registered component and has been renamed to "+A))})}getExtraComponents(){var r,o,s,A,a,l=this;for(o=eo(this.defaultComponentsFromPrimitive),(a=this.getAttribute("mixin"))&&(a=tt(a.trim(),/\s+/)).forEach(function(p){var b,E,C=document.getElementById(p);if(C){var v=C.rawAttributeCache,B=C.componentCache;for(var y in v){if(A=l.mappings[y])return void Xo(A,v[y],o);y in B&&(o[y]=(b=o[y],E=B[y],c(b)?d(E):c(E)?d(b):f(b)&&f(E)?Me(b,E):d(E)))}}}),s=0;s<this.attributes.length;s++)r=this.attributes[s],(A=this.mappings[r.name])&&Xo(A,r.value,o);return o;function c(p){return p===void 0}function d(p){return f(p)?Me({},p):p}function f(p){return p!==null&&p.constructor===Object}}attributeChangedCallback(r,o,s){var A=this.mappings[r];r in this.deprecatedMappings&&console.warn(this.deprecatedMappings[r]),r&&A?Zc(this,A,s):super.attributeChangedCallback(r,o,s)}};return customElements.define(e,i),i.mappings=n,bA[e]=i,i}eh("Trying to register primitive "+e+" that has been already previously registered")}function Xo(e,t,n){var i=Zn(e);i.constructor===Array?(n[i[0]]=n[i[0]]||{},n[i[0]][i[1]]=t.trim()):n[i]=t.trim()}var Ve={},BA=[],th={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},Lr=function(){};function at(e,t){var n,i={};if(Object.keys(t).forEach(function(r){i[r]={value:t[r],writable:!0}}),Ve[e])throw new Error("The shader "+e+" has already been registered");return((n=function(){Lr.call(this)}).prototype=Object.create(Lr.prototype,i)).name=e,n.prototype.constructor=n,Ve[e]={Shader:n,schema:$t(n.prototype.schema)},BA.push(e),n}Lr.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(e){return this.uniforms=this.initUniforms(),this.material=new(this.raw?h.RawShaderMaterial:h.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?h.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var e,t,n=this.schema,i={};for(e in n)n[e].is==="uniform"&&(t=th[n[e].type],i[e]={type:t,value:void 0});return i},update:function(e){var t,n,i=this.schema,r=this.uniforms;for(t in e)if(i[t]&&i[t].is==="uniform")if(i[t].type!=="map")r[t].value=this.parseValue(i[t].type,e[t]),r[t].needsUpdate=!0;else{if(!r[t]||r[t].value===e[t])continue;n="_texture_"+t,this.setMapOnTextureLoad(r,t,n),$n(n,t,this,e)}},parseValue:function(e,t){var n;switch(e){case"vec2":return new h.Vector2(t.x,t.y);case"vec3":return new h.Vector3(t.x,t.y,t.z);case"vec4":return new h.Vector4(t.x,t.y,t.z,t.w);case"color":return n=new h.Color(t),new h.Vector3(n.r,n.g,n.b);default:return t}},setMapOnTextureLoad:function(e,t,n){var i=this;this.el.addEventListener("materialtextureloaded",function(){e[t].value=i.material[n],e[t].needsUpdate=!0})}};var Mi=new h.FileLoader,Mr=ee("core:a-assets:warn");function nh(e){if(e.hasAttribute("autoplay")||e.getAttribute("preload")==="auto")return new Promise(function(t,n){if(e.readyState===4)return t();if(e.error)return n();function i(){for(var r=0,o=0;o<e.buffered.length;o++)r+=e.buffered.end(o)-e.buffered.start(o);r>=e.duration&&(e.tagName==="VIDEO"&&h.Cache.add(e.getAttribute("src"),e),t())}e.addEventListener("loadeddata",i,!1),e.addEventListener("progress",i,!1),e.addEventListener("error",n,!1)})}function Zo(e){var t=function(n){var i,r,o;return n.hasAttribute("crossorigin")||(i=n.getAttribute("src"))!==null&&(i.indexOf("://")===-1||(o=(r=i).indexOf("://")>-1?r.split("/")[2]:r.split("/")[0]).substring(0,o.indexOf(":"))===window.location.host)?n:(Mr('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',i),n.crossOrigin="anonymous",n.cloneNode(!0))}(e);return t.tagName&&t.tagName.toLowerCase()==="video"&&(t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")),t!==e&&(e.parentNode.appendChild(t),e.parentNode.removeChild(e)),t}customElements.define("a-assets",class extends Be{constructor(){super(),this.isAssets=!0,this.fileLoader=Mi,this.timeout=null}doConnectedCallback(){var e,t,n,i,r,o,s=this,A=[];if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(r=this.querySelectorAll("img"),e=0;e<r.length;e++)i=Zo(r[e]),A.push(new Promise(function(a,l){h.Cache.add(r[e].getAttribute("src"),i),i.complete?a():(i.onload=a,i.onerror=l)}));for(n=this.querySelectorAll("audio, video"),e=0;e<n.length;e++)(t=Zo(n[e])).src||t.srcObject||Mr("Audio/video asset has neither `src` nor `srcObject` attributes."),A.push(nh(t));this.getChildren().forEach(function(a){a.isAssetItem&&a.hasAttribute("src")&&A.push(new Promise(function(l,c){if(a.hasLoaded)return l();a.addEventListener("loaded",l),a.addEventListener("error",c)}))}),Promise.allSettled(A).then(function(){s.timeout!==null&&s.load()}),o=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){s.hasLoaded||(Mr("Asset loading timed out in",o,"ms"),s.timeout=null,s.emit("timeout"),s.load())},o)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(){return!1})}}),customElements.define("a-asset-item",class extends Be{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var e=this,t=this.getAttribute("src");Mi.setResponseType(this.getAttribute("response-type")||function(n){var i=function(o){var s=document.createElement("a");s.href=o;var A=s.search.replace(/^\?/,""),a=o.replace(A,"").replace("?","");return a.substring(a.lastIndexOf("/")+1)}(n),r=i.lastIndexOf(".");return r>=0&&i.slice(r,n.search(/\?|#|$/))===".glb"?"arraybuffer":"text"}(t)),Mi.load(t,function(n){e.data=n,Be.prototype.load.call(e)},function(n){e.emit("progress",{loadedBytes:n.loaded,totalBytes:n.total,xhr:n})},function(n){e.emit("error",{xhr:n},!1)})}});var ih=ee("core:cubemap:warn");class so extends HTMLElement{constructor(t){return super(t)}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){document.readyState==="complete"?so.prototype.doConnectedCallback.call(this):document.addEventListener("readystatechange",this.onReadyStateChange.bind(this))}doConnectedCallback(){this.srcs=this.validate()}validate(){var t,n=this.querySelectorAll("[src]"),i=[];if(n.length===6){for(t=0;t<n.length;t++)n[t].tagName==="IMG"?i.push(n[t]):i.push(n[t].getAttribute("src"));return i}ih("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",so),customElements.define("a-mixin",class extends Be{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(),this.cacheAttribute(e,n),this.updateEntities()}setAttribute(e,t){window.HTMLElement.prototype.setAttribute.call(this,e,t),this.cacheAttribute(e,t)}cacheAttribute(e,t){var n,i;i=tt(e,"__")[0],n=ue[i],t===void 0&&(t=window.HTMLElement.prototype.getAttribute.call(this,e)),this.rawAttributeCache[e]=t,n&&(this.componentCache[e]=this.parseComponentAttrValue(n,t))}parseComponentAttrValue(e,t){var n;return typeof t!="string"?t:(e.isSingleProperty?typeof(n=e.schema.parse(t))=="string"&&(n=t):n=Yt(t),n)}getAttribute(e){return this.componentCache[e]||window.HTMLElement.prototype.getAttribute.call(this,e)}cacheAttributes(){var e,t,n=this.attributes;for(t=0;t<n.length;t++)e=n[t].name,this.cacheAttribute(e)}updateEntities(){var e,t,n;if(this.sceneEl)for(t=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),n=0;n<t.length;n++)(e=t[n]).hasLoaded&&!e.isMixin&&e.mixinUpdate(this.id)}});const yA="1.7.0";var sn=new h.Color,an=new h.Color,$o=tA,es=Kr,Si={},IA="color",ts="rotation",wA="components";function ns(e){e.x=h.MathUtils.degToRad(e.x),e.y=h.MathUtils.degToRad(e.y),e.z=h.MathUtils.degToRad(e.z)}function Di(e,t,n){var i;for(i=0;i<t.length;i++)e.addEventListener(t[i],n)}function ki(e,t,n){var i;for(i=0;i<t.length;i++)e.removeEventListener(t[i],n)}function is(e,t){var n,i,r;for(i=Yn(t),r=e,n=0;n<i.length;n++)r=r[i[n]];if(r===void 0)throw console.log(e),new Error("[animation] property ("+t+") could not be found");return r}function rs(e,t,n,i){var r,o,s,A;for(t.startsWith("object3D.rotation")&&(n=h.MathUtils.degToRad(n)),o=Yn(t),A=e,r=0;r<o.length-1;r++)A=A[o[r]];s=o[o.length-1],i!==IA?A[s]=n:"r"in A[s]?(A[s].r=n.r,A[s].g=n.g,A[s].b=n.b):(A[s].x=n.r,A[s].y=n.g,A[s].z=n.b)}function Yn(e){return e in Si||(Si[e]=e.split(".")),Si[e]}function Ri(e){return e.isRawProperty||e.property.startsWith(wA)||e.property.startsWith("object3D")}P("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(e){return e===!0||e==="true"||e!==!1&&e!=="false"&&parseInt(e,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var e=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){e.animationIsPlaying=!1,e.el.emit("animationcomplete",e.eventDetail,!1),e.id&&e.el.emit("animationcomplete__"+e.id,e.eventDetail,!1)}}},update:function(e){var t=this.config,n=this.data;this.animationIsPlaying=!1,this.data.enabled&&n.property&&(t.autoplay=!1,t.direction=n.dir,t.duration=n.dur,t.easing=n.easing,t.elasticity=n.elasticity,t.loop=n.loop,t.round=n.round,this.createAndStartAnimation())},tick:function(e,t){this.animationIsPlaying&&(this.time+=t,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var e=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=Ln(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!e.autoplay||e.startEvents&&e.startEvents.length||(e.delay?setTimeout(this.beginAnimation,e.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=Ln(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var e,t,n,i=this.config,r=this.data,o=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(t in e=r.from===""?is(o,r.property):r.from,n=r.to,this.setColorConfig(e,n),e=this.fromColor,n=this.toColor,this.targetsArray.length=0,this.targetsArray.push(e),i.targets=this.targetsArray,n)i[t]=n[t];var s;i.update=(s={},function(A){var a;(a=A.animatables[0].target).r===s.r&&a.g===s.g&&a.b===s.b||rs(o,r.property,a,r.type)})}},updateConfigForDefault:function(){var e,t,n,i,r=this.config,o=this.data,s=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(e=o.from===""?Ri(o)?is(s,o.property):$o(s,o.property):o.from,n=o.to,isNaN(e||n)?(e=e&&e.toString(),n=n&&n.toString()):(e=parseFloat(e),n=parseFloat(n)),(t=o.to==="true"||o.to==="false"||o.to===!0||o.to===!1)&&(e=o.from==="true"||o.from===!0?1:0,n=o.to==="true"||o.to===!0?1:0),this.targets.aframeProperty=e,r.targets=this.targets,r.aframeProperty=n,r.update=function(A){var a;(a=A.animatables[0].target.aframeProperty)!==i&&(i=a,t&&(a=a>=1),Ri(o)?rs(s,o.property,a,o.type):es(s,o.property,a))})},updateConfigForVector:function(){var e,t,n,i,r=this.config,o=this.data,s=this.el,A=Yn(o.property),a=A[0]==="object3D"?A[1]:A[0];for(e in t=o.from!==""?jn(o.from):$o(s,a),n=jn(o.to),a===ts&&(ns(t),ns(n)),this.targetsArray.length=0,this.targetsArray.push(t),r.targets=this.targetsArray,n)r[e]=n[e];r.update=a!=="position"&&a!==ts&&a!=="scale"?function(){var l={};return function(c){var d=c.animatables[0].target;d.x===l.x&&d.y===l.y&&d.z===l.z||(l.x=d.x,l.y=d.y,l.z=d.z,es(s,o.property,d))}}():(i={},function(l){var c=l.animatables[0].target;c.x===i.x&&c.y===i.y&&c.z===i.z||(i.x=c.x,i.y=c.y,i.z=c.z,s.object3D[a].set(c.x,c.y,c.z))})},updateConfig:function(){var e;e=function(t,n){var i,r,o,s;return(o=n.split("."))[0]!=="object3D"||o[2]||o[1]!=="position"&&o[1]!=="rotation"&&o[1]!=="scale"?(r=o[0],s=o[1],(i=t.components[r]||ue[r])?s&&!i.schema[s]?null:s?i.schema[s].type:i.schema.type:null):"vec3"}(this.el,this.data.property),Ri(this.data)&&this.data.type===IA?this.updateConfigForRawColor():e==="vec2"||e==="vec3"||e==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(e){var t,n=this.data,i=this.el,r=this;return n.from===""&&!!n.property.startsWith(wA)&&(t=Yn(n.property)[1],!i.components[t]&&(i.addEventListener("componentinitialized",function o(s){s.detail.name===t&&(e(),r.animation=Ln(r.config),i.removeEventListener("componentinitialized",o))}),!0))},stopRelatedAnimations:function(){var e,t;for(t in this.el.components)e=this.el.components[t],t!==this.attrName&&e.name==="animation"&&e.animationIsPlaying&&e.data.property===this.data.property&&(e.animationIsPlaying=!1)},addEventListeners:function(){var e=this.data,t=this.el;Di(t,e.startEvents,this.onStartEvent),Di(t,e.pauseEvents,this.pauseAnimation),Di(t,e.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var e=this.data,t=this.el;ki(t,e.startEvents,this.onStartEvent),ki(t,e.pauseEvents,this.pauseAnimation),ki(t,e.resumeEvents,this.resumeAnimation)},setColorConfig:function(e,t){sn.set(e),an.set(t),e=this.fromColor,t=this.toColor,e.r=sn.r,e.g=sn.g,e.b=sn.b,t.r=an.r,t.g=an.g,t.b=an.b}});var Ti=ee("components:anchored:warn");P("anchored",{schema:{persistent:{default:!1}},init:function(){var e=this.el.sceneEl.getAttribute("webxr"),t=e.optionalFeatures;t.indexOf("anchors")===-1&&(t.push("anchors"),this.el.sceneEl.setAttribute("webxr",e)),this.auxQuaternion=new h.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var e,t,n,i=this.el.sceneEl,r=i.renderer.xr,o=this.el.object3D;(i.is("ar-mode")||i.is("vr-mode"))&&(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(e=i.frame,t=r.getReferenceSpace(),n=e.getPose(this.anchor.anchorSpace,t),o.position.copy(n.transform.position),o.quaternion.copy(n.transform.orientation)))},createAnchor:async function(e,t){var n,i,r,o,s=this.el.sceneEl,A=s.renderer.xr,a=this.el.object3D;e=e||a.position,t=t||this.auxQuaternion.setFromEuler(a.rotation),function(l){var c=l.renderer.xr.getSession();return c&&c.restorePersistentAnchor}(s)?(this.anchor&&this.deleteAnchor(),n=s.frame,i=A.getReferenceSpace(),r=new XRRigidTransform({x:e.x,y:e.y,z:e.z},{x:t.x,y:t.y,z:t.z,w:t.w}),this.requestAnchorPending=!1,o=await n.createAnchor(r,i),this.data.persistent&&(this.el.id?(this.persistentHandle=await o.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):Ti("The anchor won't be persisted because the entity has no assigned id.")),s.object3D.attach(this.el.object3D),this.anchor=o):Ti("This browser doesn't support the WebXR anchors module")},restorePersistentAnchor:async function(){var e,t=this.el.sceneEl.renderer.xr.getSession(),n=t.persistentAnchors;if(this.requestPersistentAnchorPending=!1,!this.el.id)return Ti("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),void(this.requestAnchorPending=!0);if(n){e=localStorage.getItem(this.el.id);for(var i=0;i<n.length;++i)if(e===n[i]){this.anchor=await t.restorePersistentAnchor(n[i]),this.anchor&&(this.persistentHandle=n[i]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var e,t=this.anchor;t&&(e=this.el.sceneEl.renderer.xr.getSession(),t.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&e.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}}),P("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var e,t=this.el;e=this.camera=new h.PerspectiveCamera,t.setObject3D("camera",e)},update:function(e){var t=this.data,n=this.camera;n.aspect=t.aspect||window.innerWidth/window.innerHeight,n.far=t.far,n.fov=t.fov,n.near=t.near,n.zoom=t.zoom,n.updateProjectionMatrix(),this.updateActiveCamera(e),this.updateSpectatorCamera(e)},updateActiveCamera:function(e){var t=this.data,n=this.el,i=this.system;e&&e.active===t.active||t.spectator||(t.active&&i.activeCameraEl!==n?i.setActiveCamera(n):t.active||i.activeCameraEl!==n||i.disableActiveCamera())},updateSpectatorCamera:function(e){var t=this.data,n=this.el,i=this.system;e&&e.spectator===t.spectator||(t.spectator&&i.spectatorCameraEl!==n?i.setSpectatorCamera(n):t.spectator||i.spectatorCameraEl!==n||i.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}});var ot,ft,st,os,ss="click",as="mouseup",An="cursor-fusing",Fi="cursor-hovering",Ui="cursor-hovered",ln={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},cn={DOWN:["selectstart"],UP:["selectend"]},As="a-mouse-cursor-hover",rh=(P("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:At()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var e=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=AA(function(){e.canvasBounds=e.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(e){var t=this.data.rayOrigin;t!==e.rayOrigin&&(t==="entity"&&this.resetRaycaster(),this.updateMouseEventListeners(),t!=="xrselect"&&t!=="entity"||this.addWebXREventListeners(),e.rayOrigin!=="xrselect"&&e.rayOrigin!=="entity"||this.removeWebXREventListeners())},tick:function(){var e=this.el.sceneEl.frame,t=this.activeXRInput;this.data.rayOrigin==="xrselect"&&e&&t&&this.onMouseMove({frame:e,inputSource:t,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var e=this.el;e.removeState(Fi),e.removeState(An),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(Ui),this.removeEventListeners()},addEventListeners:function(){var e,t=this.data,n=this.el,i=this;function r(){e=n.sceneEl.canvas,t.downEvents.length||t.upEvents.length||(ln.DOWN.forEach(function(o){e.addEventListener(o,i.onCursorDown,{passive:!1})}),ln.UP.forEach(function(o){e.addEventListener(o,i.onCursorUp,{passive:!1})}))}(e=n.sceneEl.canvas)?r():n.sceneEl.addEventListener("render-target-loaded",r),t.downEvents.forEach(function(o){n.addEventListener(o,i.onCursorDown)}),t.upEvents.forEach(function(o){n.addEventListener(o,i.onCursorUp)}),n.addEventListener("raycaster-intersection",this.onIntersection),n.addEventListener("raycaster-closest-entity-changed",this.onIntersection),n.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),n.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),n.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var e,t=this.data,n=this.el,i=this;!(e=n.sceneEl.canvas)||t.downEvents.length||t.upEvents.length||(ln.DOWN.forEach(function(r){e.removeEventListener(r,i.onCursorDown)}),ln.UP.forEach(function(r){e.removeEventListener(r,i.onCursorUp)})),t.downEvents.forEach(function(r){n.removeEventListener(r,i.onCursorDown)}),t.upEvents.forEach(function(r){n.removeEventListener(r,i.onCursorUp)}),n.removeEventListener("raycaster-intersection",this.onIntersection),n.removeEventListener("raycaster-closest-entity-changed",this.onIntersection),n.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchstart",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),n.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),n.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds),this.removeWebXREventListeners()},updateMouseEventListeners:function(){var e,t=this.el;(e=t.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),t.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("touchmove",this.onMouseMove,{passive:!1}),t.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},resetRaycaster:function(){this.el.setAttribute("raycaster",{direction:new h.Vector3().set(0,0,-1),origin:new h.Vector3})},addWebXREventListeners:function(){var e=this,t=this.el.sceneEl.xrSession;t&&(cn.DOWN.forEach(function(n){t.addEventListener(n,e.onCursorDown)}),cn.UP.forEach(function(n){t.addEventListener(n,e.onCursorUp)}))},removeWebXREventListeners:function(){var e=this,t=this.el.sceneEl.xrSession;t&&(cn.DOWN.forEach(function(n){t.removeEventListener(n,e.onCursorDown)}),cn.UP.forEach(function(n){t.removeEventListener(n,e.onCursorUp)}))},onMouseMove:(ot=new h.Vector3,ft=new h.Vector2,st=new h.Vector3,os={origin:st,direction:ot},function(e){var t,n,i,r,o,s,A,a,l,c=this.canvasBounds,d=this.el.sceneEl.camera;d.parent.updateMatrixWorld(),n=(i=e.type==="touchmove"||e.type==="touchstart"?e.touches.item(0):e).clientX-c.left,r=i.clientY-c.top,ft.x=n/c.width*2-1,ft.y=-r/c.height*2+1,this.data.rayOrigin!=="xrselect"||e.type!=="selectstart"&&e.type!=="fakeselectevent"?e.type==="fakeselectout"?(ot.set(0,1,0),st.set(0,9999,0)):d&&d.isPerspectiveCamera?(st.setFromMatrixPosition(d.matrixWorld),ot.set(ft.x,ft.y,.5).unproject(d).sub(st).normalize()):d&&d.isOrthographicCamera?(st.set(ft.x,ft.y,(d.near+d.far)/(d.near-d.far)).unproject(d),ot.set(0,0,-1).transformDirection(d.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+d.type):(o=e.frame,s=e.inputSource,A=this.el.sceneEl.renderer.xr.getReferenceSpace(),(a=o.getPose(s.targetRaySpace,A))&&(l=a.transform,ot.set(0,0,-1),ot.applyQuaternion(l.orientation),st.copy(l.position),(t=d.el.object3D.parent).localToWorld(st),ot.transformDirection(t.matrixWorld))),this.el.setAttribute("raycaster",os),e.type==="touchmove"&&e.preventDefault()}),onCursorDown:function(e){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&e.type==="touchstart"&&(this.onMouseMove(e),this.el.components.raycaster.checkIntersections(),e.preventDefault()),this.data.rayOrigin==="xrselect"&&e.type==="selectstart"&&(this.activeXRInput=e.inputSource,this.onMouseMove(e),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit("mousedown",e),this.cursorDownEl=this.intersectedEl},onCursorUp:function(e){if(this.isCursorDown&&(this.data.rayOrigin!=="xrselect"||this.activeXRInput===e.inputSource)){this.isCursorDown=!1;var t=this.data;this.twoWayEmit(as,e),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(as,this.intersectedEventDetail)),t.fuse&&t.rayOrigin!=="mouse"&&t.rayOrigin!=="xrselect"||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit(ss,e),t.rayOrigin==="xrselect"&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,e.type==="touchend"&&e.preventDefault()}},onIntersection:function(e){var t,n,i,r,o=this.el;n=e.detail.els[0]===o?1:0,r=e.detail.intersections[n],(i=e.detail.els[n])&&this.intersectedEl!==i&&(this.intersectedEl&&(t=this.el.components.raycaster.getIntersection(this.intersectedEl))&&t.distance<=r.distance||(this.clearCurrentIntersection(!0),this.setIntersection(i,r)))},onIntersectionCleared:function(e){e.detail.clearedEls.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){var e=this.data.rayOrigin;this.clearCurrentIntersection(!0),e!=="xrselect"&&e!=="entity"||this.addWebXREventListeners()},setIntersection:function(e,t){var n=this.el,i=this.data,r=this;this.intersectedEl!==e&&(this.intersectedEl=e,n.addState(Fi),e.addState(Ui),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(As),i.fuseTimeout!==0&&i.fuse&&i.rayOrigin!=="xrselect"&&i.rayOrigin!=="mouse"&&(n.addState(An),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout(function(){n.removeState(An),r.twoWayEmit(ss)},i.fuseTimeout)))},clearCurrentIntersection:function(e){var t,n,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState(Ui),i.removeState(Fi),i.removeState(An),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(As),this.intersectedEl=null,clearTimeout(this.fuseTimeout),e!==!0&&(n=this.el.components.raycaster.intersections).length!==0&&(t=n[n[0].object.el===i?1:0])&&this.setIntersection(t.object.el,t))},twoWayEmit:function(e,t){var n,i=this.el,r=this.intersectedEl;function o(s,A){t instanceof MouseEvent?s.mouseEvent=t:typeof TouchEvent<"u"&&t instanceof TouchEvent&&(s.touchEvent=t)}n=this.el.components.raycaster.getIntersection(r),this.eventDetail.intersectedEl=r,this.eventDetail.intersection=n,o(this.eventDetail),i.emit(e,this.eventDetail),r&&(this.intersectedEventDetail.intersection=n,o(this.intersectedEventDetail),r.emit(e,this.intersectedEventDetail))}}),new h.BufferGeometry),ls=(P("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:ro,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(e){var t,n=this.data,i=this.el,r=this.system;this.geometry&&(r.unuseGeometry(e),this.geometry=null),this.geometry=r.getOrCreateGeometry(n),(t=i.getObject3D("mesh"))?t.geometry=this.geometry:((t=new h.Mesh).geometry=this.geometry,this.el.getAttribute("material")||(t.material=new h.MeshStandardMaterial({color:16777215*Math.random(),metalness:0,roughness:.5})),i.setObject3D("mesh",t))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=rh,this.geometry=null},updateSchema:function(e){var t=this.oldData&&this.oldData.primitive,n=e.primitive,i=lt[n]&&lt[n].schema;if(!i)throw new Error("Unknown geometry schema `"+n+"`");t&&t===n||this.extendSchema(i)}}),"generic"),oh=(P("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},disabled:{default:!1}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]},bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.bindMethods(),this.el.addEventListener("controllerconnected",function(t){t.detail.name!==e.name&&(e.wasControllerConnected=!0,e.removeEventListeners(),e.removeControllersUpdateListener())})},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t=e.hand?e.hand:void 0;De(this,ls,{hand:t,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;this.el.components["tracked-controls"]?this.removeEventListeners():(e.setAttribute("tracked-controls",{hand:t.hand,idPrefix:ls,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel())},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){Ue(this,this.mapping.axes,e)},initDefaultModel:function(){var e=this.modelEl=document.createElement("a-entity");e.setAttribute("geometry",{primitive:"sphere",radius:.03}),e.setAttribute("material",{color:this.data.color}),this.el.appendChild(e),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}}),ee("components:gltf-model:warn"));P("gltf-model",{schema:{type:"model"},init:function(){var e=this,t=this.system.getDRACOLoader(),n=this.system.getMeshoptDecoder(),i=this.system.getKTX2Loader();this.model=null,this.loader=new Or,t&&this.loader.setDRACOLoader(t),this.ready=n?n.then(function(r){e.loader.setMeshoptDecoder(r)}):Promise.resolve(),i&&this.loader.setKTX2Loader(i)},update:function(){var e=this,t=this.el,n=this.data;n&&(this.remove(),this.ready.then(function(){e.loader.load(n,function(i){e.model=i.scene||i.scenes[0],e.model.animations=i.animations,t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"gltf",model:e.model})},void 0,function(i){var r=i&&i.message?i.message:"Failed to load glTF model";oh(r),t.emit("model-error",{format:"gltf",src:n})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}}),P("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}});var hn,sh=de+"controllers/oculus-hands/v4/left.glb",ah=de+"controllers/oculus-hands/v4/right.glb",Oi=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];P("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var e=0;e<this.jointEls.length;++e)this.jointEls[e].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var e=0;e<this.jointEls.length;++e)this.jointEls[e].object3D.visible=!1},init:function(){var e=this.el.sceneEl,t=e.getAttribute("webxr"),n=t.optionalFeatures;n.indexOf("hand-tracking")===-1&&(n.push("hand-tracking"),e.setAttribute("webxr",t)),this.wristObject3D=new h.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new h.Vector3,wristRotation:new h.Quaternion},this.indexTipPosition=new h.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*Oi.length),this.jointRadii=new Float32Array(Oi.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.wristObject3D.visible=!1},onChildAttached:function(e){this.addChildEntity(e.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var e=this.jointEls,t=this.skinnedMesh,n=this.data.modelOpacity!==1;t&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=n,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var i=0;i<e.length;i++)e[i].setAttribute("material",{color:this.data.modelColor,transparent:n,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var e=this,t=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,t){var n=e.el.sceneEl.systems.webxr.sessionReferenceSpaceType;t.requestReferenceSpace(n).then(function(i){e.referenceSpace=i}).catch(function(i){throw e.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(n,"tracked-controls-webxr uses reference space "+n),i})}},checkIfControllerPresent:function(){var e=this.data;De(this,"",{hand:e.hand?e.hand:void 0,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var e=this.el.sceneEl,t=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,n=e.frame,i=this.el.components["tracked-controls"],r=this.referenceSpace;t&&n&&r&&i&&(this.hasPoses=!1,t.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=n.fillPoses(t.hand.values(),r,this.jointPoses)&&n.fillJointRadii(t.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:(hn=new h.Matrix4,function(){var e=this.wristObject3D;e&&this.hasPoses&&(hn.fromArray(this.jointPoses,0),e.position.setFromMatrixPosition(hn),e.quaternion.setFromRotationMatrix(hn))}),updateHandModel:function(){this.wristObject3D.visible=!0,this.el.object3D.visible=!0,this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(e){for(var t=this.bones,n=0;n<t.length;n++)if(t[n].name===e)return t[n];return null},updateHandMeshModel:function(){var e=new h.Matrix4;return function(){var t=0,n=this.jointPoses,i=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(i&&this.mesh&&(this.mesh.visible=!1,this.hasPoses))for(var r of i.hand.values()){var o=this.getBone(r.jointName);o!=null&&(this.mesh.visible=!0,e.fromArray(n,16*t),o.position.setFromMatrixPosition(e),o.quaternion.setFromRotationMatrix(e)),t++}}}(),updateHandDotsModel:function(){for(var e,t,n=this.jointPoses,i=this.jointRadii,r=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,o=0;o<r.hand.size;o++)t=(e=this.jointEls[o]).object3D,e.object3D.visible=this.hasPoses,this.hasPoses&&(t.matrix.fromArray(n,16*o),t.matrix.decompose(t.position,t.rotation,t.scale),e.setAttribute("scale",{x:i[o],y:i[o],z:i[o]}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var e=new h.Vector3,t=new h.Matrix4;return function(){var n=this.indexTipPosition,i=this.pinchEventDetail;if(this.hasPoses){e.setFromMatrixPosition(t.fromArray(this.jointPoses,64)),n.setFromMatrixPosition(t.fromArray(this.jointPoses,144)),i.wristRotation.setFromRotationMatrix(t.fromArray(this.jointPoses,0));var r=n.distanceTo(e);r<.015&&this.isPinched===!1&&(this.isPinched=!0,i.position.copy(n).add(e).multiplyScalar(.5),this.el.emit("pinchstarted",i)),r>.02&&this.isPinched===!0&&(this.isPinched=!1,i.position.copy(n).add(e).multiplyScalar(.5),this.el.emit("pinchended",i)),this.isPinched&&(i.position.copy(n).add(e).multiplyScalar(.5),this.el.emit("pinchmoved",i))}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{id:"",hand:t.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh?this.mesh!==e.getObject3D("mesh")&&e.setObject3D("mesh",this.mesh):this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var e,t=this.el;this.checkIfControllerPresent(),e=t.components["tracked-controls"]&&t.components["tracked-controls"].controller,this.mesh&&e&&e.hand&&e.hand instanceof XRHand&&t.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var e=this.data;e.modelStyle==="dots"&&this.initDotsModel(),e.modelStyle==="mesh"&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(this.jointEls.length===0){for(var e=0;e<Oi.length;++e){var t=this.jointEl=document.createElement("a-entity");t.setAttribute("geometry",{primitive:"sphere",radius:1}),t.object3D.visible=!1,this.el.appendChild(t),this.jointEls.push(t)}this.updateModelMaterial()}},initMeshHandModel:function(){var e=this.data.hand==="left"?sh:ah;this.el.setAttribute("gltf-model",e)},onModelLoaded:function(){var e=this.mesh=this.el.getObject3D("mesh").children[0],t=this.skinnedMesh=e.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=t.skeleton.bones,this.el.removeObject3D("mesh"),e.position.set(0,0,0),e.rotation.set(0,0,0),t.frustumCulled=!1,t.material=new h.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",e),this.el.emit("controllermodelready",{name:"hand-tracking-controls",model:this.data.model,rayOrigin:new h.Vector3(0,0,0)}))},setupChildrenEntities:function(){for(var e=this.el.children,t=0;t<e.length;++t)e[t]instanceof Ce&&this.addChildEntity(e[t])},addChildEntity:function(e){e instanceof Ce&&this.wristObject3D.add(e.object3D)}}),P("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var e,t=this.el,n=this.data;e=n.hand==="right"?"components.hand-tracking-controls.bones.3":"components.hand-tracking-controls.bones.21",t.setAttribute("hand-tracking-controls",{hand:n.hand}),t.setAttribute("obb-collider",{trackedObject3D:e,size:.04}),this.auxMatrix=new h.Matrix4,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded)},transferEntityOwnership:function(){for(var e,t=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),n=0;n<t.length;++n)(e=t[n].components["hand-tracking-grab-controls"])!==this&&this.grabbedEl&&this.grabbedEl===e.grabbedEl&&e.releaseGrabbedEntity();return!1},onCollisionStarted:function(e){var t=e.detail.withEl;this.collidedEl||t.getAttribute("grabbable")&&(this.collidedEl=t,this.grabbingObject3D=e.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,this.grabbedEl||(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(e){this.collidedEl&&(this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},releaseGrabbedEntity:function(){var e=this.grabbedEl;if(e){var t=e.object3D,n=t.parent,i=this.originalParent;t.applyMatrix4(n.matrixWorld),t.applyMatrix4(this.auxMatrix.copy(i.matrixWorld).invert()),n.remove(t),i.add(t),this.el.emit("grabended",{grabbedEl:e}),this.grabbedEl=void 0,this.originalParent=void 0}},grab:function(){var e=this.grabbedEl,t=e.object3D,n=t.parent;this.originalParent=n;var i=this.el.components["hand-tracking-controls"].wristObject3D;t.applyMatrix4(n.matrixWorld),t.applyMatrix4(this.auxMatrix.copy(i.matrixWorld).invert()),n.remove(t),i.add(t),this.el.emit("grabstarted",{grabbedEl:e})}});var Ah={toonLeft:de+"controllers/hands/leftHand.glb",toonRight:de+"controllers/hands/rightHand.glb",lowPolyLeft:de+"controllers/hands/leftHandLow.glb",lowPolyRight:de+"controllers/hands/rightHandLow.glb",highPolyLeft:de+"controllers/hands/leftHandHigh.glb",highPolyRight:de+"controllers/hands/rightHandHigh.glb"},Pi="Point",Gi="Fist",cs="Thumb Up",Rn={};function hs(e,t){var n;if(e)return(n=Rn[e])==="grip"?n+(t?"close":"open"):n==="point"?n+(t?"up":"down"):n==="pointing"||n==="pistol"?n+(t?"start":"end"):void 0}Rn[Gi]="grip",Rn[cs]="pistol",Rn[Pi]="pointing",P("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var e=this,t=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new Or,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){e.handleButton("grip","down")},this.onGripUp=function(){e.handleButton("grip","up")},this.onTrackpadDown=function(){e.handleButton("trackpad","down")},this.onTrackpadUp=function(){e.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){e.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){e.handleButton("trackpad","touchend")},this.onTriggerDown=function(){e.handleButton("trigger","down")},this.onTriggerUp=function(){e.handleButton("trigger","up")},this.onTriggerTouchStart=function(){e.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){e.handleButton("trigger","touchend")},this.onGripTouchStart=function(){e.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){e.handleButton("grip","touchend")},this.onThumbstickDown=function(){e.handleButton("thumbstick","down")},this.onThumbstickUp=function(){e.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){e.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){e.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){e.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){e.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){e.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){e.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected),t.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(e,t){var n=this.el.getObject3D("mesh");n&&n.mixer&&n.mixer.update(t/1e3)},onControllerConnected:function(e){var t=this.el,n=this.data.hand,i=this.el.getObject3D("mesh");t.object3D.visible=!0;var r=n==="left"?Math.PI/2:-Math.PI/2,o=t.sceneEl.hasWebXR?-Math.PI/2:0;e.detail.name==="pico-controls"&&(o+=Math.PI/4),i.position.set(0,0,0),i.rotation.set(o,0,r)},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var e=this.el;e.addEventListener("gripdown",this.onGripDown),e.addEventListener("gripup",this.onGripUp),e.addEventListener("trackpaddown",this.onTrackpadDown),e.addEventListener("trackpadup",this.onTrackpadUp),e.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.addEventListener("triggerdown",this.onTriggerDown),e.addEventListener("triggerup",this.onTriggerUp),e.addEventListener("triggertouchstart",this.onTriggerTouchStart),e.addEventListener("triggertouchend",this.onTriggerTouchEnd),e.addEventListener("griptouchstart",this.onGripTouchStart),e.addEventListener("griptouchend",this.onGripTouchEnd),e.addEventListener("thumbstickdown",this.onThumbstickDown),e.addEventListener("thumbstickup",this.onThumbstickUp),e.addEventListener("abuttontouchstart",this.onAorXTouchStart),e.addEventListener("abuttontouchend",this.onAorXTouchEnd),e.addEventListener("bbuttontouchstart",this.onBorYTouchStart),e.addEventListener("bbuttontouchend",this.onBorYTouchEnd),e.addEventListener("xbuttontouchstart",this.onAorXTouchStart),e.addEventListener("xbuttontouchend",this.onAorXTouchEnd),e.addEventListener("ybuttontouchstart",this.onBorYTouchStart),e.addEventListener("ybuttontouchend",this.onBorYTouchEnd),e.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var e=this.el;e.removeEventListener("gripdown",this.onGripDown),e.removeEventListener("gripup",this.onGripUp),e.removeEventListener("trackpaddown",this.onTrackpadDown),e.removeEventListener("trackpadup",this.onTrackpadUp),e.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.removeEventListener("triggerdown",this.onTriggerDown),e.removeEventListener("triggerup",this.onTriggerUp),e.removeEventListener("triggertouchstart",this.onTriggerTouchStart),e.removeEventListener("triggertouchend",this.onTriggerTouchEnd),e.removeEventListener("griptouchstart",this.onGripTouchStart),e.removeEventListener("griptouchend",this.onGripTouchEnd),e.removeEventListener("thumbstickdown",this.onThumbstickDown),e.removeEventListener("thumbstickup",this.onThumbstickUp),e.removeEventListener("abuttontouchstart",this.onAorXTouchStart),e.removeEventListener("abuttontouchend",this.onAorXTouchEnd),e.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),e.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),e.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),e.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),e.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),e.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),e.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(e){var t,n=this.el,i=this.data.hand,r=this.data.handModelStyle,o=this.data.color,s=this;if(t={hand:i,model:!1},i!==e){var A=Ah[r+i.charAt(0).toUpperCase()+i.slice(1)];this.loader.load(A,function(a){var l=a.scene.children[0];l.mixer=new h.AnimationMixer(l),s.clips=a.animations,n.setObject3D("mesh",l),l.traverse(function(c){c.isMesh&&(c.material.color=new h.Color(o))}),n.setAttribute("magicleap-controls",t),n.setAttribute("vive-controls",t),n.setAttribute("meta-touch-controls",t),n.setAttribute("pico-controls",t),n.setAttribute("windows-motion-controls",t),n.setAttribute("hp-mixed-reality-controls",t)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(e,t){var n,i=t==="down",r=t==="touchstart";if(t.indexOf("touch")===0){if(r===this.touchedButtons[e])return;this.touchedButtons[e]=r}else{if(i===this.pressedButtons[e])return;this.pressedButtons[e]=i}n=this.gesture,this.gesture=this.determineGesture(),this.gesture!==n&&(this.animateGesture(this.gesture,n),this.emitGestureEvents(this.gesture,n))},determineGesture:function(){var e,t,n,i=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,o=this.pressedButtons.trackpad||this.touchedButtons.trackpad,s=this.pressedButtons.trigger||this.touchedButtons.trigger,A=this.touchedButtons.AorX||this.touchedButtons.BorY;return t=this.el.components["tracked-controls"],(n=t&&t.controller)&&(n.id&&n.id.indexOf("OpenVR ")===0||n.profiles&&n.profiles[0]&&n.profiles[0]==="htc-vive")?i||s?e=Gi:o&&(e=Pi):i?e=r||A||o?s?Gi:Pi:s?cs:"Point + Thumb":s&&(e="Hold"),e},getClip:function(e){var t,n;for(n=0;n<this.clips.length;n++)if((t=this.clips[n]).name===e)return t},animateGesture:function(e,t){e?this.playAnimation(e||"Open",t,!1):this.playAnimation(t,t,!0)},emitGestureEvents:function(e,t){var n,i=this.el;t!==e&&((n=hs(t,!1))&&i.emit(n),(n=hs(e,!0))&&i.emit(n))},playAnimation:function(e,t,n){var i,r,o=this.el.getObject3D("mesh");if(o){if(i=this.getClip(e),r=o.mixer.clipAction(i),n)return r.paused=!1,void(r.timeScale=-1);if(r.clampWhenFinished=!0,r.loop=h.LoopOnce,r.repetitions=0,r.timeScale=1,r.time=0,r.weight=1,!t)return o.mixer.stopAllAction(),void r.play();i=this.getClip(t),r.reset(),r.play(),o.mixer.clipAction(i).crossFadeTo(r,.15,!0)}}}),P("hide-on-enter-ar",{init:function(){var e=this;this.el.sceneEl.addEventListener("enter-vr",function(){e.el.sceneEl.is("ar-mode")&&(e.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){e.el.object3D.visible=!0})}}),P("hide-on-enter-vr",{init:function(){var e=this;this.el.sceneEl.addEventListener("enter-vr",function(){e.el.sceneEl.is("vr-mode")&&(e.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){e.el.object3D.visible=!0})}});var ds="hp-mixed-reality",lh=de+"controllers/hp/mixed-reality/",ch={x:0,y:0,z:.06},hh={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},dh=(P("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){q(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e,e.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex=e.hand==="right"?0:e.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;De(this,ds,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:ds,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",lh+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id];n&&(n==="trigger"&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){var t=e.detail.model;this.data.model&&(t.position.copy(ch),t.rotation.copy(hh),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new h.Vector3(0,0,0)}))},onAxisMoved:function(e){Ue(this,this.mapping.axes,e)}}),ee("components:layer:warn"));function us(e,t,n){return(t.dot(e)-t.dot(n))/t.length()}P("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var e=this.el.sceneEl.renderer.getContext();this.quaternion=new h.Quaternion,this.position=new h.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=e.createFramebuffer();var t=this.el.sceneEl.getAttribute("webxr"),n=t.requiredFeatures;n.indexOf("layers")===-1&&(n.push("layers"),this.el.sceneEl.setAttribute("webxr",t)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(e){this.data.src!==e.src&&this.updateSrc()},updateSrc:function(){var e=this.data.type;this.texture=void 0,e!=="quad"?e!=="monocubemap"&&e!=="stereocubemap"||this.loadCubeMapImages():this.loadQuadImage()},loadCubeMapImages:function(){var e,t=this.xrGLFactory,n=this.el.sceneEl.frame,i=this.data.src,r=this.data.type;this.visibilityChanged=!1,this.layer&&(r!=="monocubemap"&&r!=="stereocubemap"||(i.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,r==="monocubemap"?(e=t.getSubImage(this.layer,n),this.loadCubeMapImage(e.colorTexture,i,0)):(e=t.getSubImage(this.layer,n,"left"),this.loadCubeMapImage(e.colorTexture,i,0),e=t.getSubImage(this.layer,n,"right"),this.loadCubeMapImage(e.colorTexture,i,6))))},loadQuadImage:function(){var e=this.data.src,t=this;this.el.sceneEl.systems.material.loadTexture(e,{src:e},function(n){t.el.sceneEl.renderer.initTexture(n),t.texture=n,e.tagName==="VIDEO"&&setTimeout(function(){t.textureIsVideo=!0},1e3),t.layer&&(t.layer.height=t.data.height/2||t.texture.image.height/1e3,t.layer.width=t.data.width/2||t.texture.image.width/1e3,t.needsRedraw=!0),t.updateQuadPanel()})},preGenerateCubeMapTextures:function(e,t){this.data.type==="monocubemap"?this.generateCubeMapTextures(e,0,t):(this.generateCubeMapTextures(e,0,t),this.generateCubeMapTextures(e,6,t))},generateCubeMapTextures:function(e,t,n){for(var i,r,o=this.data,s=this.cubeFaceSize,A=Math.min(e.width,e.height),a=[],l=0;l<6;l++){var c=document.createElement("CANVAS");c.width=c.height=s;var d=c.getContext("2d");o.rotateCubemap&&(l!==2&&l!==3||(d.save(),d.translate(s,s),d.rotate(Math.PI))),d.drawImage(e,(l+t)*A,0,A,A,0,0,s,s),d.restore(),n&&n(),a.push(c)}return o.rotateCubemap&&(i=a[0],r=a[1],a[0]=r,a[1]=i,i=a[4],r=a[5],a[4]=r,a[5]=i),n&&n(),a},loadCubeMapImage:function(e,t,n){var i,r=this.el.sceneEl.renderer.getContext();r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.bindTexture(r.TEXTURE_CUBE_MAP,e),i=!t.complete||this.loadingScreen?this.loadingScreenImages:this.generateCubeMapTextures(t,n);var o=0;i.forEach(function(s,A){r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+A,0,0,0,r.RGBA,r.UNSIGNED_BYTE,s),o=r.getError()}),o!==0&&console.log("renderingError, WebGL Error Code: "+o),r.bindTexture(r.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&this.referenceSpace&&(this.layer||!this.el.sceneEl.is("vr-mode")&&!this.el.sceneEl.is("ar-mode")||this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),(this.needsRedraw||this.layer.needsRedraw||this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var e=this,t=this.data.type;this.el.sceneEl.xrSession.onvisibilitychange=function(n){e.visibilityChanged=n.session.visibilityState!=="hidden"},t!=="quad"?t!=="monocubemap"&&t!=="stereocubemap"||this.initCubeMapLayer():this.initQuadLayer()},initQuadLayer:function(){var e=this.el.sceneEl,t=e.renderer.getContext(),n=this.xrGLFactory=new XRWebGLBinding(e.xrSession,t);this.texture&&(this.layer=n.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),e.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var e=this.data.src,t=this.el.sceneEl,n=t.renderer.getContext(),i=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),r=this.cubeFaceSize=Math.min(i,Math.min(e.width,e.height)),o=this.xrGLFactory=new XRWebGLBinding(t.xrSession,n);this.layer=o.createCubeLayer({space:this.referenceSpace,viewPixelWidth:r,viewPixelHeight:r,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),t.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var e=this.cubeFaceSize,t=this.loadingScreenImages=[],n=0;n<6;n++){var i=document.createElement("CANVAS");i.width=i.height=e;var r=i.getContext("2d");i.width=i.height=e,r.fillStyle="black",r.fillRect(0,0,e,e),n!==2&&n!==3&&(r.translate(e,0),r.scale(-1,1),r.fillStyle="white",r.font="30px Arial",r.fillText("Loading",e/2,e/2)),t.push(i)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(e){this.layerEnabled=e,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var e=this.quadPanelEl;this.quadPanelEl||(e=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(e)),e.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),e.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var e=this.el.sceneEl,t=this.el.sceneEl.renderer.getContext(),n=this.xrGLFactory.getSubImage(this.layer,e.frame),i=e.renderer.properties.get(this.texture).__webglTexture,r=t.getParameter(t.FRAMEBUFFER_BINDING);t.viewport(n.viewport.x,n.viewport.y,n.viewport.width,n.viewport.height),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n.colorTexture,0),function(o,s,A,a){var l=o.createFramebuffer(),c=A.viewport.x,d=A.viewport.y,f=A.viewport.x+A.viewport.width,p=A.viewport.y+A.viewport.height;a.tagName==="VIDEO"&&(o.bindTexture(o.TEXTURE_2D,s),o.texSubImage2D(o.TEXTURE_2D,0,0,0,a.width,a.height,o.RGB,o.UNSIGNED_BYTE,a)),o.bindFramebuffer(o.READ_FRAMEBUFFER,l),o.framebufferTexture2D(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,s,0),o.readBuffer(o.COLOR_ATTACHMENT0),o.blitFramebuffer(0,0,a.width,a.height,c,d,f,p,o.COLOR_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.deleteFramebuffer(l)}(t,i,n,this.data.src),t.bindFramebuffer(t.FRAMEBUFFER,r)},updateTransform:function(){var e=this.el,t=this.position,n=this.quaternion;e.object3D.updateMatrixWorld(),t.setFromMatrixPosition(e.object3D.matrixWorld),n.setFromRotationMatrix(e.object3D.matrixWorld),this.layerEnabled||t.set(0,0,1e8),this.layer.transform=new XRRigidTransform(t,n)},onEnterVR:function(){var e=this.el.sceneEl,t=e.xrSession;e.hasWebXR&&XRWebGLBinding&&t?(t.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()):dh("The layer component requires WebXR and the layers API enabled")},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(e){this.referenceSpace=e}}),P("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var e=this.config,t=this.data,n=this.el,i=this,r={hand:t.hand,model:t.model};function o(s){var A=e[s.detail.name];if(A){var a=Le({showLine:!0},A.raycaster||{});s.detail.rayOrigin&&(a.origin=s.detail.rayOrigin.origin,a.direction=s.detail.rayOrigin.direction,a.showLine=!0),s.detail.rayOrigin||!i.modelReady?n.setAttribute("raycaster",a):n.setAttribute("raycaster","showLine",!0),n.setAttribute("cursor",Le({fuse:!1},A.cursor))}}n.setAttribute("hp-mixed-reality-controls",r),n.setAttribute("magicleap-controls",r),n.setAttribute("oculus-go-controls",r),n.setAttribute("meta-touch-controls",r),n.setAttribute("pico-controls",r),n.setAttribute("valve-index-controls",r),n.setAttribute("vive-controls",r),n.setAttribute("vive-focus-controls",r),n.setAttribute("windows-motion-controls",r),n.setAttribute("generic-tracked-controller-controls",{hand:r.hand}),n.addEventListener("controllerconnected",o),n.addEventListener("controllerdisconnected",function(s){e[s.detail.name]&&n.setAttribute("raycaster","showLine",!1)}),n.addEventListener("controllermodelready",function(s){o(s),i.modelReady=!0})},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"meta-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}});var Ni,dn,un,gn,We,gs,ji,Ot,Pt,fn,fs=h.MathUtils.degToRad,uh=ee("components:light:warn"),gh=new h.CubeTextureLoader,pt={};function ps(e,t){return!(!e||!t)&&e.x===t.x&&e.y===t.y&&e.z===t.z}P("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:3.14,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var e=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(e)},update:function(e){var t=this.data,n=lA(t,e),i=this.light,r=this;if(!i||"type"in n)this.setLight(this.data),this.updateShadow();else{var o=!1;Object.keys(n).forEach(function(s){var A=t[s];switch(s){case"color":i.color.set(A);break;case"groundColor":i.groundColor.set(A);break;case"angle":i.angle=fs(A);break;case"target":A===null?t.type!=="spot"&&t.type!=="directional"||(i.target=r.defaultTarget):A.hasLoaded?r.onSetTarget(A,i):A.addEventListener("loaded",r.onSetTarget.bind(r,A,i));break;case"envMap":r.updateProbeMap(t,i);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":o||(r.updateShadow(),o=!0);break;case"shadowCameraAutomatic":t.shadowCameraAutomatic?r.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(t.shadowCameraAutomatic)):r.shadowCameraAutomaticEls=[];break;default:i[s]=A}})}},tick:(Ni=new h.Box3,dn=new h.Vector3,un=new h.Vector3,gn=new h.Matrix4,We=new h.Sphere,gs=new h.Vector3,function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof h.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var e=this.light.shadow.camera;e.getWorldDirection(dn),e.getWorldPosition(un),gn.copy(e.matrixWorld),gn.invert(),e.near=1,e.left=1e5,e.right=-1e5,e.top=-1e5,e.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(t){Ni.setFromObject(t.object3D),Ni.getBoundingSphere(We);var n,i,r,o,s,A=us(un,dn,We.center),a=(n=un,i=dn,r=We.center,o=gs,s=us(n,i,r),o.copy(i),o.multiplyScalar(s),o.add(r),o).applyMatrix4(gn);e.near=Math.min(-A-We.radius-1,e.near),e.left=Math.min(-We.radius+a.x,e.left),e.right=Math.max(We.radius+a.x,e.right),e.top=Math.max(We.radius+a.y,e.top),e.bottom=Math.min(-We.radius+a.y,e.bottom)}),e.updateProjectionMatrix()}}),setLight:function(e){var t=this.el,n=this.getLight(e);n&&(this.light&&t.removeObject3D("light"),this.light=n,this.light.el=t,t.setObject3D("light",this.light),e.type!=="spot"&&e.type!=="directional"&&e.type!=="hemisphere"||t.getObject3D("light").translateY(-1),e.type==="spot"&&(t.setObject3D("light-target",this.defaultTarget),t.getObject3D("light-target").position.set(0,0,-1)),e.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(e.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var e=this.el,t=this.data,n=this.light;n.castShadow=t.castShadow;var i=e.getObject3D("cameraHelper");if(t.shadowCameraVisible&&!i?(i=new h.CameraHelper(n.shadow.camera),e.setObject3D("cameraHelper",i)):!t.shadowCameraVisible&&i&&e.removeObject3D("cameraHelper"),!t.castShadow)return n;n.shadow.bias=t.shadowBias,n.shadow.radius=t.shadowRadius,n.shadow.mapSize.height=t.shadowMapHeight,n.shadow.mapSize.width=t.shadowMapWidth,n.shadow.camera.near=t.shadowCameraNear,n.shadow.camera.far=t.shadowCameraFar,n.shadow.camera instanceof h.OrthographicCamera?(n.shadow.camera.top=t.shadowCameraTop,n.shadow.camera.right=t.shadowCameraRight,n.shadow.camera.bottom=t.shadowCameraBottom,n.shadow.camera.left=t.shadowCameraLeft):n.shadow.camera.fov=t.shadowCameraFov,n.shadow.camera.updateProjectionMatrix(),i&&i.update()},getLight:function(e){var t=e.angle,n=new h.Color(e.color);n=n.getHex();var i=e.decay,r=e.distance,o=new h.Color(e.groundColor);o=o.getHex();var s=e.intensity,A=e.type,a=e.target,l=null;switch(A.toLowerCase()){case"ambient":return new h.AmbientLight(n,s);case"directional":return l=new h.DirectionalLight(n,s),this.defaultTarget=l.target,a&&(a.hasLoaded?this.onSetTarget(a,l):a.addEventListener("loaded",this.onSetTarget.bind(this,a,l))),l;case"hemisphere":return new h.HemisphereLight(n,o,s);case"point":return new h.PointLight(n,s,r,i);case"spot":return l=new h.SpotLight(n,s,r,fs(t),e.penumbra,i),this.defaultTarget=l.target,a&&(a.hasLoaded?this.onSetTarget(a,l):a.addEventListener("loaded",this.onSetTarget.bind(this,a,l))),l;case"probe":return l=new h.LightProbe,this.updateProbeMap(e,l),l;default:uh("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",A)}},updateProbeMap:function(e,t){e.envMap?(pt[e.envMap]===void 0&&(pt[e.envMap]=new window.Promise(function(n){iA(e.envMap,function(i){gh.load(i,function(r){var o=Va.fromCubeTexture(r);pt[e.envMap]=o,n(o)})})})),pt[e.envMap]instanceof window.Promise?pt[e.envMap].then(function(n){t.copy(n)}):pt[e.envMap]instanceof h.LightProbe&&t.copy(pt[e.envMap])):t.copy(new h.LightProbe)},onSetTarget:function(e,t){t.target=e.object3D},remove:function(){var e=this.el;e.removeObject3D("light"),e.getObject3D("cameraHelper")&&e.removeObject3D("cameraHelper")}}),P("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var e,t,n=this.data;t=this.material=new h.LineBasicMaterial({color:n.color,opacity:n.opacity,transparent:n.opacity<1,visible:n.visible}),(e=this.geometry=new h.BufferGeometry).setAttribute("position",new h.BufferAttribute(new Float32Array(6),3)),this.line=new h.Line(e,t),this.el.setObject3D(this.attrName,this.line)},update:function(e){var t=this.data,n=this.geometry,i=!1,r=this.material,o=n.attributes.position.array;ps(t.start,e.start)||(o[0]=t.start.x,o[1]=t.start.y,o[2]=t.start.z,i=!0),ps(t.end,e.end)||(o[3]=t.end.x,o[4]=t.end.y,o[5]=t.end.z,i=!0),i&&(n.attributes.position.needsUpdate=!0,n.computeBoundingSphere()),r.color.setStyle(t.color),r.opacity=t.opacity,r.transparent=t.opacity<1,r.visible=t.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}}),P("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new h.Quaternion,this.hiddenEls=[]},update:function(e){var t,n,i=this.data,r=this.el;if(i.visualAspectEnabled){var o=this.el.getAttribute("scale");this.previewDistance=15*(o.x+o.y)/2,this.initVisualAspect(),t=i.highlighted?i.highlightedColor:i.backgroundColor,n=i.highlighted?i.highlightedColor:i.borderColor,r.setAttribute("material","backgroundColor",t),r.setAttribute("material","strokeColor",n),i.on!==e.on&&this.updateEventListener(),e.peekMode!==void 0&&i.peekMode!==e.peekMode&&this.updatePeekMode(),i.image&&e.image!==i.image&&r.setAttribute("material","pano",typeof i.image=="string"?i.image:i.image.src)}},updatePeekMode:function(){var e=this.el,t=this.sphereEl;this.data.peekMode?(this.hideAll(),e.getObject3D("mesh").visible=!1,t.setAttribute("visible",!0)):(this.showAll(),e.getObject3D("mesh").visible=!0,t.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var e=this.el;e.isPlaying&&(this.removeEventListener(),e.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var e=this.data.on;e&&this.el.removeEventListener(e,this.navigate)},initVisualAspect:function(){var e,t,n,i=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(n=this.textEl=this.textEl||document.createElement("a-entity"),t=this.sphereEl=this.sphereEl||document.createElement("a-entity"),e=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),i.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),i.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double",previewDistance:this.previewDistance}),n.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),n.setAttribute("position","0 1.5 0"),i.appendChild(n),e.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),e.setAttribute("rotation","0 180 0"),e.setAttribute("position","0 0 0"),e.setAttribute("visible",!1),i.appendChild(e),t.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),t.setAttribute("visible",!1),i.appendChild(t),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var e=new h.Vector3,t=new h.Vector3,n=new h.Quaternion,i=new h.Vector3;return function(){var r,o,s=this.el,A=s.object3D,a=s.sceneEl.camera,l=this.textEl;if(this.data.visualAspectEnabled)if(A.updateMatrixWorld(),a.parent.updateMatrixWorld(),a.updateMatrixWorld(),A.matrix.decompose(t,n,i),t.setFromMatrixPosition(A.matrixWorld),e.setFromMatrixPosition(a.matrixWorld),(o=t.distanceTo(e))>1.33333*this.previewDistance)this.previousQuaternion||(this.quaternionClone.copy(n),this.previousQuaternion=this.quaternionClone),A.lookAt(e);else{if(r=this.calculateCameraPortalOrientation(),o<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;l.setAttribute("text","width",1.5),r<=0?(l.setAttribute("position","0 0 0.75"),l.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(l.setAttribute("position","0 0 -0.75"),l.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),s.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=r}else r<=0?l.setAttribute("rotation","0 180 0"):l.setAttribute("rotation","0 0 0"),l.setAttribute("text","width",5),l.setAttribute("position","0 1.5 0"),s.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(A.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var e=this.el,t=this.hiddenEls,n=this;t.length>0||e.sceneEl.object3D.traverse(function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==e.sceneEl.object3D&&i.el!==e&&i.el!==n.sphereEl&&i.el!==e.sceneEl.cameraEl&&i.el.getAttribute("visible")!==!1&&i.el!==n.textEl&&i.el!==n.semiSphereEl&&(i.el.setAttribute("visible",!1),t.push(i.el))})},showAll:function(){this.hiddenEls.forEach(function(e){e.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:(ji=new h.Matrix4,Ot=new h.Vector3,Pt=new h.Vector3(0,0,1),fn=new h.Vector3(0,0,0),function(){var e=this.el,t=e.sceneEl.camera;return Ot.set(0,0,0),Pt.set(0,0,1),fn.set(0,0,0),e.object3D.matrixWorld.extractRotation(ji),Pt.applyMatrix4(ji),e.object3D.updateMatrixWorld(),e.object3D.localToWorld(fn),t.parent.parent.updateMatrixWorld(),t.parent.updateMatrixWorld(),t.updateMatrixWorld(),t.localToWorld(Ot),Ot.sub(fn).normalize(),Pt.normalize(),Math.sign(Pt.dot(Ot))}),remove:function(){this.removeEventListener()}}),at("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"},previewDistance:{default:15,type:"float",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","uniform float previewDistance;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));","}","}"].join(`
`)});var ms="logitech-mx-ink",fh=de+"controllers/logitech/",Es=(P("logitech-mx-ink-controls",{schema:{hand:{default:"left"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{left:{buttons:["front","back","none","none","none","tip"]},right:{buttons:["front","back","none","none","none","tip"]}},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){q(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e,e.data.hand)},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),e.sceneEl.removeEventListener("enter-vr",this.onEnterVR),e.sceneEl.removeEventListener("exit-vr",this.onExitVR),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.controllerObject3D;e&&(e.visible=!1),De(this,ms,{hand:this.data.hand,iterateControllerProfiles:!0})},injectTrackedControls:function(){var e=this.el,t=this.data,n=ms;e.setAttribute("tracked-controls",{id:n,hand:t.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0,orientationOffset:t.orientationOffset}),this.loadModel()},loadModel:function(){var e=this.controllerObject3D;if(this.data.model)return e?(e.visible=this.el.sceneEl.is("vr-mode"),void this.el.setObject3D("mesh",e)):void this.el.setAttribute("gltf-model",fh+"logitech-mx-ink.glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id];n&&(n==="trigger"&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){e.target===this.el&&this.data.model&&(this.el.emit("controllermodelready",{name:"logitech-mx-ink-controls",model:this.data.model,rayOrigin:new h.Vector3(0,0,0)}),this.controllerObject3D=this.el.getObject3D("mesh"),this.controllerObject3D.visible=this.el.sceneEl.is("vr-mode"))},onAxisMoved:function(e){Ue(this,this.mapping.axes,e)}}),Math.PI/2),Cs=(P("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new h.Vector3,this.hmdQuaternion=new h.Quaternion,this.magicWindowAbsoluteEuler=new h.Euler,this.magicWindowDeltaEuler=new h.Euler,this.position=new h.Vector3,this.magicWindowObject=new h.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new h.Vector3,rotation:new h.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var e,t=this.data;(At()||jr())&&(e=this.magicWindowControls=new za(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(e.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?e.enabled=t.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){e.enabled=t.magicWindowTrackingEnabled})))},update:function(e){var t=this.data;t.enabled!==e.enabled&&this.updateGrabCursor(t.enabled),e&&!t.magicWindowTrackingEnabled&&e.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=t.magicWindowTrackingEnabled),e&&!t.pointerLockEnabled!==e.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(e){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new h.Object3D,this.yawObject=new h.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var e=this.el.sceneEl,t=e.canvas;t?(t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),e.addEventListener("enter-vr",this.onEnterVR),e.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):e.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var e=this.el.sceneEl,t=e&&e.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("enter-vr",this.onEnterVR),e.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var e=this.el.object3D,t=this.pitchObject,n=this.yawObject,i=this.el.sceneEl;(i.is("vr-mode")||i.is("ar-mode"))&&i.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),e.rotation.x=this.magicWindowDeltaEuler.x+t.rotation.x,e.rotation.y=this.magicWindowDeltaEuler.y+n.rotation.y,e.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var e=this.magicWindowAbsoluteEuler,t=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),e.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),this.previousMagicWindowYaw||e.y===0||(this.previousMagicWindowYaw=e.y),this.previousMagicWindowYaw&&(t.x=e.x,t.y+=e.y-this.previousMagicWindowYaw,t.z=e.z,this.previousMagicWindowYaw=e.y))},onMouseMove:function(e){var t,n,i,r=this.pitchObject,o=this.previousMouseEvent,s=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(n=e.movementX||e.mozMovementX||0,i=e.movementY||e.mozMovementY||0):(n=e.screenX-o.screenX,i=e.screenY-o.screenY),this.previousMouseEvent.screenX=e.screenX,this.previousMouseEvent.screenY=e.screenY,t=this.data.reverseMouseDrag?1:-1,s.rotation.y+=.002*n*t,r.rotation.x+=.002*i*t,r.rotation.x=Math.max(-Es,Math.min(Es,r.rotation.x)))},onMouseDown:function(e){var t=this.el.sceneEl;if(this.data.enabled&&this.data.mouseEnabled&&(!t.is("vr-mode")&&!t.is("ar-mode")||!t.checkHeadsetConnected())&&e.button===0){var n=t&&t.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=e.screenX,this.previousMouseEvent.screenY=e.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(n.requestPointerLock?n.requestPointerLock():n.mozRequestPointerLock&&n.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(e){e.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(e){var t,n,i=this.el.sceneEl.canvas,r=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(n=2*Math.PI*(e.touches[0].pageX-this.touchStart.x)/i.clientWidth,t=this.data.reverseTouchDrag?1:-1,r.rotation.y-=.5*n*t,this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var e=this.el.sceneEl;e.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),e.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(e){var t=this.el.sceneEl;function n(){t.canvas.classList.add("a-grab-cursor")}function i(){t.canvas.classList.remove("a-grab-cursor")}t.canvas?e?n():i():e?t.addEventListener("render-target-loaded",n):t.addEventListener("render-target-loaded",i)},saveCameraPose:function(){var e=this.el;this.savedPose.position.copy(e.object3D.position),this.savedPose.rotation.copy(e.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var e=this.el,t=this.savedPose;this.hasSavedPose&&(e.object3D.position.copy(t.position),e.object3D.rotation.copy(t.rotation),this.hasSavedPose=!1)}}),"magicleap-one"),ph=de+"controllers/magicleap/magicleap-one-controller.glb",mh=(P("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex=e.hand==="right"?0:e.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;De(this,Cs,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:Cs,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",ph)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping.buttons[e.detail.id];n&&(n==="trigger"&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){e.detail.model.scale.set(.01,.01,.01)},onAxisMoved:function(e){Ue(this,this.mapping.axes,e)},updateModel:function(e,t){},setButtonColor:function(e,t){}}),ee("components:material:error"));function vs(e,t){e.dispose(),t.unregisterMaterial(e),Object.keys(e).filter(function(n){return e[n]&&e[n].isTexture}).forEach(function(n){e[n].dispose()})}P("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:BA,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(e){var t=this.data;this.shader&&t.shader===e.shader||this.updateShader(t.shader),this.shader.update(this.data),this.updateMaterial(e)},updateSchema:function(e){var t,n,i,r;n=e&&e.shader,t=this.oldData&&this.oldData.shader,(i=Ve[r=n||t]&&Ve[r].schema)||mh("Unknown shader schema "+r),t&&n===t||(this.extendSchema(i),this.updateBehavior())},updateBehavior:function(){var e,t,n=this.el.sceneEl,i=this.schema,r=this;function o(s,A){var a;for(a in t)t[a]=s;r.shader.update(t)}for(e in this.tick=void 0,t={},i)i[e].type==="time"&&(this.tick=o,t[e]=!0);n&&(this.tick?n.addBehavior(this):n.removeBehavior(this))},updateShader:function(e){var t,n=this.data,i=Ve[e]&&Ve[e].Shader;if(!i)throw new Error("Unknown shader "+e);(t=this.shader=new i).el=this.el,t.init(n),this.setMaterial(t.material),this.updateSchema(n)},updateMaterial:function(e){var t,n=this.data,i=this.material;for(t in i.alphaTest=n.alphaTest,i.depthTest=n.depthTest!==!1,i.depthWrite=n.depthWrite!==!1,i.opacity=n.opacity,i.flatShading=n.flatShading,i.side=function(r){switch(r){case"back":return h.BackSide;case"double":return h.DoubleSide;default:return h.FrontSide}}(n.side),i.transparent=n.transparent!==!1||n.opacity<1,i.vertexColors=n.vertexColorsEnabled,i.visible=n.visible,i.blending=function(r){switch(r){case"none":return h.NoBlending;case"additive":return h.AdditiveBlending;case"subtractive":return h.SubtractiveBlending;case"multiply":return h.MultiplyBlending;default:return h.NormalBlending}}(n.blending),i.dithering=n.dithering,e)break;!t||e.alphaTest===n.alphaTest&&e.side===n.side&&e.vertexColorsEnabled===n.vertexColorsEnabled||(i.needsUpdate=!0)},remove:function(){var e=new h.MeshBasicMaterial,t=this.material,n=this.el.getObject3D("mesh");n&&(n.material=e),vs(t,this.system)},setMaterial:function(e){var t,n=this.el,i=this.system;this.material&&vs(this.material,i),this.material=e,i.registerMaterial(e),(t=n.getObject3D("mesh"))?t.material=e:n.addEventListener("object3dset",function r(o){o.detail.type==="mesh"&&o.target===n&&(n.getObject3D("mesh").material=e,n.removeEventListener("object3dset",r))})}});var pn,mn,_i,bs,Hi,Bs="oculus-touch",Lt=de+"controllers/oculus/oculus-touch-controller-",En=de+"controllers/meta/",Eh={left:{modelUrl:Lt+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new h.Vector3(-.005,.036,-.037),modelPivotRotation:new h.Euler(Math.PI/4.5,0,0)},right:{modelUrl:Lt+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new h.Vector3(.005,.036,-.037),modelPivotRotation:new h.Euler(Math.PI/4.5,0,0)}},ys="oculus-touch",mt={"oculus-touch":Eh,"oculus-touch-v2":{left:{modelUrl:Lt+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new h.Vector3(0,-.007,-.021),modelPivotRotation:new h.Euler(-Math.PI/4,0,0)},right:{modelUrl:Lt+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new h.Vector3(0,-.007,-.021),modelPivotRotation:new h.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:Lt+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new h.Vector3(0,0,0),modelPivotRotation:new h.Euler(0,0,0)},right:{modelUrl:Lt+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new h.Vector3(0,0,0),modelPivotRotation:new h.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:En+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new h.Vector3(0,0,0),modelPivotRotation:new h.Euler(0,0,0)},right:{modelUrl:En+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new h.Vector3(0,0,0),modelPivotRotation:new h.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:En+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new h.Vector3(0,0,0),modelPivotRotation:new h.Euler(0,0,0)},right:{modelUrl:En+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new h.Vector3(0,0,0),modelPivotRotation:new h.Euler(0,0,0)}}},Is={schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]}},after:["tracked-controls"],mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonDown=function(t){q(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){q(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e,e.data.hand)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e,e.data.hand)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new h.Euler},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.controllerObject3D;e&&(e.visible=!1),De(this,Bs,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(e){var t,n=this.data;if(n.model){if(this.controllerObject3D)return this.controllerObject3D.visible=!0,void this.el.setObject3D("mesh",this.controllerObject3D);if(this.displayModel=mt[n.controllerType]||mt[ys],n.controllerType==="auto"){t=ys;for(var i=Object.keys(mt),r=0;r<e.profiles.length;r++)if(i.indexOf(e.profiles[r])!==-1){t=e.profiles[r];break}this.displayModel=mt[t]}var o=this.displayModel[n.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===mt["oculus-touch-v3"]||this.displayModel===mt["meta-quest-touch-pro"]||this.displayModel===mt["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",o)}},injectTrackedControls:function(e){var t=this.data,n=Bs;this.el.setAttribute("tracked-controls",{id:n,hand:t.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0}),this.loadModel(e)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t=this.mapping[this.data.hand].buttons[e.detail.id];if(t){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(e);else{var n,i=this.buttonMeshes;t!=="trigger"&&t!=="grip"||(n=e.detail.state.value),i&&(t==="trigger"&&i.trigger&&(i.trigger.rotation.x=this.originalXRotationTrigger-n*(Math.PI/26)),t==="grip"&&i.grip&&(n*=this.data.hand==="left"?-1:1,i.grip.position.x=this.originalXPositionGrip+.004*n))}this.el.emit(t+"changed",e.detail.state)}},onButtonChangedV3orPROorPlus:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id],i=this.buttonObjects;i&&i[n]&&(t=e.detail.state.value,i[n].quaternion.slerpQuaternions(this.buttonRanges[n].min.quaternion,this.buttonRanges[n].max.quaternion,t),i[n].position.lerpVectors(this.buttonRanges[n].min.position,this.buttonRanges[n].max.position,t))},onModelLoaded:function(e){if(e.target===this.el&&this.data.model){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(e);else{var t,n=this.controllerObject3D=e.detail.model;(t=this.buttonMeshes={}).grip=n.getObjectByName("buttonHand"),this.originalXPositionGrip=t.grip&&t.grip.position.x,t.trigger=n.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=t.trigger&&t.trigger.rotation.x,t.thumbstick=n.getObjectByName("stick"),t.xbutton=n.getObjectByName("buttonX"),t.abutton=n.getObjectByName("buttonA"),t.ybutton=n.getObjectByName("buttonY"),t.bbutton=n.getObjectByName("buttonB")}for(var i in this.buttonMeshes)this.buttonMeshes[i]&&Ch(this.buttonMeshes[i]);this.applyOffset(e.detail.model),this.el.emit("controllermodelready",{name:"meta-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(e){e.position.copy(this.displayModel[this.data.hand].modelPivotOffset),e.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(e){var t=this.controllerObject3D=e.detail.model,n=this.buttonObjects={},i=this.buttonMeshes={},r=this.buttonRanges={};i.grip=t.getObjectByName("squeeze"),n.grip=t.getObjectByName("xr_standard_squeeze_pressed_value"),r.grip={min:t.getObjectByName("xr_standard_squeeze_pressed_min"),max:t.getObjectByName("xr_standard_squeeze_pressed_max")},n.grip.minX=n.grip.position.x,i.thumbstick=t.getObjectByName("thumbstick"),n.thumbstick=t.getObjectByName("xr_standard_thumbstick_pressed_value"),r.thumbstick={min:t.getObjectByName("xr_standard_thumbstick_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_pressed_max")},n.thumbstickXAxis=t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),r.thumbstickXAxis={min:t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},n.thumbstickYAxis=t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),r.thumbstickYAxis={min:t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},i.trigger=t.getObjectByName("trigger"),n.trigger=t.getObjectByName("xr_standard_trigger_pressed_value"),r.trigger={min:t.getObjectByName("xr_standard_trigger_pressed_min"),max:t.getObjectByName("xr_standard_trigger_pressed_max")},r.trigger.diff={x:Math.abs(r.trigger.max.rotation.x)-Math.abs(r.trigger.min.rotation.x),y:Math.abs(r.trigger.max.rotation.y)-Math.abs(r.trigger.min.rotation.y),z:Math.abs(r.trigger.max.rotation.z)-Math.abs(r.trigger.min.rotation.z)};var o=this.data.hand==="left"?"x":"a",s=this.data.hand==="left"?"y":"b",A=o+"button",a=s+"button";i[A]=t.getObjectByName(o+"_button"),n[A]=t.getObjectByName(o+"_button_pressed_value"),r[A]={min:t.getObjectByName(o+"_button_pressed_min"),max:t.getObjectByName(o+"_button_pressed_max")},i[a]=t.getObjectByName(s+"_button"),n[a]=t.getObjectByName(s+"_button_pressed_value"),r[a]={min:t.getObjectByName(s+"_button_pressed_min"),max:t.getObjectByName(s+"_button_pressed_max")}},onAxisMoved:function(e){Ue(this,this.mapping[this.data.hand].axes,e)},onThumbstickMoved:function(e){if(this.buttonMeshes&&this.buttonMeshes.thumbstick)if(this.isTouchV3orPROorPlus)this.updateThumbstickTouchV3orPROorPlus(e);else for(var t in e.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[t]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[t]]-Math.PI/8*e.detail[t]*(t==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(e){var t=(e.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,t);var n=(e.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,n)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n,i=this.buttonMeshes;i&&i[e]&&(n=t==="up"||t==="touchend"?i[e].originalColor||this.data.buttonColor:t==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,i[e].material.color.set(n))}};function Ch(e){e.traverse(function(t){var n;t.type==="Mesh"&&(n=t.material.clone(),e.originalColor=t.material.color,t.material.dispose(),t.material=n)})}P("oculus-touch-controls",Is),P("meta-touch-controls",Is),P("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=new h.Vector3().copy(this.el.object3D.scale),this.auxEuler=new h.Euler,this.boundingBox=new h.Box3,this.boundingBoxSize=new h.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var e,t=this.el,n=t.components["gltf-model"]&&t.components["gltf-model"].model;n&&(this.el.removeObject3D("mesh"),e=new h.Box3().setFromObject(n).getCenter(new h.Vector3),n.position.x+=n.position.x-e.x,n.position.y+=n.position.y-e.y,n.position.z+=n.position.z-e.z,this.el.setObject3D("mesh",n))},updateCollider:function(){var e=this.el,t=this.boundingBoxSize,n=this.aabb=this.aabb||new Pn;this.obb=this.obb||new Pn,e.hasLoaded?(this.updateBoundingBox(),n.halfSize.copy(t).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()):e.addEventListener("loaded",this.updateCollider)},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var e=this.renderColliderMesh,t=this.boundingBoxSize;e?(e.geometry.dispose(),e.geometry=new h.BoxGeometry(t.x,t.y,t.z)):this.initColliderMesh()},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var e,t,n;e=this.boundingBoxSize,t=this.renderColliderGeometry=new h.BoxGeometry(e.x,e.y,e.z),(n=this.renderColliderMesh=new h.Mesh(t,new h.MeshLambertMaterial({color:65280,side:h.DoubleSide}))).matrixAutoUpdate=!1,n.matrixWorldAutoUpdate=!1,n.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(n)},updateBoundingBox:(pn=new h.Vector3,mn=new h.Vector3,_i=new h.Quaternion,bs=new h.Quaternion,Hi=new h.Matrix4,function(){var e=this.auxEuler,t=this.boundingBox,n=this.data.size,i=this.trackedObject3D||this.el.object3D,r=this.boundingBoxSize,o=this.data.minimumColliderDimension;if(n)return this.boundingBoxSize.x=n,this.boundingBoxSize.y=n,void(this.boundingBoxSize.z=n);e.copy(i.rotation),i.rotation.set(0,0,0),i.parent.matrixWorld.decompose(pn,_i,mn),Hi.compose(pn,bs,mn),i.parent.matrixWorld.copy(Hi),t.setFromObject(i,!0),t.getSize(r),r.x=r.x<o?o:r.x,r.y=r.y<o?o:r.y,r.z=r.z<o?o:r.z,i.parent.matrixWorld.compose(pn,_i,mn),this.el.object3D.rotation.copy(e)}),checkTrackedObject:function(){var e,t=this.trackedObject3DPath;if(t&&t.length&&!this.trackedObject3D){e=this.el;for(var n=0;n<t.length&&(e=e[t[n]]);n++);e&&(this.trackedObject3D=e,this.updateCollider())}return this.trackedObject3D},tick:function(){var e=new h.Vector3,t=new h.Vector3,n=new h.Quaternion,i=new h.Matrix4;return function(){var r=this.obb,o=this.renderColliderMesh,s=this.checkTrackedObject()||this.el.object3D;s&&(s.updateMatrix(),s.updateMatrixWorld(!0),s.matrixWorld.decompose(e,n,t),(Math.abs(t.x-this.previousScale.x)>1e-4||Math.abs(t.y-this.previousScale.y)>1e-4||Math.abs(t.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(t),t.set(1,1,1),i.compose(e,n,t),o&&o.matrixWorld.copy(i),r.copy(this.aabb),r.applyMatrix4(i))}}()});var vh=ee("components:obj-model:warn"),bh=(P("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var e=this;this.model=null,this.objLoader=new Ha,this.mtlLoader=new qa(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(t){e.model&&t.detail.name==="material"&&e.applyMaterial()})},update:function(){var e=this.data;e.obj&&(this.resetMesh(),this.loadObj(e.obj,e.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(e,t){var n=this,i=this.el,r=this.mtlLoader,o=this.objLoader,s=this.el.sceneEl.systems.renderer,A=t.substr(0,t.lastIndexOf("/")+1);if(t)return i.hasAttribute("material")&&vh("Material component properties are ignored when a .MTL is provided"),r.setResourcePath(A),void r.load(t,function(a){a.preload(),o.setMaterials(a),o.load(e,function(l){n.model=l,n.model.traverse(function(c){if(c.isMesh){var d=c.material;d.map&&s.applyColorCorrection(d.map),d.emissiveMap&&s.applyColorCorrection(d.emissiveMap)}}),i.setObject3D("mesh",l),i.emit("model-loaded",{format:"obj",model:l})})});o.load(e,function(a){n.model=a,n.applyMaterial(),i.setObject3D("mesh",a),i.emit("model-loaded",{format:"obj",model:a})})},applyMaterial:function(){var e=this.el.components.material;e&&this.model.traverse(function(t){t instanceof h.Mesh&&(t.material=e.material)})}}),de+"controllers/oculus/go/oculus-go-controller.gltf"),ws="oculus-go",xs=(P("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){De(this,ws,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{hand:t.hand,idPrefix:ws}),this.data.model&&this.el.setAttribute("gltf-model",bh)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,n=e.detail.model;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).trigger=n.getObjectByName("oculus_go_button_trigger"),t.trackpad=n.getObjectByName("oculus_go_touchpad"),t.touchpad=n.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){Ue(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n=this.buttonMeshes;if(n&&n[e]){var i;switch(t){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}n[e].material.color.set(i)}}}),"pico-4"),Bh=de+"controllers/pico/pico4/",Qs=(P("pico-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){q(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e,e.data.hand)},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex=e.hand==="right"?0:e.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;De(this,xs,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:xs,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",Bh+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id];n&&(n==="trigger"&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){e.target===this.el&&this.data.model&&this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new h.Vector3(0,0,0)})},onAxisMoved:function(e){Ue(this,this.mapping[this.data.hand].axes,e)}}),P("position",{schema:{type:"vec3"},update:function(){var e=this.el.object3D,t=this.data;e.position.set(t.x,t.y,t.z)},remove:function(){this.el.object3D.position.set(0,0,0)}}),ee("components:raycaster:warn")),yh=/^[\w\s-.,[\]#]*$/,Ih={childList:!0,attributes:!0,subtree:!0},Ls="raycaster-intersected-cleared",Ms="raycaster-intersection-cleared";function Ss(e,t){var n;for(e.length=t.length,n=0;n<t.length;n++)e[n]=t[n]}P("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new h.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new h.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new h.Vector3,this.otherLineEndVec3=new h.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(e){var t=this.data,n=this.el,i=this.raycaster;i.far=t.far,i.near=t.near,!t.showLine||t.far===e.far&&t.origin===e.origin&&t.direction===e.direction&&e.showLine||(this.unitLineEndVec3.copy(t.direction).normalize(),this.drawLine()),!t.showLine&&e.showLine&&n.removeAttribute("line"),t.objects===e.objects||yh.test(t.objects)||Qs('[raycaster] Selector "'+t.objects+'" may not update automatically with DOM changes.'),t.objects||Qs('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),t.autoRefresh!==e.autoRefresh&&n.isPlaying&&(t.autoRefresh?this.addEventListeners():this.removeEventListeners()),e.enabled&&!t.enabled&&this.clearAllIntersections(),t.objects!==e.objects&&this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,Ih),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var e,t=this.data;e=t.objects?this.el.sceneEl.querySelectorAll(t.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(e),this.dirty=!1},tock:function(e){var t=this.data,n=this.prevCheckTime;t.enabled&&(n&&e-n<t.interval||(this.prevCheckTime=e,this.checkIntersections()))},checkIntersections:function(){var e,t,n=this.clearedIntersectedEls,i=this.el,r=this.data,o=this.intersectedEls,s=this.intersections,A=this.newIntersectedEls,a=this.newIntersections,l=this.prevIntersectedEls,c=this.rawIntersections;for(this.dirty&&this.refreshObjects(),Ss(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),c.length=0,this.raycaster.intersectObjects(this.objects,!0,c),s.length=0,o.length=0,e=0;e<c.length;e++)t=c[e],r.showLine&&t.object===i.getObject3D("line")||t.object.el&&(s.push(t),o.push(t.object.el));for(a.length=0,A.length=0,e=0;e<s.length;e++)l.indexOf(s[e].object.el)===-1&&(a.push(s[e]),A.push(s[e].object.el));for(n.length=0,e=0;e<l.length;e++)o.indexOf(l[e])===-1&&(l[e].emit(Ls,this.intersectedClearedDetail),n.push(l[e]));for(n.length&&i.emit(Ms,this.intersectionClearedDetail),e=0;e<A.length;e++)A[e].emit("raycaster-intersected",this.intersectedDetail);a.length&&(this.intersectionDetail.els=A,this.intersectionDetail.intersections=a,i.emit("raycaster-intersection",this.intersectionDetail)),(l.length===0&&s.length>0||l.length>0&&s.length===0||l.length&&s.length&&l[0]!==s[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=s,i.emit("raycaster-closest-entity-changed",this.intersectionDetail)),r.showLine&&setTimeout(this.updateLine)},updateLine:function(){var e,t=this.el,n=this.intersections;n.length&&(e=n[0].object.el===t&&n[1]?n[1].distance:n[0].distance),this.drawLine(e)},getIntersection:function(e){var t,n;for(t=0;t<this.intersections.length;t++)if((n=this.intersections[t]).object.el===e)return n;return null},updateOriginDirection:function(){var e=new h.Vector3,t=new h.Vector3;return function(){var n=this.el,i=this.data;i.useWorldCoordinates?this.raycaster.set(i.origin,i.direction):(n.object3D.updateMatrixWorld(),t.setFromMatrixPosition(n.object3D.matrixWorld),i.origin.x===0&&i.origin.y===0&&i.origin.z===0||(t=n.object3D.localToWorld(t.copy(i.origin))),e.copy(i.direction).transformDirection(n.object3D.matrixWorld).normalize(),this.raycaster.set(t,e))}}(),drawLine:function(e){var t,n=this.data,i=this.el;t=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,e===void 0&&(e=n.far===1/0?1e3:n.far),this.lineData.start=n.origin,this.lineData.end=t.copy(this.unitLineEndVec3).multiplyScalar(e).add(n.origin),this.lineData.color=n.lineColor,this.lineData.opacity=n.lineOpacity,i.setAttribute("line",this.lineData)},flattenObject3DMaps:function(e){var t,n,i=this.objects,r=this.el.sceneEl.object3D;function o(A){return A.parent?o(A.parent):A===r}for(i.length=0,n=0;n<e.length;n++){var s=e[n];if(s.isEntity&&s.object3D&&o(s.object3D))for(t in s.object3DMap)i.push(s.getObject3D(t))}return i},clearAllIntersections:function(){var e;for(e=0;e<this.intersectedEls.length;e++)this.intersectedEls[e].emit(Ls,this.intersectedClearedDetail);Ss(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(Ms,this.intersectionClearedDetail)}});var Ds,yt,ks,Rs,qi=h.MathUtils.degToRad,Vi=(P("rotation",{schema:{type:"vec3"},update:function(){var e=this.data;this.el.object3D.rotation.set(qi(e.x),qi(e.y),qi(e.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}}),P("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var e=this.data;this.el.object3D.scale.set(e.x,e.y,e.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}}),P("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var e=this.data;this.updateDescendants(e.cast,e.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(e,t){var n=this.el.sceneEl;this.el.object3D.traverse(function(i){if(i instanceof h.Mesh&&(i.castShadow=e,i.receiveShadow=t,n.hasLoaded&&i.material))for(var r=Array.isArray(i.material)?i.material:[i.material],o=0;o<r.length;o++)r[o].needsUpdate=!0})}}),ee("components:sound:warn")),wh=(P("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var e=this;this.listener=null,this.audioLoader=new h.AudioLoader,this.pool=new h.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){e.playSound()}},update:function(e){var t,n,i=this.data,r=i.src!==e.src;if(r){if(!i.src)return;this.setupSound()}for(t=0;t<this.pool.children.length;t++)n=this.pool.children[t],i.positional&&(n.setDistanceModel(i.distanceModel),n.setMaxDistance(i.maxDistance),n.setRefDistance(i.refDistance),n.setRolloffFactor(i.rolloffFactor)),n.setLoop(i.loop),n.setLoopStart(i.loopStart),i.loopStart!==0&&i.loopEnd===0?n.setLoopEnd(n.buffer.duration):n.setLoopEnd(i.loopEnd),n.setVolume(i.volume),n.isPaused=!1;if(i.on!==e.on&&this.updateEventListener(e.on),r){var o=this;this.loaded=!1,this.audioLoader.load(i.src,function(s){for(t=0;t<o.pool.children.length;t++)(n=o.pool.children[t]).setBuffer(s);o.loaded=!0,h.Cache.remove(i.src),(o.data.autoplay||o.mustPlay)&&o.playSound(o.processSound),o.el.emit("sound-loaded",o.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var e;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(e=0;e<this.pool.children.length;e++)this.pool.children[e].disconnect()}catch{Vi("Audio source not properly disconnected")}},updateEventListener:function(e){var t=this.el;e&&t.removeEventListener(e,this.playSoundBound),t.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var e,t,n=this.el,i=n.sceneEl,r=this;this.pool.children.length>0&&(this.stopSound(),n.removeObject3D("sound"));var o=this.listener=i.audioListener||new h.AudioListener;for(i.audioListener=o,i.camera&&i.camera.add(o),i.addEventListener("camera-set-active",function(s){s.detail.cameraEl.getObject3D("camera").add(o)}),this.pool=new h.Group,e=0;e<this.data.poolSize;e++)t=this.data.positional?new h.PositionalAudio(o):new h.Audio(o),this.pool.add(t);for(n.setObject3D(this.attrName,this.pool),e=0;e<this.pool.children.length;e++)(t=this.pool.children[e]).onEnded=function(){this.isPlaying=!1,r.el.emit("sound-ended",r.evtDetail,!1)}},pauseSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++)(t=this.pool.children[e]).source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())},playSound:function(e){var t,n,i;if(!this.loaded)return Vi("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,void(this.processSound=e);for(t=!1,this.isPlaying=!0,n=0;n<this.pool.children.length;n++)(i=this.pool.children[n]).isPlaying||!i.buffer||t||(e&&e(i),i.play(),i.isPaused=!1,t=!0);t?(this.mustPlay=!1,this.processSound=void 0):Vi("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++){if(!(t=this.pool.children[e]).source||!t.source.buffer)return;t.stop()}}}),G(4433)),xh=G.n(wh),Qh=G(5751),Lh=G.n(Qh),It=ee("components:text:error"),Mh=ee("components:text:warn"),Ke=de+"fonts/",Ts={aileronsemibold:Ke+"Aileron-Semibold.fnt",dejavu:Ke+"DejaVu-sdf.fnt",exo2bold:Ke+"Exo2Bold.fnt",exo2semibold:Ke+"Exo2SemiBold.fnt",kelsonsans:Ke+"KelsonSans.fnt",monoid:Ke+"Monoid.fnt",mozillavr:Ke+"mozillavr.fnt",roboto:Ke+"Roboto-msdf.json",sourcecodepro:Ke+"SourceCodePro.fnt"},Fs=["roboto"],zi="roboto",Us=new function(){var e=this.cache={};this.get=function(t,n){return t in e||(e[t]=n()),e[t]}},Os={},Cn={},Sh=/^\w+:/;function Ps(e,t,n){return e||(.5+t)*n}P("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:zi},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:Ve},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=xh()(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(e){var t=this.data,n=this.currentFont;Cn[t.font]?this.texture=Cn[t.font]:(this.texture=Cn[t.font]=new h.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),e.font===t.font?n&&(this.updateGeometry(this.geometry,n),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var e,t,n,i=this.data,r=this.material,o=this.shaderData;if(n=i.shader,Fs.indexOf(i.font)!==-1||i.font.indexOf("-msdf.")>=0?n="msdf":i.font in Ts&&Fs.indexOf(i.font)===-1&&(n="sdf"),e=(this.shaderObject&&this.shaderObject.name)!==n,o.alphaTest=i.alphaTest,o.color=i.color,o.map=this.texture,o.opacity=i.opacity,o.side=function(s){switch(s){case"back":return h.FrontSide;case"double":return h.DoubleSide;default:return h.BackSide}}(i.side),o.transparent=i.transparent,o.negate=i.negate,!e)return this.shaderObject.update(o),r.transparent=o.transparent,void(r.side=o.side);t=function(s,A,a){var l,c;return(c=new Ve[A].Shader).el=s,c.init(a),c.update(a),(l=c.material).transparent=a.transparent,{material:l,shader:c}}(this.el,n,o),this.material=t.material,this.shaderObject=t.shader,this.material.side=o.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var e,t=this.data,n=this.el,i=this.geometry,r=this;t.font||Mh("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),e=this.lookupFont(t.font||zi)||t.font,Us.get(e,function(){return function(o,s){return new Promise(function(A,a){Lh()(o,function(l,c){if(l)return It("Error loading font",o),void a(l);o.indexOf("/Roboto-msdf.json")>=0&&(s=30),s&&c.chars.forEach(function(d){d.yoffset+=s}),A(c)})})}(e,t.yOffset)}).then(function(o){var s;if(o.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");Os[e]||(o.widthFactor=Os[o]=function(A){var a=0,l=0,c=0;return A.chars.forEach(function(d){a+=d.xadvance,d.id>=48&&d.id<=57&&(c++,l+=d.xadvance)}),c?l/c:a/A.chars.length}(o)),r.currentFont=o,s=r.getFontImageSrc(),Us.get(s,function(){return function(A){return new Promise(function(a,l){new h.ImageLoader().load(A,function(c){a(c)},void 0,function(){It("Error loading font image",A),l(null)})})}(s)}).then(function(A){var a=r.texture;a&&(a.image=A,a.needsUpdate=!0,Cn[t.font]=a,r.texture=a,r.initMesh(),r.currentFont=o,r.updateGeometry(i,o),r.updateLayout(),r.mesh.visible=!0,n.emit("textfontset",{font:t.font,fontObj:o}))}).catch(function(A){It(A.message),It(A.stack)})}).catch(function(o){It(o.message),It(o.stack)})},initMesh:function(){this.mesh||(this.mesh=new h.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var e=this.lookupFont(this.data.font||zi)||this.data.font,t=this.currentFont.pages[0];return t.match(Sh)&&t.indexOf("http")!==0?e.replace(/(\.fnt)|(\.json)/,".png"):h.LoaderUtils.extractUrlBase(e)+t},updateLayout:function(){var e,t,n,i,r,o,s,A,a,l=this.el,c=this.data,d=this.geometry,f=this.mesh;if(f&&d.layout){if(n=l.getAttribute("geometry"),i=(o=(s=c.width||n&&n.width||1)/Ps(c.wrapPixels,c.wrapCount,this.currentFont.widthFactor))*((r=d.layout).height+r.descender),n&&n.primitive==="plane"&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!n.width,this.hasExplicitGeoHeight=!!n.height),this.hasExplicitGeoWidth||l.setAttribute("geometry","width",s),this.hasExplicitGeoHeight||l.setAttribute("geometry","height",i)),(e=c.anchor==="align"?c.align:c.anchor)==="left")A=0;else if(e==="right")A=-1*r.width;else{if(e!=="center")throw new TypeError("Invalid text.anchor property value",e);A=-1*r.width/2}if((t=c.baseline)==="bottom")a=0;else if(t==="top")a=-1*r.height+r.ascender;else{if(t!=="center")throw new TypeError("Invalid text.baseline property value",t);a=-1*r.height/2}f.position.x=A*o+c.xOffset,f.position.y=a*o,f.position.z=c.zOffset,f.scale.set(o,-1*o,o)}},lookupFont:function(e){return Ts[e]},updateGeometry:(Ds={},yt={},ks=/\\n/g,Rs=/\\t/g,function(e,t){var n=this.data;yt.font=t,yt.lineHeight=n.lineHeight&&isFinite(n.lineHeight)?n.lineHeight:t.common.lineHeight,yt.text=n.value.toString().replace(ks,`
`).replace(Rs,"	"),yt.width=Ps(n.wrapPixels,n.wrapCount,t.widthFactor),e.update(Le(Ds,n,yt))})});var wt,Wi,Gs=(P("tracked-controls",{schema:{id:{type:"string",default:""},controller:{default:-1},autoHide:{default:!0},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},iterateControllerProfiles:{default:!1}},init:function(){this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.updateController=this.updateController.bind(this)},update:function(){this.updateController()},play:function(){var e=this.el.sceneEl;this.updateController(),e.addEventListener("controllersupdated",this.updateController)},pause:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(e){return!(!this.controller||this.controller.gamepad||e.inputSource.handedness!=="none"&&e.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=Zr(this.system.controllers,this.data.id,this.data.hand,this.data.controller,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller},tick:function(){var e=this.el.sceneEl,t=this.controller,n=e.frame;this.data.autoHide&&(this.el.object3D.visible=!!t),t&&e.frame&&this.system.referenceSpace&&(t.hand||(this.pose=n.getPose(t.gripSpace,this.system.referenceSpace),this.updatePose(),this.updateButtons()))},updatePose:function(){var e=this.el.object3D,t=this.pose;t&&(e.matrix.elements=t.transform.matrix,e.matrix.decompose(e.position,e.rotation,e.scale))},updateButtons:function(){var e,t,n,i=this.controller;if(i&&i.gamepad){for(n=i.gamepad,t=0;t<n.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[t]||(this.buttonEventDetails[t]={id:t,state:this.buttonStates[t]}),e=n.buttons[t],this.handleButton(t,e);this.handleAxes()}},handleButton:function(e,t){return!!(this.handlePress(e,t)|this.handleTouch(e,t)|this.handleValue(e,t))&&(this.el.emit("buttonchanged",this.buttonEventDetails[e],!1),!0)},handleAxes:function(){var e,t=!1,n=this.controller.gamepad.axes,i=this.axis,r=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),e=0;e<n.length;++e)r.push(i[e]!==n[e]),r[e]&&(t=!0);if(!t)return!1;for(this.axis.splice(0,this.axis.length),e=0;e<n.length;e++)this.axis.push(n[e]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(e,t){var n,i=this.buttonStates[e];return t.pressed!==i.pressed&&(n=t.pressed?"buttondown":"buttonup",this.el.emit(n,this.buttonEventDetails[e],!1),i.pressed=t.pressed,!0)},handleTouch:function(e,t){var n,i=this.buttonStates[e];return t.touched!==i.touched&&(n=t.touched?"touchstart":"touchend",this.el.emit(n,this.buttonEventDetails[e],!1),i.touched=t.touched,!0)},handleValue:function(e,t){var n=this.buttonStates[e];return t.value!==n.value&&(n.value=t.value,!0)}}),P("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}}),de+"controllers/valve/index/valve-index-"),Dh={left:Gs+"left.glb",right:Gs+"right.glb"},Ns="valve",kh={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},Rh={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},Th=(P("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t=e.hand==="right"?0:e.hand==="left"?1:2;De(this,Ns,{index:t,iterateControllerProfiles:!0,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:Ns,controller:t.hand==="right"?1:t.hand==="left"?0:2,hand:t.hand}),this.loadModel()},loadModel:function(){var e=this.data;e.model&&this.el.setAttribute("gltf-model",""+Dh[e.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping.buttons[e.detail.id],i=this.buttonMeshes;n&&(n==="trigger"&&(t=e.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=this.triggerOriginalRotationX-t*(Math.PI/40))),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){var t,n=e.detail.model,i=this;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},t.menu=n.getObjectByName("menubutton"),t.system=n.getObjectByName("systembutton"),t.trackpad=n.getObjectByName("touchpad"),t.trigger=n.getObjectByName("trigger"),this.triggerOriginalRotationX=t.trigger.rotation.x,Object.keys(t).forEach(function(r){i.setButtonColor(r,i.data.buttonColor)}),n.position.copy(Rh[this.data.hand]),n.rotation.copy(kh[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new h.Vector3(0,0,0)}))},onAxisMoved:function(e){Ue(this,this.mapping.axes,e)},updateModel:function(e,t){var n;this.data.model&&(t.indexOf("touch")!==-1||(n=t==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(e,n)))},setButtonColor:function(e,t){}}),de+"controllers/vive/vr_controller_vive.obj"),Fh=de+"controllers/vive/vr_controller_vive.mtl",js="htc-vive",Uh=(P("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex=e.hand==="right"?0:e.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;De(this,js,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:js,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("obj-model",{obj:Th,mtl:Fh})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping.buttons[e.detail.id],i=this.buttonMeshes;n&&(n==="trigger"&&(t=e.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=-t*(Math.PI/12))),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){var t,n=e.detail.model,i=this;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},t.menu=n.getObjectByName("menubutton"),t.system=n.getObjectByName("systembutton"),t.trackpad=n.getObjectByName("touchpad"),t.touchpad=n.getObjectByName("touchpad"),t.trigger=n.getObjectByName("trigger"),Object.keys(t).forEach(function(r){i.setButtonColor(r,i.data.buttonColor)}),n.position.set(0,-.015,.04))},onAxisMoved:function(e){Ue(this,this.mapping.axes,e)},updateModel:function(e,t){var n;this.data.model&&(t.indexOf("touch")!==-1||(n=t==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(e,n)))},setButtonColor:function(e,t){var n=this.buttonMeshes;if(n)return e==="grip"?(n.grip.left.material.color.set(t),void n.grip.right.material.color.set(t)):void n[e].material.color.set(t)}}),de+"controllers/vive/focus-controller/focus-controller.gltf"),_s="htc-vive-focus",Hs=(P("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){De(this,_s,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){this.el.setAttribute("tracked-controls",{idPrefix:_s}),this.data.model&&this.el.setAttribute("gltf-model",Uh)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,n=e.detail.model;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).trigger=n.getObjectByName("BumperKey"),t.triggerPressed=n.getObjectByName("BumperKey_Press"),t.triggerPressed&&(t.triggerPressed.visible=!1),t.touchpad=n.getObjectByName("TouchPad"),t.touchpadPressed=n.getObjectByName("TouchPad_Press"),t.trackpad=n.getObjectByName("TouchPad"),t.trackpadPressed=n.getObjectByName("TouchPad_Press"),t.trackpadPressed&&(t.trackpadPressed.visible=!1))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){Ue(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n=this.buttonMeshes,i=e+"Pressed";if(n&&n[e]&&n[i]){var r;switch(t){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor}r&&n[i].material.color.set(r),n[i].visible=!!r,n[e].visible=!r}}}),{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}),Oh=no,qs=1e-5,Ph=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];P("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new h.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(e,t){var n=this.data,i=this.el,r=this.velocity;(r[n.adAxis]||r[n.wsAxis]||!function(o){var s;for(s in o)return!1;return!0}(this.keys))&&(t/=1e3,this.updateVelocity(t),(r[n.adAxis]||r[n.wsAxis])&&i.object3D.position.add(this.getMovementVector(t)))},update:function(e){e.adAxis!==this.data.adAxis&&(this.velocity[e.adAxis]=0),e.wsAxis!==this.data.wsAxis&&(this.velocity[e.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(e){var t,n,i,r,o,s=this.data,A=this.keys,a=this.velocity;if(n=s.adAxis,r=s.wsAxis,e>.2)return a[n]=0,void(a[r]=0);var l=Math.pow(1/this.easing,60*e);a[n]!==0&&(a[n]=a[n]*l),a[r]!==0&&(a[r]=a[r]*l),Math.abs(a[n])<qs&&(a[n]=0),Math.abs(a[r])<qs&&(a[r]=0),s.enabled&&(t=s.acceleration,s.adEnabled&&(i=s.adInverted?-1:1,(A.KeyA||A.ArrowLeft)&&(a[n]-=i*t*e),(A.KeyD||A.ArrowRight)&&(a[n]+=i*t*e)),s.wsEnabled&&(o=s.wsInverted?-1:1,(A.KeyW||A.ArrowUp)&&(a[r]-=o*t*e),(A.KeyS||A.ArrowDown)&&(a[r]+=o*t*e)))},getMovementVector:(wt=new h.Vector3(0,0,0),Wi=new h.Euler(0,0,0,"YXZ"),function(e){var t,n=this.el.getAttribute("rotation"),i=this.velocity;return wt.copy(i),wt.multiplyScalar(e),n&&(t=this.data.fly?n.x:0,Wi.set(h.MathUtils.degToRad(t),h.MathUtils.degToRad(n.y),0),wt.applyEuler(Wi)),wt}),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var e=Object.keys(this.keys),t=0;t<e.length;t++)delete this.keys[e[t]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(e){var t;Oh(e)&&(t=e.code||Hs[e.keyCode],Ph.indexOf(t)!==-1&&(this.keys[t]=!0))},onKeyUp:function(e){var t;t=e.code||Hs[e.keyCode],delete this.keys[t]}});var Ki,vn,Gt,Nt=ee("components:windows-motion-controls:debug"),xt=ee("components:windows-motion-controls:warn"),Gh=de+"controllers/microsoft/",Vs={left:"left.glb",right:"right.glb",default:"universal.glb"},zs="windows-mixed-reality",Qt=(P("windows-motion-controls",{schema:{hand:{default:"right"},pair:{default:0},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this,t=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(n){q(n.detail.id,"down",e)},this.onButtonUp=function(n){q(n.detail.id,"up",e)},this.onButtonTouchStart=function(n){q(n.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(n){q(n.detail.id,"touchend",e)},this.onControllerConnected=function(){e.setModelVisibility(!0)},this.onControllerDisconnected=function(){e.setModelVisibility(!1)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new h.Vector3,direction:new h.Vector3(0,0,-1),createdFromMesh:!1},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-error",this.onModelError),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-error",this.onModelError),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){De(this,zs,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var e=this.createControllerModelUrl();this.loadModel(e)}else this.modelReady()},createControllerModelUrl:function(e){var t=this.data.hand;return Gh+"default/"+(Vs[t]||Vs.default)},injectTrackedControls:function(){var e=this.data;this.el.setAttribute("tracked-controls",{idPrefix:zs,controller:e.pair,hand:e.hand}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(e){var t=this.createControllerModelUrl(!0);e.detail.src!==t?(xt("Failed to load controller model for device, attempting to load default."),this.loadModel(t)):xt("Failed to load default controller model.")},loadModel:function(e){this.el.setAttribute("gltf-model","url("+e+")")},onModelLoaded:function(e){var t,n,i,r,o=this.controllerModel=e.detail.model,s=this.loadedMeshInfo;if(e.target===this.el){if(Nt("Processing model"),s.buttonMeshes={},s.axisMeshes={},o){for(t=0;t<this.mapping.buttons.length;t++)(n=this.mapping.buttonMeshNames[this.mapping.buttons[t]])?(i=o.getObjectByName(n))?(r={index:t,value:A(i,"VALUE"),pressed:A(i,"PRESSED"),unpressed:A(i,"UNPRESSED")}).value&&r.pressed&&r.unpressed?s.buttonMeshes[this.mapping.buttons[t]]=r:xt("Missing button submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", PRESSED: "+!!r.pressed+", UNPRESSED:"+!!r.unpressed+")"):xt("Missing button mesh with name: "+n):Nt("Skipping unknown button at index: "+t+" with mapped name: "+this.mapping.buttons[t]);for(t=0;t<this.mapping.axisMeshNames.length;t++)(n=this.mapping.axisMeshNames[t])?(i=o.getObjectByName(n))?(r={index:t,value:A(i,"VALUE"),min:A(i,"MIN"),max:A(i,"MAX")}).value&&r.min&&r.max?s.axisMeshes[t]=r:xt("Missing axis submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", MIN: "+!!r.min+", MAX:"+!!r.max+")"):xt("Missing axis mesh with name: "+n):Nt("Skipping unknown axis at index: "+t);this.calculateRayOriginFromMesh(o),this.setModelVisibility()}Nt("Model load complete.")}function A(a,l){for(var c=0,d=a.children.length;c<d;c++){var f=a.children[c];if(f&&f.name===l)return f}}},calculateRayOriginFromMesh:function(){var e=new h.Quaternion;return function(t){var n;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,n=t.getObjectByName(this.mapping.pointingPoseMeshName)){var i=t.parent;i&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=i),n.getWorldPosition(this.rayOrigin.origin),n.getWorldQuaternion(e),this.rayOrigin.direction.applyQuaternion(e),i&&t.updateMatrixWorld(!0)}else Nt("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var e=new h.Quaternion;return function(t,n){var i=this.loadedMeshInfo.axisMeshes[t];if(i){var r=i.min,o=i.max,s=i.value,A=.5*n+.5;s.setRotationFromQuaternion(e.copy(r.quaternion).slerp(o.quaternion,A)),s.position.lerpVectors(r.position,o.position,A)}}}(),lerpButtonTransform:function(){var e=new h.Quaternion;return function(t,n){var i=this.loadedMeshInfo.buttonMeshes[t];if(i){var r=i.unpressed,o=i.pressed,s=i.value;s.setRotationFromQuaternion(e.copy(r.quaternion).slerp(o.quaternion,n)),s.position.lerpVectors(r.position,o.position,n)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(t,e.detail.state.value),this.el.emit(t+"changed",e.detail.state))},onAxisMoved:function(e){var t=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var n=0;n<t;n++)this.lerpAxisTransform(n,e.detail.axis[n]||0);Ue(this,this.mapping.axes,e)},setModelVisibility:function(e){var t=this.el.getObject3D("mesh");this.controllerPresent&&(e=e!==void 0?e:this.modelVisible,this.modelVisible=e,t&&(t.visible=e))}}),Ki=new h.Quaternion,vn=new h.Vector3,function(e,t,n){t.position.copy(e.transform.position),t.quaternion.copy(e.transform.orientation),vn.copy(n),Ki.copy(e.transform.orientation),vn.applyQuaternion(Ki),t.position.sub(vn)});function ye(e,t){this.renderer=e,this.xrHitTestSource=null,e.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),e.xr.addEventListener("sessionstart",(function(){this.sessionStart(t)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(t)}function Yi(e){console.warn(e.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}Qt.tempFakePose={transform:{orientation:new h.Quaternion,position:new h.Vector3}},ye.prototype.previousFrameAnchors=new Set,ye.prototype.anchorToObject3D=new Map,ye.prototype.sessionStart=function(e){this.session=this.renderer.xr.getSession(),"requestHitTestSource"in this.session?e.space?this.session.requestHitTestSource(e).then((function(t){this.xrHitTestSource=t}).bind(this)).catch(Yi):e.profile&&this.session.requestHitTestSourceForTransientInput(e).then((function(t){this.xrHitTestSource=t,this.transient=!0}).bind(this)).catch(Yi):Yi({message:"No requestHitTestSource on the session."})},ye.prototype.anchorFromLastHitTestResult=function(e,t){var n=this.lastHitTest;if(n){var i={object3D:e,offset:t};Array.from(this.anchorToObject3D.entries()).forEach((function(r){var o=r[1].object3D,s=r[0];o===e&&(this.anchorToObject3D.delete(s),s.delete())}).bind(this)),n.createAnchor&&n.createAnchor().then((function(r){this.anchorToObject3D.set(r,i)}).bind(this)).catch(function(r){console.warn(r.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},ye.prototype.doHit=function(e){if(this.renderer.xr.isPresenting){var t,n,i=this.renderer.xr.getReferenceSpace(),r=e.getViewerPose(i);return this.xrHitTestSource&&r?this.transient?(t=e.getHitTestResultsForTransientInput(this.xrHitTestSource)).length>0&&(n=t[0].results).length>0&&(this.lastHitTest=n[0],n[0].getPose(i)):(t=e.getHitTestResults(this.xrHitTestSource)).length>0&&(this.lastHitTest=t[0],t[0].getPose(i)):void 0}},ye.updateAnchorPoses=function(e,t){var n=e.trackedAnchors||ye.prototype.previousFrameAnchors;ye.prototype.previousFrameAnchors.forEach(function(i){n.has(i)||ye.prototype.anchorToObject3D.delete(i)}),n.forEach(function(i){var r,o,s,A;try{if(r=e.getPose(i.anchorSpace,t)){if(!(o=ye.prototype.anchorToObject3D.get(i)))return;s=o.offset,A=o.object3D,Qt(r,A,s)}}catch(a){console.error("while updating anchor poses:",a)}}),ye.prototype.previousFrameAnchors=n},P("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:"data:image/webp;base64,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",type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new h.OrthographicCamera,this.orthoCam.layers.set(21),this.textureTarget=new h.WebGLRenderTarget(512,512,{}),this.basicMaterial=new h.MeshBasicMaterial({color:0,side:h.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new h.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var e=this.el.getAttribute("webxr"),t=e.optionalFeatures;t.includes("hit-test")&&t.includes("anchors")||(t.push("hit-test"),t.push("anchors"),this.el.setAttribute("webxr",e)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.addEventListener("enter-vr",(function(){if(this.el.is("ar-mode")){var n=this.el.sceneEl.renderer,i=this.session=n.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,Gt||(Gt=new Map),i.requestReferenceSpace("viewer").then((function(A){this.viewerHitTest=this.hitTest=new ye(n,{space:A}),this.el.emit("ar-hit-test-start")}).bind(this));var r=this;this.el.sceneEl.addEventListener("controllersupdated",function(){var A=this.xrSession&&this.xrSession.inputSources;if(A){for(var a=0;a<A.length;++a)if(A[a].targetRayMode==="tracked-pointer"){r.hitTest=new ye(n,{space:A[a].targetRaySpace}),Gt.set(A[a],r.hitTest),r.viewerHitTest&&typeof r.viewerHitTest.cancel=="function"&&(r.viewerHitTest.cancel(),r.viewerHitTest=null);break}}});var o="generic-touchscreen",s=new ye(n,{profile:o});i.addEventListener("selectstart",(function(A){if(this.data.enabled===!0){var a=A.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:a,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),a.profiles[0]===o?this.hitTest=s:(this.hitTest=Gt.get(a)||new ye(n,{space:a.targetRaySpace}),Gt.set(a,this.hitTest)))}}).bind(this)),i.addEventListener("selectend",(function(A){if(this.hitTest&&this.data.enabled===!0){var a,l=A.inputSource;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(a=this.data.target.object3D)&&(Qt.tempFakePose.transform.position.copy(this.bboxMesh.position),Qt.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),Qt(Qt.tempFakePose,a,this.bboxOffset),a.visible=!0,this.hitTest.anchorFromLastHitTestResult(a,this.bboxOffset)),this.el.emit("ar-hit-test-select",{inputSource:l,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),this.hitTest=null)}else this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new h.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(21),this.data.target.object3D.traverse(function(e){e.layers.enable(21)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var e=new h.PlaneGeometry(1,1),t=new h.MeshBasicMaterial({transparent:!0,color:16777215});e.rotateX(-Math.PI/2),e.rotateY(-Math.PI/2),this.bbox=new h.Box3,this.bboxMesh=new h.Mesh(e,t),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var e,t,n,i=this.el.sceneEl.renderer,r=i.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),t=i.getRenderTarget(),i.setRenderTarget(this.textureTarget),i.xr.enabled=!1,n=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,i.render(this.el.object3D,this.orthoCam),this.el.object3D.background=n,this.el.object3D.overrideMaterial=null,i.xr.enabled=r,i.setRenderTarget(t),i.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),e=this.context.getImageData(0,0,512,512);for(var o=0;o<262144;o++)e.data[4*o+3]!==0&&e.data[4*o+3]!==255&&(e.data[4*o+3]=128);this.context.putImageData(e,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var e,t,n=this.el.sceneEl.frame,i=this.el.sceneEl.renderer;n&&ye.updateAnchorPoses(n,i.xr.getReferenceSpace()),this.bboxNeedsUpdate&&(this.bboxNeedsUpdate=!1,this.data.target&&this.data.type!=="map"||(this.textureCache.has(this.data.src)?t=this.textureCache.get(this.data.src):(t=new h.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,t)),this.bboxMesh.material.map=t,this.bboxMesh.material.needsUpdate=!0),this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)),this.hitTest&&(e=this.hitTest.doHit(n))&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(e.transform.position),this.bboxMesh.quaternion.copy(e.transform.orientation))}}),P("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var e=this.data,t=this.el.object3D;e.transparent?t.background=null:t.background=new h.Color(e.color)},remove:function(){this.el.object3D.background=null}}),P("debug",{schema:{default:!0},sceneOnly:!0});var Ws="a-dialog-buttons-container",Ji="a-dialog-button";function Ks(e,t){var n,i,r,o;return(n=document.createElement("div")).classList.add("a-modal"),n.setAttribute(be,""),(i=document.createElement("div")).className="a-dialog",i.setAttribute(be,""),n.appendChild(i),(r=document.createElement("div")).classList.add("a-dialog-text-container"),i.appendChild(r),(o=document.createElement("div")).classList.add("a-dialog-text"),o.innerHTML=e,r.appendChild(o),i.appendChild(t),n}P("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var e=this;this.data.enabled&&(window.isSecureContext||this.showHTTPAlert(),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission?(this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then(function(){e.el.emit("deviceorientationpermissiongranted"),e.permissionGranted=!0}).catch(function(){var t,n,i,r,o,s,A,a;e.devicePermissionDialogEl=(t=e.data.denyButtonText,n=e.data.allowButtonText,i=e.data.deviceMotionMessage,r=e.onDeviceMotionDialogAllowClicked,o=e.onDeviceMotionDialogDenyClicked,(s=document.createElement("div")).classList.add(Ws),(A=document.createElement("button")).classList.add(Ji,"a-dialog-deny-button"),A.setAttribute(be,""),A.innerHTML=t,s.appendChild(A),(a=document.createElement("button")).classList.add(Ji,"a-dialog-allow-button"),a.setAttribute(be,""),a.innerHTML=n,s.appendChild(a),a.addEventListener("click",function(l){l.stopPropagation(),r()}),A.addEventListener("click",function(l){l.stopPropagation(),o()}),Ks(i,s)),e.el.appendChild(e.devicePermissionDialogEl)})):this.permissionGranted=!0)},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var e,t,n,i,r,o=this,s=(e=o.data.cancelButtonText,t=o.data.httpsMessage,n=function(){o.el.removeChild(s)},(i=document.createElement("div")).classList.add(Ws),(r=document.createElement("button")).classList.add(Ji,"a-dialog-ok-button"),r.setAttribute(be,""),r.innerHTML=e,i.appendChild(r),r.addEventListener("click",function(A){A.stopPropagation(),n()}),Ks(t,i));this.el.appendChild(s)},onDeviceMotionDialogAllowClicked:function(){var e=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(t){t==="granted"?(e.el.emit("deviceorientationpermissiongranted"),e.permissionGranted=!0):e.el.emit("deviceorientationpermissionrejected"),e.remove()}).catch(console.error)}}),P("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var e=this.el,t=e.querySelector(".a-enter-vr");this.data===!0?(t&&t.classList.add("embedded"),e.removeFullScreenStyles()):(t&&t.classList.remove("embedded"),e.addFullScreenStyles())}});var Nh="https://unpkg.com/aframe-inspector@"+function(){var e=yA.split(".");return e[2]="x",e.join(".")}()+"/dist/aframe-inspector.min.js";P("inspector",{schema:{url:{default:Nh}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var e;this.firstPlay&&(e=Jt("inspector"))!=="false"&&e&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(e){e.keyCode===73&&(e.ctrlKey&&e.altKey||e.getModifierState("AltGraph"))&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(e){e.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(e){var t,n=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(e):(this.showLoader(),(t=document.createElement("script")).src=this.data.url,t.setAttribute("data-name","aframe-inspector"),t.setAttribute(be,""),t.onload=function(){AFRAME.INSPECTOR.open(e),n.hideLoader(),n.removeEventListeners()},t.onerror=function(){n.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(t),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}}),P("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var e=this.data,t=this.el,n=this.el.object3D.fog;n&&e.type===n.name?Object.keys(this.schema).forEach(function(i){var r=e[i];i==="color"&&(r=new h.Color(r)),n[i]=r}):t.object3D.fog=function(i){var r;return(r=i.type==="exponential"?new h.FogExp2(i.color,i.density):new h.Fog(i.color,i.near,i.far)).name=i.type,r}(e)},remove:function(){var e=this.el;this.el.object3D.fog&&(e.object3D.fog=null)}}),P("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(e){var t=this.el;no(e)&&(this.data.enterVR&&e.keyCode===70&&t.enterVR(),this.data.exitVR&&e.keyCode===27&&t.exitVR())}});var jt=ee("components:pool:warn");P("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var e;for(this.availableEls=[],this.usedEls=[],this.data.mixin||jt("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||jt("Container "+this.data.container+" not found.")),this.container=this.container||this.el,e=0;e<this.data.size;++e)this.createEntity()},update:function(e){var t=this.data;e.mixin===t.mixin&&e.size===t.size||this.initPool()},createEntity:function(){var e;(e=document.createElement("a-entity")).play=this.wrapPlay(e.play),e.setAttribute("mixin",this.data.mixin),e.object3D.visible=!1,e.pause(),this.container.appendChild(e),this.availableEls.push(e);var t=this.usedEls;e.addEventListener("loaded",function(){t.indexOf(e)===-1&&(e.object3DParent=e.object3D.parent,e.object3D.parent.remove(e.object3D))})},wrapPlay:function(e){var t=this.usedEls;return function(){t.indexOf(this)!==-1&&e.call(this)}},requestEntity:function(){var e;if(this.availableEls.length===0){if(this.data.dynamic===!1)return void jt("Requested entity from empty pool: "+this.attrName);jt("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return e=this.availableEls.shift(),this.usedEls.push(e),e.object3DParent&&(e.object3DParent.add(e.object3D),this.updateRaycasters()),e.object3D.visible=!0,e},returnEntity:function(e){var t=this.usedEls.indexOf(e);if(t!==-1)return this.usedEls.splice(t,1),this.availableEls.push(e),e.object3DParent=e.object3D.parent,e.object3D.parent.remove(e.object3D),this.updateRaycasters(),e.object3D.visible=!1,e.pause(),e;jt("The returned entity was not previously pooled from "+this.attrName)},updateRaycasters:function(){document.querySelectorAll("[raycaster]").forEach(function(e){e.components.raycaster.setDirty()})}}),P("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var e=this.el.getAttribute("webxr"),t=e.requiredFeatures;t.indexOf("mesh-detection")===-1&&(t.push("mesh-detection"),this.el.setAttribute("webxr",e)),t.indexOf("plane-detection")===-1&&(t.push("plane-detection"),this.el.setAttribute("webxr",e)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var e,t,n,i=this.data,r=this.el,o=this.meshEntities,s=!1,A=[],a=this.data.filterLabels;e=(n=r.frame).detectedMeshes,t=n.detectedPlanes;for(var l=0;l<o.length;l++)o[l].present=!1;if(i.meshesEnabled){for(var c of e.values())if(!a.length||a.indexOf(c.semanticLabel)!==-1){for(l=0;l<o.length;l++)if(c===o[l].mesh){s=!0,o[l].present=!0,o[l].lastChangedTime<c.lastChangedTime&&this.updateMeshGeometry(o[l].el,c),o[l].lastChangedTime=c.lastChangedTime;break}s||A.push(c),s=!1}}if(i.planesEnabled){for(c of t.values())if(!a.length||a.indexOf(c.semanticLabel)!==-1){for(l=0;l<o.length;l++)if(c===o[l].mesh){s=!0,o[l].present=!0,o[l].lastChangedTime<c.lastChangedTime&&this.updateMeshGeometry(o[l].el,c),o[l].lastChangedTime=c.lastChangedTime;break}s||A.push(c),s=!1}}this.deleteMeshes(),this.createNewMeshes(A)},updateMeshes:function(){var e=new h.Matrix4;return function(){for(var t,n,i,r=this.el,o=r.frame,s=this.meshEntities,A=r.renderer.xr.getReferenceSpace(),a=0;a<s.length;a++)i=s[a].mesh.meshSpace||s[a].mesh.planeSpace,t=o.getPose(i,A),(n=s[a].el).hasLoaded&&(e.fromArray(t.transform.matrix),e.decompose(n.object3D.position,n.object3D.quaternion,n.object3D.scale))}}(),deleteMeshes:function(){for(var e=this.meshEntities,t=[],n=0;n<e.length;n++)e[n].present?t.push(e[n]):this.el.removeChild(e[n]);this.meshEntities=t},createNewMeshes:function(e){for(var t,n=0;n<e.length;n++)t=document.createElement("a-entity"),this.meshEntities.push({mesh:e[n],el:t}),t.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(t)},initMeshGeometry:function(e){var t,n,i;if(e instanceof XRPlane){n=new h.Shape,i=e.polygon;for(var r=0;r<i.length;++r)r===0?n.moveTo(i[r].x,i[r].z):n.lineTo(i[r].x,i[r].z);return(t=new h.ShapeGeometry(n)).rotateX(Math.PI/2),t}return(t=new h.BufferGeometry).setAttribute("position",new h.BufferAttribute(e.vertices,3)),t.setIndex(new h.BufferAttribute(e.indices,1)),t},initWorldMeshEntity:function(e){for(var t,n,i,r=e.target,o=this.meshEntities,s=0;s<o.length;s++)if(o[s].el===r){i=o[s];break}t=this.initMeshGeometry(i.mesh),n=new h.Mesh(t,new h.MeshBasicMaterial({color:16777215*Math.random(),side:h.DoubleSide})),r.setObject3D("mesh",n),i.mesh instanceof XRPlane&&this.data.planeMixin?r.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&r.setAttribute("mixin",this.data.meshMixin),r.setAttribute("data-world-mesh",i.mesh.semanticLabel)},updateMeshGeometry:function(e,t){var n=e.getObject3D("mesh");n.geometry.dispose(),n.geometry=this.initMeshGeometry(t)}}),P("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var e=this;this.cubeRenderTarget=new h.WebGLCubeRenderTarget(16),this.cubeCamera=new h.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new h.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var t=this.el.getAttribute("webxr"),n=t.optionalFeatures;n.includes("light-estimation")||(n.push("light-estimation"),this.el.setAttribute("webxr",t)),this.el.addEventListener("enter-vr",function(){e.el.is("ar-mode")&&e.el.renderer.xr.getSession().requestLightProbe&&e.startLightProbe()}),this.el.addEventListener("exit-vr",function(){e.xrLightProbe&&e.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var e=this.el.renderer,t=e.xr.getSession(),n=this,i=e.getContext();if(!this.probeLight){var r=document.createElement("a-light");r.setAttribute("type","probe"),r.setAttribute("intensity",0),this.el.appendChild(r),this.probeLight=r}switch(t.preferredReflectionFormat){case"srgba8":i.getExtension("EXT_sRGB");break;case"rgba16f":i.getExtension("OES_texture_half_float")}this.glBinding=new XRWebGLBinding(t,i),i.getExtension("EXT_sRGB"),i.getExtension("OES_texture_half_float"),t.requestLightProbe().then(function(o){n.xrLightProbe=o,o.addEventListener("reflectionchange",n.updateXRCubeMap.bind(n))}).catch(function(o){console.warn("Lighting estimation not supported: "+o.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var e=this.el.renderer,t=this.glBinding.getReflectionCubeMap(this.xrLightProbe);t&&(e.properties.get(this.lightingEstimationTexture).__webglTexture=t,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture)},tick:function(){var e=this.el.object3D,t=this.el.renderer,n=this.el.frame;if(n&&this.xrLightProbe){var i=n.getLightEstimate(this.xrLightProbe);i&&function(r,o,s,A){var a=Math.max(r.primaryLightIntensity.x,Math.max(r.primaryLightIntensity.y,r.primaryLightIntensity.z));o.sh.fromArray(r.sphericalHarmonicsCoefficients),o.intensity=3.14,s&&(s.color.setRGB(r.primaryLightIntensity.x/a,r.primaryLightIntensity.y/a,r.primaryLightIntensity.z/a),s.intensity=a,A.copy(r.primaryLightDirection))}(i,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(e.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(t,e),e.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&n&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}});var jh=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),_h=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`),Hh=(P("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var e=this.el;if(!this.canvas){var t=e.renderer.getContext();t&&(this.cubeMapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new h.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:jh,fragmentShader:_h,side:h.DoubleSide}),this.quad=new h.Mesh(new h.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new h.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),e.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(e,t){return new h.WebGLRenderTarget(e,t,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:h.LinearFilter,magFilter:h.LinearFilter,wrapS:h.ClampToEdgeWrapping,wrapT:h.ClampToEdgeWrapping,format:h.RGBAFormat,type:h.UnsignedByteType})},resize:function(e,t){this.quad.scale.set(e,t,1),this.camera.left=-1*e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-1*t/2,this.camera.updateProjectionMatrix(),this.canvas.width=e,this.canvas.height=t},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(e){var t=e.keyCode===83&&e.ctrlKey&&e.altKey;if(this.data&&t){var n=e.shiftKey?"equirectangular":"perspective";this.capture(n)}},setCapture:function(e){var t,n,i,r,o=this.el;return e==="perspective"?(this.quad.visible=!1,n=this.data.camera&&this.data.camera.components.camera.camera||o.camera,t={width:this.data.width,height:this.data.height}):(n=this.camera,r=new h.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:h.RGBFormat,generateMipmaps:!0,minFilter:h.LinearMipmapLinearFilter,colorSpace:h.SRGBColorSpace}),i=new h.CubeCamera(o.camera.near,o.camera.far,r),o.camera.getWorldPosition(i.position),o.camera.getWorldQuaternion(i.quaternion),i.update(o.renderer,o.object3D),this.quad.material.uniforms.map.value=i.renderTarget.texture,t={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:n,size:t,projection:e}},capture:function(e){var t,n=this.el.renderer.xr.enabled,i=this.el.renderer;this.setup(),i.xr.enabled=!1,t=this.setCapture(e),this.renderCapture(t.camera,t.size,t.projection),this.saveCapture(),i.xr.enabled=n},getCanvas:function(e){var t=this.el.renderer.xr.enabled,n=this.el.renderer;this.setup();var i=this.setCapture(e);return n.xr.enabled=!1,this.renderCapture(i.camera,i.size,i.projection),n.xr.enabled=t,this.canvas},renderCapture:function(e,t,n){var i,r,o,s=this.el.renderer.autoClear,A=this.el,a=A.renderer;r=this.getRenderTarget(t.width,t.height),o=new Uint8Array(4*t.width*t.height),this.resize(t.width,t.height),a.autoClear=!0,a.clear(),a.setRenderTarget(r),a.render(A.object3D,e),a.autoClear=s,a.readRenderTargetPixels(r,0,0,t.width,t.height,o),a.setRenderTarget(null),n==="perspective"&&(o=this.flipPixelsVertically(o,t.width,t.height)),i=new ImageData(new Uint8ClampedArray(o),t.width,t.height),this.quad.visible=!1,this.ctx.putImageData(i,0,0)},flipPixelsVertically:function(e,t,n){for(var i=e.slice(0),r=0;r<t;++r)for(var o=0;o<n;++o)i[4*r+o*t*4]=e[4*r+(n-o)*t*4],i[4*r+1+o*t*4]=e[4*r+1+(n-o)*t*4],i[4*r+2+o*t*4]=e[4*r+2+(n-o)*t*4],i[4*r+3+o*t*4]=e[4*r+3+(n-o)*t*4];return i},saveCapture:function(){this.canvas.toBlob(function(e){var t="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",n=document.createElement("a"),i=URL.createObjectURL(e);n.href=i,n.setAttribute("download",t),n.innerHTML="downloading...",n.style.display="none",document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n)},1)},"image/png")}}),G(282)),qh=G.n(Hh),Vh=(G(3729),G(8132),window.aframeStats),Ys="a-hidden",zh=window.threeStats;P("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var e=this.el;Jt("stats")!=="false"&&(this.stats=function(t){var n=new zh(t.renderer),i=new Vh(t),r=t.isMobile?[]:[n,i];return new(qh())({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:r})}(e),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),e.addEventListener("enter-vr",this.hideBound),e.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var e=this.stats;e&&(e("rAF").tick(),e("FPS").frame(),e().update())},hide:function(){this.statsEl.classList.add(Ys)},show:function(){this.statsEl.classList.remove(Ys)}});var Et="a-hidden";function Js(e){e.addEventListener("touchstart",function(){e.classList.remove("resethover")},{passive:!0}),e.addEventListener("touchend",function(){e.classList.add("resethover")},{passive:!0})}P("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var e=this,t=this.el;Jt("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),t.addEventListener("enter-vr",this.updateEnterInterfaces),t.addEventListener("exit-vr",this.updateEnterInterfaces),t.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(n){n.data.type==="loaderReady"&&(e.insideLoader=!0,e.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var e,t,n,i=this.data,r=this.el;if(!i.enabled||this.insideLoader||Jt("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(this.enterVREl||!i.enterVREnabled||i.XRMode!=="xr"&&i.XRMode!=="vr"||(i.enterVRButton?(this.enterVREl=document.querySelector(i.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(e=this.onEnterVRButtonClick,(n=document.createElement("div")).classList.add("a-enter-vr"),n.setAttribute(be,""),(t=document.createElement("button")).className="a-enter-vr-button",t.setAttribute("title","Enter VR mode with a headset or fullscreen without"),t.setAttribute(be,""),At()&&Js(t),n.appendChild(t),t.addEventListener("click",function(o){e(),o.stopPropagation()}),n),r.appendChild(this.enterVREl))),this.enterAREl||!i.enterAREnabled||i.XRMode!=="xr"&&i.XRMode!=="ar"||(i.enterARButton?(this.enterAREl=document.querySelector(i.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=function(o,s){var A,a;return(a=document.createElement("div")).classList.add("a-enter-ar"),s&&a.classList.add("xr"),a.setAttribute(be,""),(A=document.createElement("button")).className="a-enter-ar-button",A.setAttribute("title","Enter AR mode with a headset or handheld device."),A.setAttribute(be,""),At()&&Js(A),a.appendChild(A),A.addEventListener("click",function(l){o(),l.stopPropagation()}),a}(this.onEnterARButtonClick,i.XRMode==="xr"),r.appendChild(this.enterAREl))),this.orientationModalEl=function(o){var s=document.createElement("div");s.className="a-orientation-modal",s.classList.add(Et),s.setAttribute(be,"");var A=document.createElement("button");return A.setAttribute(be,""),A.innerHTML="Exit VR",A.addEventListener("click",o),s.appendChild(A),s}(this.onModalClick),r.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var e=this.el;this.enterVREl&&(e.is("vr-mode")||(e.isMobile||jr())&&!vr()?this.enterVREl.classList.add(Et):(vr()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(Et),e.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var e=this.el;this.enterAREl&&(e.is("vr-mode")||!Nr()?this.enterAREl.classList.add(Et):(this.enterAREl.classList.remove(Et),e.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var e=this.el,t=this.orientationModalEl;t&&e.isMobile&&(!Za()&&e.is("vr-mode")?t.classList.remove(Et):t.classList.add(Et))}}),xe("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new h.BoxGeometry(e.width,e.height,e.depth,e.segmentsWidth,e.segmentsHeight,e.segmentsDepth)}});var Xs=h.MathUtils.degToRad;xe("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new h.CircleGeometry(e.radius,e.segments,Xs(e.thetaStart),Xs(e.thetaLength))}});var Zs=h.MathUtils.degToRad;xe("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new h.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,Zs(e.thetaStart),Zs(e.thetaLength))}});var $s=h.MathUtils.degToRad;xe("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new h.CylinderGeometry(e.radius,e.radius,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,$s(e.thetaStart),$s(e.thetaLength))}}),xe("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new h.DodecahedronGeometry(e.radius,e.detail)}}),xe("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new h.IcosahedronGeometry(e.radius,e.detail)}}),xe("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new h.OctahedronGeometry(e.radius,e.detail)}}),xe("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new h.PlaneGeometry(e.width,e.height,e.segmentsWidth,e.segmentsHeight)}});var ea=h.MathUtils.degToRad;xe("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new h.RingGeometry(e.radiusInner,e.radiusOuter,e.segmentsTheta,e.segmentsPhi,ea(e.thetaStart),ea(e.thetaLength))}});var bn=h.MathUtils.degToRad;xe("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(e){this.geometry=new h.SphereGeometry(e.radius,e.segmentsWidth,e.segmentsHeight,bn(e.phiStart),bn(e.phiLength),bn(e.thetaStart),bn(e.thetaLength))}}),xe("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new h.TetrahedronGeometry(e.radius,e.detail)}});var Wh=h.MathUtils.degToRad;xe("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(e){this.geometry=new h.TorusGeometry(e.radius,2*e.radiusTubular,e.segmentsRadial,e.segmentsTubular,Wh(e.arc))}}),xe("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(e){this.geometry=new h.TorusKnotGeometry(e.radius,2*e.radiusTubular,e.segmentsTubular,e.segmentsRadial,e.p,e.q)}});var Bn=new h.Quaternion,Kh=new h.Vector3(0,0,1),_t=new h.Vector2,ta=new h.Vector2,yn=new h.Vector2;function na(e,t){return t.color.set(e.color),t.fog=e.fog,t.wireframe=e.wireframe,t.toneMapped=e.toneMapped,t.wireframeLinewidth=e.wireframeLinewidth,t}function ia(e,t){return t.color.set(e.color),t.emissive.set(e.emissive),t.emissiveIntensity=e.emissiveIntensity,t.fog=e.fog,t.metalness=e.metalness,t.roughness=e.roughness,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}function ra(e,t){switch(t.color.set(e.color),t.specular.set(e.specular),t.emissive.set(e.emissive),t.emissiveIntensity=e.emissiveIntensity,t.fog=e.fog,t.transparent=e.transparent,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,t.shininess=e.shininess,t.flatShading=e.flatShading,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,t.reflectivity=e.reflectivity,t.refractionRatio=e.refractionRatio,e.combine){case"mix":t.combine=h.MixOperation;break;case"multiply":t.combine=h.MultiplyOperation;break;case"add":t.combine=h.AddOperation}return e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.bumpMap&&(t.bumpScale=e.bumpMapScale),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}xe("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(e){var t,n,i,r,o,s,A,a,l;(i=new h.Triangle).a.set(e.vertexA.x,e.vertexA.y,e.vertexA.z),i.b.set(e.vertexB.x,e.vertexB.y,e.vertexB.z),i.c.set(e.vertexC.x,e.vertexC.y,e.vertexC.z),n=i.getNormal(new h.Vector3),Bn.setFromUnitVectors(n,Kh),r=i.a.clone().applyQuaternion(Bn),o=i.b.clone().applyQuaternion(Bn),s=i.c.clone().applyQuaternion(Bn),_t.set(Math.min(r.x,o.x,s.x),Math.min(r.y,o.y,s.y)),ta.set(Math.max(r.x,o.x,s.x),Math.max(r.y,o.y,s.y)),yn.set(0,0).subVectors(ta,_t),r=new h.Vector2().subVectors(r,_t).divide(yn),o=new h.Vector2().subVectors(o,_t).divide(yn),s=new h.Vector2().subVectors(s,_t).divide(yn),t=this.geometry=new h.BufferGeometry,A=[i.a.x,i.a.y,i.a.z,i.b.x,i.b.y,i.b.z,i.c.x,i.c.y,i.c.z],a=[n.x,n.y,n.z,n.x,n.y,n.z,n.x,n.y,n.z],l=[r.x,r.y,o.x,o.y,s.x,s.y],t.setAttribute("position",new h.Float32BufferAttribute(A,3)),t.setAttribute("normal",new h.Float32BufferAttribute(a,3)),t.setAttribute("uv",new h.Float32BufferAttribute(l,2))}}),at("flat",{schema:{color:{type:"color"},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(e){this.materialData={color:new h.Color},na(e,this.materialData),this.material=new h.MeshBasicMaterial(this.materialData)},update:function(e){this.updateMaterial(e),kn(this,e)},updateMaterial:function(e){var t;for(t in na(e,this.materialData),this.materialData)this.material[t]=this.materialData[t]}}),at("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.materialData={color:new h.Color,emissive:new h.Color},ia(e,this.materialData),this.material=new h.MeshStandardMaterial(this.materialData)},update:function(e){this.updateMaterial(e),kn(this,e),He("normal",this,e),He("displacement",this,e),He("ambientOcclusion",this,e),He("metalness",this,e),He("roughness",this,e),Br(this,e)},updateMaterial:function(e){var t,n=this.material;for(t in ia(e,this.materialData),this.materialData)n[t]=this.materialData[t]}}),at("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(e){this.materialData={color:new h.Color,specular:new h.Color,emissive:new h.Color},ra(e,this.materialData),this.material=new h.MeshPhongMaterial(this.materialData);var t=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||t.object3D.environment},set:function(n){this._envMap=n}})},update:function(e){this.updateMaterial(e),kn(this,e),He("normal",this,e),He("displacement",this,e),He("ambientOcclusion",this,e),He("bump",this,e),Br(this,e)},updateMaterial:function(e){var t;for(t in ra(e,this.materialData),this.materialData)this.material[t]=this.materialData[t]}}),at("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`),init:function(){return this.uniforms=this.initUniforms(),h.UniformsUtils&&(this.uniforms=h.UniformsUtils.merge([h.UniformsLib.fog,this.uniforms])),this.material=new h.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),at("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`),init:function(){return this.uniforms=this.initUniforms(),h.UniformsUtils&&(this.uniforms=h.UniformsUtils.merge([h.UniformsLib.fog,this.uniforms])),this.material=new h.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),at("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(e){this.material=new h.ShadowMaterial},update:function(e){this.material.opacity=e.opacity,this.material.alphaToCoverage=e.alphaToCoverage,this.material.transparent=e.transparent}});var oa="data-aframe-default-camera";function sa(e){var t=e.primitive,n=lt[t]&&lt[t].Geometry,i=new n;if(!n)throw new Error("Unknown geometry `"+t+"`");return i.init(e),i.geometry}Fe("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var e,t,n=this.sceneEl,i=this;if(!n.camera||n.camera.el.getAttribute("camera").spectator)if((e=n.querySelectorAll("a-camera, :not(a-mixin)[camera]")).length)for(this.numUserCameras=e.length,t=0;t<e.length;t++)e[t].addEventListener("object3dset",function(r){r.detail.type==="camera"&&i.checkUserCamera(this)}),e[t].isANode?e[t].load():e[t].addEventListener("nodeready",function(){this.load()});else this.createDefaultCamera();else n.emit("cameraready",{cameraEl:n.camera.el})},checkUserCamera:function(e){var t,n=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((t=e.getAttribute("camera")).active&&!t.spectator?(this.initialCameraFound=!0,n.camera=e.getObject3D("camera"),n.emit("cameraready",{cameraEl:e})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var e,t=this.sceneEl;(e=document.createElement("a-entity")).setAttribute("camera",{active:!0}),e.setAttribute("position",{x:0,y:1.6,z:0}),e.setAttribute("wasd-controls",""),e.setAttribute("look-controls",""),e.setAttribute(be,""),e.addEventListener("object3dset",function(n){n.detail.type==="camera"&&(t.camera=n.detail.object,t.emit("cameraready",{cameraEl:e}))}),t.appendChild(e)},disableActiveCamera:function(){var e;(e=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"))[e.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(e){var t,n,i,r,o=this.activeCameraEl,s=this.sceneEl;if((r=e.getObject3D("camera"))&&e!==this.activeCameraEl){var A=s.querySelector("["+oa+"]");for(e!==(A&&A.querySelector(":not(a-mixin)[camera]"))&&function(a){var l;a.camera&&(l=a.querySelector("["+oa+"]"))&&a.removeChild(l)}(s),this.activeCameraEl=e,this.activeCameraEl.play(),s.camera=r,o&&o.setAttribute("camera","active",!1),n=s.querySelectorAll(":not(a-mixin)[camera]"),i=0;i<n.length;i++)(t=n[i]).isEntity&&e!==t&&(t.setAttribute("camera","active",!1),t.pause());s.emit("camera-set-active",{cameraEl:e})}},setSpectatorCamera:function(e){var t,n=this.spectatorCameraEl,i=this.sceneEl;e.getObject3D("camera")&&e!==this.spectatorCameraEl&&(n&&n.setAttribute("camera","spectator",!1),t=this.spectatorCameraEl=e,i.addEventListener("enter-vr",this.wrapRender),i.addEventListener("exit-vr",this.unwrapRender),t.setAttribute("camera","active",!1),t.play(),i.emit("camera-set-spectator",{cameraEl:e}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&!this.originalRender&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(e,t){var n,i,r=this.sceneEl;n=r.renderer.xr.enabled,this.originalRender.call(r.renderer,e,t),this.spectatorCameraEl&&!r.isMobile&&n&&(i=this.spectatorCameraEl.components.camera.camera,r.renderer.xr.enabled=!1,this.originalRender.call(r.renderer,e,i),r.renderer.xr.enabled=n)}}),Fe("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(e){var t,n,i=this.cache;return e.skipCache?sa(e):(t=i[n=this.hash(e)],function(r,o){r[o]=r[o]===void 0?1:r[o]+1}(this.cacheCount,n),t||(t=sa(e),i[n]=t,t))},unuseGeometry:function(e){var t,n=this.cache,i=this.cacheCount;e.skipCache||n[t=this.hash(e)]&&(function(r,o){r[o]--}(i,t),i[t]>0||(n[t].dispose(),delete n[t],delete i[t]))},hash:function(e){return JSON.stringify(e)}}),Fe("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.7/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var e=this.data.dracoDecoderPath,t=this.data.basisTranscoderPath,n=this.data.meshoptDecoderPath;!this.dracoLoader&&e&&(this.dracoLoader=new xa,this.dracoLoader.setDecoderPath(e)),!this.ktx2Loader&&t&&(this.ktx2Loader=new Se,this.ktx2Loader.setTranscoderPath(t).detectSupport(this.el.renderer)),!this.meshoptDecoder&&n&&(this.meshoptDecoder=function(i){return new Promise(function(r,o){var s=document.createElement("script");document.body.appendChild(s),s.onload=r,s.onerror=o,s.async=!0,s.src=i})}(n).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}});var In="data-aframe-default-light",xA=(Fe("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(e){e.hasAttribute(In)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var e,t=this.sceneEl;if(this.defaultLights){e=document.querySelectorAll("["+In+"]");for(var n=0;n<e.length;n++)t.removeChild(e[n]);this.defaultLights=!1}},setupDefaultLights:function(){var e,t,n=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((e=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),e.setAttribute(In,""),e.setAttribute(be,""),n.appendChild(e),(t=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:1.884,castShadow:!0}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute(In,""),t.setAttribute(be,""),n.appendChild(t),this.defaultLights=!0)}}),ee),Yh=xA("components:texture:error"),aa=xA("components:texture:warn"),Jh=new h.ImageLoader;Fe("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(e,t,n){this.loadTextureSource(e,function(i){var r=Xr(i);Hn(r,t),n(r)})},loadTextureSource:function(e,t){var n=this,i=this.sourceCache,r=this.hash(e);function o(s){i[r]=Promise.resolve(s),i[r].then(t)}i[r]?i[r].then(t):e.tagName!=="CANVAS"?o(new Promise(function(s,A){_n(e,function(a){n.loadImage(a,s)},function(a){n.loadVideo(a,s)})})):o(new h.Source(e))},loadCubeMapTexture:function(e,t){var n=this,i=0,r=new h.CubeTexture;function o(A){n.loadTextureSource(e[A],function(a){r.images[A]=a.data,++i==6&&(r.needsUpdate=!0,t(r))})}if(r.colorSpace=h.SRGBColorSpace,e.length===6)for(var s=0;s<e.length;s++)o(s);else aa("Cube map texture requires exactly 6 sources, got only %s sources",e.length)},loadImage:function(e,t){t(typeof e=="string"?function(n){return new Promise(function(i,r){Jh.load(n,function(o){i(new h.Source(o))},function(){},function(o){Yh("`$s` could not be fetched (Error code: %s; Response: %s)",o.status,o.statusText)})})}(e):new h.Source(e))},loadVideo:function(e,t){var n;typeof e!="string"&&function(i){i.autoplay=i.hasAttribute("autoplay")&&i.getAttribute("autoplay")!=="false",i.controls=i.hasAttribute("controls")&&i.getAttribute("controls")!=="false",i.getAttribute("loop")==="false"&&i.removeAttribute("loop"),i.getAttribute("preload")==="false"&&(i.preload="none"),i.crossOrigin=i.crossOrigin||"anonymous",i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline","")}(n=e),n=n||function(i){var r=document.createElement("video");return r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.autoplay=!0,r.loop=!0,r.crossOrigin="anonymous",r.addEventListener("error",function(){aa("`%s` is not a valid video",i)},!0),r.src=i,r}(e),t(new h.Source(n))},hash:function(e){return e.tagName&&(e.id||e.src)||e},registerMaterial:function(e){this.materials[e.uuid]=e},unregisterMaterial:function(e){delete this.materials[e.uuid]}}),Fe("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(e){this.colliderEls.push(e),this.data.showColliders?e.components["obb-collider"].showCollider():e.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(e){var t=this.colliderEls,n=t.indexOf(e);e.components["obb-collider"].hideCollider(),n>-1&&t.splice(n,1),t.length===0&&(this.tick=void 0)},registerCollision:function(e,t){var n=this.collisions,i=!1,r=e.obb,o=t.obb,s=e.renderColliderMesh,A=t.renderColliderMesh;s&&s.material.color.set(16711680),A&&A.material.color.set(16711680);for(var a=0;a<n.length;a++)if(n[a].componentA.obb===r&&n[a].componentB.obb===o||n[a].componentA.obb===o&&n[a].componentB.obb===r){i=!0,n[a].detected=!0;break}i||(n.push({componentA:e,componentB:t,detected:!0}),e.el.emit("obbcollisionstarted",{trackedObject3D:e.trackedObject3D,withEl:t.el}),t.el.emit("obbcollisionstarted",{trackedObject3D:t.trackedObject3D,withEl:e.el}))},resetCollisions:function(){for(var e=this.collisions,t=0;t<e.length;t++)e[t].detected=!1},clearCollisions:function(){for(var e,t,n,i,r=this.collisions,o=[],s=0;s<r.length;s++)r[s].detected?o.push(r[s]):(e=r[s].componentA,t=r[s].componentB,n=e.renderColliderMesh,i=t.renderColliderMesh,n&&n.material.color.set(65280),e.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:t.el}),i&&i.material.color.set(65280),t.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:e.el}));this.collisions=o},detectCollisions:function(){var e,t,n,i,r=this.colliderEls;if(!(r.length<2)){this.resetCollisions();for(var o=0;o<r.length;o++)if(n=r[o].components["obb-collider"],(e=r[o].components["obb-collider"].obb).halfSize.x!==0&&e.halfSize.y!==0&&e.halfSize.z!==0)for(var s=o+1;s<r.length;s++)(t=(i=r[s].components["obb-collider"]).obb).halfSize.x!==0&&t.halfSize.y!==0&&t.halfSize.z!==0&&e.intersectsOBB(t)&&this.registerCollision(n,i);this.clearCollisions()}}});var Xi=ee("components:renderer:warn");function Xh(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z-t.z}function Zh(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder-t.renderOrder}function $h(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:t.z-e.z}Fe("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:_r()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon","AgX","neutral"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon","AgX","neutral"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var e=this.data,t=this.el,n=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),i=t.renderer;i.toneMapping=h[n+"ToneMapping"],h.Texture.DEFAULT_ANISOTROPY=e.anisotropy,h.ColorManagement.enabled=e.colorManagement,i.outputColorSpace=e.colorManagement?h.SRGBColorSpace:h.LinearSRGBColorSpace,t.hasAttribute("antialias")&&Xi('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),t.hasAttribute("logarithmicDepthBuffer")&&Xi('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),i.sortObjects=!0,i.setOpaqueSort(Xh)},update:function(){var e=this.data,t=this.el.renderer,n=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);t.toneMapping=h[n+"ToneMapping"],t.toneMappingExposure=e.exposure,t.xr.setFoveation(e.foveationLevel),e.sortObjects&&Xi('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),e.sortTransparentObjects?t.setTransparentSort($h):t.setTransparentSort(Zh)},applyColorCorrection:function(e){this.data.colorManagement&&e&&e.isTexture&&e.colorSpace!==h.SRGBColorSpace&&(e.colorSpace=h.SRGBColorSpace,e.needsUpdate=!0)},setWebXRFrameRate:function(e){var t,n=this.data,i=e.supportedFrameRates;i&&e.updateTargetFrameRate&&(t=i.includes(90)?n.highRefreshRate?90:72:n.highRefreshRate?72:60,e.updateTargetFrameRate(t).catch(function(r){console.warn("failed to set target frame rate of "+t+". Error info: "+r)}))}});var ed={basic:h.BasicShadowMap,pcf:h.PCFShadowMap,pcfsoft:h.PCFSoftShadowMap};Fe("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var e=this.sceneEl,t=this.data;this.shadowMapEnabled=!1,e.renderer.shadowMap.type=ed[t.type],e.renderer.shadowMap.autoUpdate=t.autoUpdate},update:function(e){e.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(e){var t=this.sceneEl,n=this.sceneEl.renderer;this.shadowMapEnabled=e;var i=this.data.enabled&&this.shadowMapEnabled;n&&i!==n.shadowMap.enabled&&(n.shadowMap.enabled=i,function(r){r.hasLoaded&&r.object3D.traverse(function(o){if(o.material)for(var s=Array.isArray(o.material)?o.material:[o.material],A=0;A<s.length;A++)s[A].needsUpdate=!0})}(t))}}),Fe("tracked-controls",{init:function(){this.controllers=[],this.onInputSourcesChange=this.onInputSourcesChange.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.el.addEventListener("enter-vr",this.onEnterVR),this.onExitVR=this.onExitVR.bind(this),this.el.addEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.el.xrSession&&this.el.xrSession.addEventListener("inputsourceschange",this.onInputSourcesChange)},onExitVR:function(){this.referenceSpace=void 0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1)},onInputSourcesChange:function(){var e=this,t=this.el.xrSession,n=this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;t.requestReferenceSpace(n).then(function(i){e.referenceSpace=i}).catch(function(i){throw e.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(n,'tracked-controls uses reference space "'+n+'".'),i}),this.controllers=t.inputSources,this.el.emit("controllersupdated",void 0,!1)}});var td=ee("systems:webxr:warn"),QA=(Fe("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var e=this.data;this.sessionConfiguration={requiredFeatures:e.requiredFeatures,optionalFeatures:e.optionalFeatures},this.sessionReferenceSpaceType=e.referenceSpaceType,e.overlayElement&&(e.overlayElement.classList.remove("a-dom-overlay"),e.optionalFeatures.includes("dom-overlay")||(e.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",e)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:e.overlayElement},e.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(e){return e==="viewer"||e==="local"||!(!this.sessionConfiguration.requiredFeatures.includes(e)&&!this.sessionConfiguration.optionalFeatures.includes(e))},warnIfFeatureNotRequested:function(e,t){this.wasFeatureRequested(e)||td((t?t+" ":"")+'Please add the feature "'+e+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`)}}),{});function Aa(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e==="fog"&&(t="material-fog"),e==="visible"&&(t="material-visible"),QA[t]="material."+e}function $e(){return{defaultComponents:{material:{}},mappings:Le({},QA)}}Object.keys(ue.material.schema).forEach(Aa),Object.keys(Ve.standard.schema).forEach(Aa);var wn=new h.Vector3,nd=new h.Vector3;P("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var e=this.data,t=this.el,n=t.object3D.parent,i=t.object3D,r=new h.Group;wn.copy(i.position),nd.copy(i.rotation),n.remove(i),r.add(i),n.add(r),t.object3D=r,i.position.set(-1*e.x,-1*e.y,-1*e.z),r.position.set(e.x+wn.x,e.y+wn.y,e.z+wn.z),r.rotation.copy(i.rotation),i.rotation.set(0,0,0)}}),we("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}}),we("a-cursor",Me({},$e(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}})),we("a-curvedimage",Me({},$e(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}})),we("a-gltf-model",{mappings:{src:"gltf-model"}}),we("a-image",Me({},$e(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),we("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}}),we("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}}),we("a-obj-model",Me({},$e(),{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}));const LA={},id=LA;function la(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var Zi,xn;ro.forEach(function(e){var t=lt[e],n=la(e),i={};Object.keys(t.schema).forEach(function(s){i[la(s)]="geometry."+s});var r="a-"+n,o=we(r,Me({},$e(),{defaultComponents:{geometry:{primitive:e}},mappings:i}));LA[r]=o}),we("a-sky",Me({},$e(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:Me({},id["a-sphere"].mappings)})),we("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}}),Zi={text:{anchor:"align",width:5}},xn=xn||{},Object.keys(Zi).forEach(function(e){(function(t,n){var i=ue[t].schema;Object.keys(i).forEach(function(r){var o=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n[o]!==void 0&&(o=t+"-"+r),n[o]=t+"."+r})})(e,xn)}),we("a-text",Me({},null,{defaultComponents:Zi,mappings:xn})),we("a-video",Me({},$e(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),we("a-videosphere",Me({},$e(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}));var ao=ee,rd=ao("A-Frame:error"),od=ao("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&od("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),window.cordova||window.location.protocol!=="file:"||rd("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),Vr&&(window.logs=ao,G(7180),G(9379)),console.log("A-Frame Version: 1.7.0 (Date 2025-03-12, Commit #1b9650f1)"),console.log("THREE Version (https://github.com/supermedium/three.js):",Wa.REVISION),window.AFRAME_ASYNC||(document.readyState!=="complete"?document.addEventListener("readystatechange",function e(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",e),wr())}):wr());const sd=globalThis.AFRAME={AComponent:Xt,AEntity:Ce,ANode:Be,ANIME:Ln,AScene:vA,components:ue,coreComponents:Object.keys(ue),geometries:lt,registerComponent:P,registerGeometry:xe,registerPrimitive:we,registerShader:at,registerSystem:Fe,primitives:{getMeshMixin:$e,primitives:bA},scenes:Ct,schema:Ar,shaders:Ve,systems:Ze,emitReady:wr,THREE:Wa,utils:ar,version:yA};ha.A;AFRAME.registerComponent("locar-webcam",{schema:{idealWidth:{type:"number",default:1024},idealHeight:{type:"number",default:768},videoElement:{type:"string",default:""}},init:function(){const e=new kA({idealWidth:this.data.idealWidth,idealHeight:this.data.idealHeight},this.data.videoElement||null);e.on("webcamstarted",t=>{this.el.object3D.background=t.texture}),e.on("webcamerror",t=>{this.el.emit("webcamerror",t)})}});AFRAME.registerComponent("locar-camera",{schema:{simulateLatitude:{type:"number",default:0},simulateLongitude:{type:"number",default:0},simulateAltitude:{type:"number",default:-Number.MAX_VALUE},positionMinAccuracy:{type:"number",default:100},smoothingFactor:{type:"number",default:1}},init:function(){this.locar=new RA(this.el.sceneEl.object3D,this.el.object3D),this.locar.on("gpsupdate",e=>{this.el.emit("gpsupdate",e)}),this.locar.on("gpserror",e=>{this.el.emit("gpserror",e)}),this._isMobile()&&(this.deviceOrientationControls=new TA(this.el.object3D,{smoothingFactor:this.data.smoothingFactor}))},update:function(e){this.locar.setGpsOptions({gpsMinAccuracy:this.data.positionMinAccuracy,gpsMinDistance:this.data.gpsMinDistance}),(this.data.simulateLatitude!=(e==null?void 0:e.simulateLatitude)||this.data.simulateLongitude!=(e==null?void 0:e.simulateLongitude))&&(this.locar.stopGps(),this.locar.fakeGps(this.data.simulateLongitude,this.data.simulateLatitude),this.data.simulateLongitude=0,this.data.simulateLatitude=0),this.data.simulateAltitude>-Number.MAX_VALUE&&this.locar.setElevation(this.data.simulateAltitude+1.6)},play:function(){this.locar.startGps()},pause:function(){this.locar.stopGps()},lonLatToWorldCoords:function(e,t){return this.locar.lonLatToWorldCoords(e,t)},tick:function(){var e;(e=this.deviceOrientationControls)==null||e.update()},_isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints!=null&&navigator.maxTouchPoints>1}});AFRAME.registerComponent("locar-entity-place",{schema:{latitude:{type:"number",default:0},longitude:{type:"number",default:0}},init:function(){const e=this.el.sceneEl.querySelector("[locar-camera]");this.locarCamera=e.components["locar-camera"]},update:function(e){this.locarCamera||console.error("Cannot update locar-entity-place without a locar-camera component on the scene camera.");const t=this.locarCamera.lonLatToWorldCoords(this.data.longitude,this.data.latitude);this.el.object3D.position.set(t[0],this.el.object3D.position.y,t[1])}});
